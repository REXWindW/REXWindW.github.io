<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>äº”æœˆç¬¬äºŒå‘¨-å­¦ä¹ ç¬”è®°</title>
      <link href="2023/05/11/20235/"/>
      <url>2023/05/11/20235/</url>
      
        <content type="html"><![CDATA[<h1 id="äº”æœˆå­¦ä¹ è®°å½•"><a href="#äº”æœˆå­¦ä¹ è®°å½•" class="headerlink" title="äº”æœˆå­¦ä¹ è®°å½•"></a>äº”æœˆå­¦ä¹ è®°å½•</h1><p>æ—¶éš”ä¸¤å¹´é‡æ–°å¼€å§‹å†™åšå®¢ï¼Œæ¯•è®¾åŸºæœ¬ç»“æŸï¼Œç°åœ¨å…ˆå¼€å§‹è·Ÿç€æå®æ¯…çš„è¯¾ç¨‹ï¼Œç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹ã€‚</p><h2 id="Pytorch-Tutorial"><a href="#Pytorch-Tutorial" class="headerlink" title="Pytorch Tutorial"></a>Pytorch Tutorial</h2><h3 id="æ•°æ®è¯»å…¥"><a href="#æ•°æ®è¯»å…¥" class="headerlink" title="æ•°æ®è¯»å…¥"></a>æ•°æ®è¯»å…¥</h3><p>datasetå’Œdataloderï¼Œdatasetè¯»å…¥ï¼ˆstores data samlesï¼‰ï¼Œdataloderä½¿ç”¨ï¼ˆgroups data in batchesï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token punctuation">,</span>DataLoaderdataset <span class="token operator">=</span> MyDataset<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>dataloder <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span>batch_size<span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment">#trainçš„æ—¶å€™å¼€shuffleï¼Œtestçš„æ—¶å€™å…³</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>dataloaderæ¯æ¬¡æŒ‰åºï¼ˆshuffle=falseçš„æƒ…å†µï¼‰ä»datasetä¸­å–å‡ºbatch_sizeä¸ªå˜æˆä¸€ä¸ªbatchã€‚</p><p>å…³äºä¸ºä»€ä¹ˆè¦shuffleçš„è¯´æ˜<a href="https://zhuanlan.zhihu.com/p/57108650">æ•°æ®é›†shuffleçš„é‡è¦æ€§ - çŸ¥ä¹ (zhihu.com)</a></p><h3 id="å®šä¹‰dataset"><a href="#å®šä¹‰dataset" class="headerlink" title="å®šä¹‰dataset"></a>å®šä¹‰dataset</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å®šä¹‰MyDatasetfrom torch.utils.data import Dataset,Dataloader</span><span class="token keyword">class</span> <span class="token class-name">MyDataset</span><span class="token punctuation">(</span>Dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#åˆå§‹åŒ–ï¼Œå¯¹dataå¤„ç†</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token operator">=</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment">#è¿”å›å•ä¸ª</span>    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span>    <span class="token comment">#è·å–dataseté•¿åº¦</span>    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Tensors"><a href="#Tensors" class="headerlink" title="Tensors"></a>Tensors</h3><p>Tensoræ˜¯é«˜ç»´åº¦çš„çŸ©é˜µï¼Œæ˜¯ä¿¡æ¯è¯»å…¥åå­˜åœ¨Pytorchä¸­çš„å½¢å¼ã€‚</p><p>dim in Pytorch == axis in NumPy\</p><p>ä¸€äº›å¸¸ç”¨æ“ä½œ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”¨shapeçœ‹å¤§å°</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># list to tensor</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># numpy to tensor</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># zeroså’Œones</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># generate a 2*2*2 3dim tensor filled with 0</span><span class="token comment"># å¸¸è§è¿ç®—+-ï¼Œsum(),mean(),pow()</span>y <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment"># transposeï¼ŒæŒ‡å®šä¸¤ä¸ªdimensionäº’æ¢ï¼Œå¦‚2*3å˜3*2</span>y <span class="token operator">=</span> x<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># change dim0 and dim1</span><span class="token comment"># squeezeï¼Œæ‹¿æ‰é•¿åº¦ä¸º1çš„dimentionï¼Œå¦‚</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#generate a 1*2*3 tensor</span>x <span class="token operator">=</span> x<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">#squeeze to an 2*3 tensor</span>x <span class="token operator">=</span> x<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># unsqueeze to an 2*1*3 tensor</span><span class="token comment"># catï¼ŒæŠŠå¤šä¸ªtensorè¿æ¥åœ¨ä¸€èµ·</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>y <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>z <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>w <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">]</span><span class="token punctuation">,</span>dim <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># æ²¿dim1æ–¹å‘è¿æ¥</span><span class="token comment"># torch size [2,6,3]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Tensor-Datatype"><a href="#Tensor-Datatype" class="headerlink" title="Tensor - Datatype"></a>Tensor - Datatype</h4><pre class="line-numbers language-none"><code class="language-none"># 32bit floattorch.floattorch.FloatTensor# 64bit integertorch.longtorch.LongTensor#use dtype to check the datatypex.dtype<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Tensor-Device"><a href="#Tensor-Device" class="headerlink" title="Tensor - Device"></a>Tensor - Device</h3><p>Tensor will be computed with CPU by default.</p><p>use to() to move tensor to appropriate device like:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">x <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span><span class="token string">'cpu'</span><span class="token punctuation">)</span><span class="token comment"># to gpu</span>x <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span><span class="token string">'cuda'</span><span class="token punctuation">)</span><span class="token comment"># multi gpu</span>x <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span><span class="token string">'cuda:0'</span><span class="token punctuation">)</span> <span class="token comment">#cuda:1,cuda:2.....</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Tensor-Gradient"><a href="#Tensor-Gradient" class="headerlink" title="Tensor - Gradient"></a>Tensor - Gradient</h3>]]></content>
      
      
      <categories>
          
          <category> ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> å‘¨è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysqlç¯å¢ƒé…ç½®å’Œå¤è¯•sqlè¯­å¥å­¦ä¹ </title>
      <link href="2023/02/27/sql/"/>
      <url>2023/02/27/sql/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒåšå®¢"><a href="#å‚è€ƒåšå®¢" class="headerlink" title="å‚è€ƒåšå®¢"></a>å‚è€ƒåšå®¢</h1><p>mac armç¯å¢ƒä¸‹mysqlå®‰è£…ä¸ç¯å¢ƒä¾¿åˆ©é‚£ä¸ªpathçš„é…ç½®</p><p><a href="https://blog.csdn.net/weixin_42148729/article/details/115056646">(146æ¡æ¶ˆæ¯) Macç¯å¢ƒé…ç½®MySQLï¼ˆè¯¦ç»†ï¼‰_äº’è”ç½‘å°é˜Ÿçš„åšå®¢-CSDNåšå®¢_mac mysql</a></p><h1 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h1><p>å‰é¢å‡ ä¹éƒ½æŒ‰ç…§æ•™ç¨‹ä¸­çš„æ­¥éª¤ï¼Œä¹‹åæ‰“å¼€æ­¥éª¤åœ¨ä¿®æ”¹å®Œ.bash_profileå</p><p>æ‰“å¼€mysql</p><pre class="line-numbers language-none"><code class="language-none">cd /etcmysql -uroot -p//å¯åŠ¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ›å»ºdatabase</p><pre class="line-numbers language-none"><code class="language-none">create database student//åˆ›å»ºæ•°æ®åº“mysql&gt; create table students(    -&gt; id INT(11),    -&gt; name VARCHAR(24));//åˆ›å»ºstudentsè¡¨Query OK, 0 rows affected, 1 warning (0.02 sec)mysql&gt; show tables;//æŸ¥çœ‹ä¸€ä¸‹+-------------------+| Tables_in_student |+-------------------+| students          |+-------------------+1 row in set (0.00 sec)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="è€ƒè¯•ç”¨å†…å®¹"><a href="#è€ƒè¯•ç”¨å†…å®¹" class="headerlink" title="è€ƒè¯•ç”¨å†…å®¹"></a>è€ƒè¯•ç”¨å†…å®¹</h1><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><h2 id="sqlç¬¬ä¸€å°é—®å»ºè¡¨"><a href="#sqlç¬¬ä¸€å°é—®å»ºè¡¨" class="headerlink" title="sqlç¬¬ä¸€å°é—®å»ºè¡¨"></a>sqlç¬¬ä¸€å°é—®å»ºè¡¨</h2><pre class="line-numbers language-none"><code class="language-none">CREAT TABLE è¡¨å( åˆ—å1 æ•°æ®ç±»å‹1,  ...  åˆ—ån æ•°æ®ç±»å‹n,  è¡¨çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶1,  ...  è¡¨çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶n);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019ç§¦çš‡å²› J. MUV LUV EXTRAï¼ˆKMPæ‰¾å¾ªç¯ï¼‰</title>
      <link href="2021/09/22/qhdkmp/"/>
      <url>2021/09/22/qhdkmp/</url>
      
        <content type="html"><![CDATA[<p><a href="https://codeforces.com/gym/102361/problem/J">Problem - J - Codeforces</a></p><h2 id="é¢˜æ„"><a href="#é¢˜æ„" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>ç»™ä¸€ä¸ªå°æ•°ï¼Œå¦‚ 0.312121ï¼Œåˆ™12ä¸ºè¿™ä¸ªå°æ•°åˆ°æœ«å°¾çš„å¾ªç¯èŠ‚ï¼Œè®¾pä¸ºå¾ªç¯èŠ‚çš„é•¿åº¦ï¼Œlä¸ºå¯»ç¯èŠ‚å‡ºç°çš„é•¿åº¦ï¼Œåˆ™å¯»ç¯èŠ‚â€œ12â€çš„é•¿åº¦pä¸º2ï¼Œå‡ºç°é•¿åº¦lä¸º5ã€‚é¢˜ç›®ç»™å®šæƒé‡aï¼Œb:é—®ä¸€ä¸ªå°æ•°æ»¡è¶³æ¡ä»¶çš„å¯»ç¯èŠ‚ä¸­ï¼Œ$a\cdot p - b \cdot l$æœ€å¤§å€¼æ˜¯å¤šå°‘ã€‚</p><h2 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h2><p>ç”¨KMPæ‰¾å¯»ç¯ï¼Œä½†æ˜¯å¦‚æœä¿æŒå°æ•°ä¸åšä¿®æ”¹ï¼Œåˆ™æ²¡æ³•ç¡®å®šæ¨¡å¼ä¸²çš„å¤´ï¼Œæ•…éœ€è¦åè½¬å°æ•°ä½ï¼Œè¿™æ ·å¯ä»¥è®©å¯»ç¯èŠ‚éƒ½å¤„åœ¨å¼€å¤´ï¼Œåªéœ€è¦è€ƒè™‘ä¸åŒé•¿åº¦å³å¯ã€‚</p><p>å¦‚ï¼š0.12141å¯ä»¥å–å¼€å¤´åœ¨ä½ç½®0çš„â€1214â€œï¼Œä¹Ÿå¯ä»¥æ˜¯ä½ç½®3çš„â€14â€œï¼Œå¦‚æœå¼€å§‹çš„ä½ç½®ä¸ç¡®å®šï¼Œå³æ¨¡å¼ä¸²çš„ä½ç½®ä¸ç¡®å®šã€‚å¦‚æœæŠŠå°æ•°ä½åè½¬ï¼Œå¾—åˆ°â€14121â€œï¼Œåˆ™å‘ç°å¯ä»¥è®©å¯»ç¯èŠ‚éƒ½å˜åˆ°å¼€å¤´ä½ç½®0ã€‚</p><p>å¯¹è¿™ä¸ªä¸²å¤„ç†å‰ç¼€å‡½æ•°piã€‚</p><p>å¦‚æœä¸²12xx12çš„å‰ç¼€å‡½æ•°ä¸º2ï¼Œåˆ™è¯´æ˜å¾ªç¯çš„é•¿åº¦æ˜¯6(æ€»é•¿)-2(å‰ç¼€å‡½æ•°)ã€‚å¯ä»¥å‘ç°ä½ç½®içš„å¾ªç¯é•¿åº¦$p=len- \pi(i)$,å‡ºç°é•¿åº¦$l=len$ã€‚åœ¨æ¯ä¸ªä½ç½®è®¡ç®—$a\cdot p- b\cdot l$å³å¯ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;algorithm&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define int long longconst int MAXN = 1e7+666;string s,ss;int a,b;int pi[MAXN];void getpi(const string &amp;s){ //æ±‚sçš„å‰ç¼€å‡½æ•°pi[0]=0;int j=0;rep(i,1,s.length()-1){while(j&gt;0&amp;&amp;s[i]!=s[j]) j=pi[j-1];//æ‰¾åˆ°åˆé€‚ä¸”æœ€é•¿çš„j if(s[i]==s[j])j++;//èƒ½æˆåŠŸåŒ¹é…çš„æƒ…å†µ pi[i]=j;}}inline void solve(){    cin&gt;&gt;a&gt;&gt;b;    cin&gt;&gt;ss;    int px = 0;    while(ss[px] != '.') px++;        s = ss.substr(px+1);    reverse(s.begin(),s.end());    getpi(s);    //cout&lt;&lt;"s = "&lt;&lt;s&lt;&lt;endl;        int res = a-b;    int n = s.length();    int p,l;    rep(i,0,n-1){        p = i+1;        l = i+1 - pi[i];        res = max(res,a*p-b*l);    }    cout&lt;&lt;res&lt;&lt;endl;}signed main(){    solve();}//KMPæ‰¾å¾ªç¯èŠ‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> VP </tag>
            
            <tag> KMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åç¼€æ•°ç»„SA</title>
      <link href="2021/08/06/sa/"/>
      <url>2021/08/06/sa/</url>
      
        <content type="html"><![CDATA[<h1 id="åç¼€æ•°ç»„SA"><a href="#åç¼€æ•°ç»„SA" class="headerlink" title="åç¼€æ•°ç»„SA"></a>åç¼€æ•°ç»„SA</h1><h2 id="åç¼€æ•°ç»„SA-1"><a href="#åç¼€æ•°ç»„SA-1" class="headerlink" title="åç¼€æ•°ç»„SA"></a>åç¼€æ•°ç»„SA</h2><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://www.luogu.com.cn/blog/xMinh/solution-p3809">é¢˜è§£ P3809 ã€ã€æ¨¡æ¿ã€‘åç¼€æ’åºã€‘ - xMinh çš„åšå®¢ - æ´›è°·åšå®¢ (luogu.com.cn)</a></p><h3 id="éœ€è¦ç»´æŠ¤"><a href="#éœ€è¦ç»´æŠ¤" class="headerlink" title="éœ€è¦ç»´æŠ¤"></a>éœ€è¦ç»´æŠ¤</h3><ul><li>sa[i]ï¼šæ’åä¸ºiçš„åç¼€çš„èµ·ç‚¹ï¼ˆå·¦ç«¯ç‚¹ï¼‰ä½ç½®</li><li>rk[i]ï¼šèµ·ç‚¹ï¼ˆå·¦ç«¯ç‚¹ï¼‰ä¸ºiçš„åç¼€çš„æ’å</li></ul><p>ç†è§£ï¼šrk[sa[i]] = i å’Œ sa[rk[i]] = i</p><p>å³ã€æ’åç¬¬içš„åç¼€ã€‘çš„æ’åä¸ºi å’Œ æ’åç¬¬ã€å·¦ç«¯ç‚¹ä¸ºiçš„åç¼€çš„æ’åã€‘çš„å·¦ç«¯ç‚¹ä¸ºi</p><h3 id="ä½¿ç”¨å€å¢æ³•"><a href="#ä½¿ç”¨å€å¢æ³•" class="headerlink" title="ä½¿ç”¨å€å¢æ³•"></a>ä½¿ç”¨å€å¢æ³•</h3><p>ä¸€å¼ ç‰¹åˆ«å½¢è±¡çš„å›¾ï¼š<img src="/img/sasam/sa.jpg" alt="sa"></p><p>è¿™æ ·å°±èƒ½å¾ˆå½¢è±¡çš„è¡¨ç¤ºé€šè¿‡å€å¢è¿›è¡Œåç¼€æ’åºçš„è¿‡ç¨‹ï¼Œä¸€ç›´å€å¢ç›´åˆ°æ’åå„ä¸ç›¸åŒä¸ºæ­¢ï¼Œå› ä¸ºåç¼€çš„é•¿åº¦éƒ½ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ç»“æœè‚¯å®šä¸ä¼šå‡ºç°æ’åå¹¶åˆ—çš„æƒ…å†µã€‚</p><p><strong>å›¾é‡Œé¢æœ‰ä¸ªâ€œæ²¡æœ‰åˆ™å¡«0â€æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œåœ¨ä»£ç ä¸­åº”æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºï¼Œå…ˆå¯¹è¿™äº›æ²¡æœ‰ç¬¬äºŒå…³é”®å­—çš„åç¼€ä»å·¦åˆ°å³æŒ‰é¡ºåºè¿›è¡Œç¼–å·ï¼Œä½œä¸ºç¬¬äºŒå…³é”®å­—æœ€å°çš„é‚£å‡ ä¸ªã€‚</strong></p><h3 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h3><pre class="line-numbers language-none"><code class="language-none">ä¸€å¼€å§‹çš„åºåˆ—æ˜¯ï¼š21 31 32 22 23 13 12ä»å‰å¾€åæ£€æŸ¥ä½ä½æ”¾åˆ°å¯¹åº”çš„æ¡¶é‡Œc[1]: 21 31c[2]: 32 22 12c[3]: 23 13æŒ‰ç…§é¡ºåºå–å‡ºæ¥å¾—åˆ°æ–°åºåˆ—ï¼š21 31 32 22 12 23 13ä»å‰å¾€åæ£€æŸ¥é«˜ä½æ”¾å…¥æ¡¶ä¸­c[1]: 12 13c[2]: 21 22 23c[3]: 31 32å¾—åˆ°åºåˆ—ï¼š12 13 21 22 23 31 32<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®ç°ï¼SAå­¦ä¹ ä¸­æœ€å¤§çš„å›°éš¾ç«Ÿç„¶åœ¨åŸºæ•°æ’åº"><a href="#å®ç°ï¼SAå­¦ä¹ ä¸­æœ€å¤§çš„å›°éš¾ç«Ÿç„¶åœ¨åŸºæ•°æ’åº" class="headerlink" title="å®ç°ï¼SAå­¦ä¹ ä¸­æœ€å¤§çš„å›°éš¾ç«Ÿç„¶åœ¨åŸºæ•°æ’åº"></a>å®ç°ï¼SAå­¦ä¹ ä¸­æœ€å¤§çš„å›°éš¾ç«Ÿç„¶åœ¨åŸºæ•°æ’åº</h3><pre class="line-numbers language-none"><code class="language-none">ä»£ç é‡Œï¼Œå…ˆè®¡ç®—äº†ç¬¬äºŒå…³é”®å­—ï¼Œå¾—åˆ°rankrk2: 1  1  2  2  3  3  2åºåˆ—:21 31 32 22 23 13 12ä¹‹åæ ¹æ®ç¬¬ä¸€å…³é”®å­—æ”¾å…¥æ¡¶ä¸­rk2:   3  2c[1]: 13 12rk2:   1  2  3c[2]: 21 22 23rk2:   1  2c[3]: 31 32æœ€åæ ¹æ®ç¬¬äºŒå…³é”®å­—çš„å¤§å°ï¼ŒæŒ‰é¡ºåºä»æ¡¶ä¸­å–æ•°å³å¯ã€‚c[i]æ˜¯å‰ç¼€å’Œï¼Œè®°å½•ç¬¬ä¸€å…³é”®å­—&lt;=içš„ä¸€å…±æœ‰å‡ ä¸ªï¼Œå¯¹äºæ‹¥æœ‰ç›¸åŒç¬¬ä¸€å…³é”®å­—çš„æ•°ï¼Œæ ¹æ®ç¬¬äºŒå…³é”®å­—ä»å¤§åˆ°å°å–å‡ºï¼Œå–å‡ºå¾—æ—¶å€™åˆ†é…æ’åä¸ºc[i]ï¼Œå¹¶ä¸”è®©c[i]--ï¼Œè¿™æ ·ä¹‹åä»c[i]å–æ•°çš„æ’åå°±æ¯”å…ˆå–çš„è€ƒå‰ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;using namespace std;#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)const int MAXN = 1114514;int n,m;string s;int rk[MAXN],sa[MAXN],c[MAXN],rk2[MAXN];//sa[i]å­˜æ’åiçš„åŸå§‹ç¼–å· rk[i]å­˜ç¼–å·içš„æ’å ç¬¬äºŒå…³é”®å­—rk2inline void get_SA(){    rep(i,1,n) ++c[rk[i]=s[i]];//åŸºæ•°æ’åº    rep(i,2,m) c[i] += c[i-1];    //cåšå‰ç¼€å’Œï¼Œå¯ä»¥çŸ¥é“æ¯ä¸ªå…³é”®å­—çš„æ’åæœ€ä½åœ¨å“ªé‡Œ    repb(i,n,1) sa[c[rk[i]]--] = i;//è®°å½•æ¯ä¸ªæ’åçš„åŸç¼–å·    for(int w=1;w&lt;=n;w&lt;&lt;=1){//å€å¢        int num = 0;        rep(i,n-w+1,n) rk2[++num] = i;//æ²¡æœ‰ç¬¬äºŒå…³é”®å­—çš„æ’åœ¨å‰é¢        rep(i,1,n) if(sa[i]&gt;w) rk2[++num] = sa[i]-w;        //ç¼–å·sa[i]å¤§äºwçš„æ‰èƒ½ä½œä¸ºç¼–å·sa[i]-wçš„ç¬¬äºŒå…³é”®å­—        rep(i,1,m) c[i] = 0;        rep(i,1,n) ++c[rk[i]];        rep(i,2,m) c[i]+=c[i-1];        repb(i,n,1) sa[c[rk[rk2[i]]]--]=rk2[i],rk2[i]=0;        //åŒä¸€ä¸ªæ¡¶ä¸­æŒ‰ç…§ç¬¬äºŒå…³é”®å­—æ’åº        swap(rk,rk2);        //è¿™æ—¶å€™çš„rk2æ—¶è¿™æ¬¡æ’åºç”¨åˆ°çš„ä¸Šä¸€è½®çš„rk,è¦è®¡ç®—å‡ºæ–°çš„rkç»™ä¸‹ä¸€è½®æ’åº        rk[sa[1]]=1,num=1;        rep(i,2,n)            rk[sa[i]] = (rk2[sa[i]]==rk2[sa[i-1]]&amp;&amp;rk2[sa[i]+w]==rk2[sa[i-1]+w])?num:++num;        //ä¸‹ä¸€æ¬¡æ’åçš„ç¬¬ä¸€å…³é”®å­—,ç›¸åŒçš„ä¸¤ä¸ªå…ƒç´ æ’åä¹Ÿç›¸åŒ        if(num==n) break;//rkéƒ½å”¯ä¸€æ—¶ï¼Œæ’åºç»“æŸ        m=num;    }}inline void solve(){    cin&gt;&gt;s;    s = ' '+s;    n = s.size()-1,m = 122;//mä¸ºå­—ç¬¦ä¸ªæ•°'z'=122    get_SA();    rep(i,1,n) cout&lt;&lt;sa[i]&lt;&lt;' ';    cout&lt;&lt;endl;}int main(){    solve();}//P3809 ã€æ¨¡æ¿ã€‘åç¼€æ’åº//https://www.luogu.com.cn/problem/P3809<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æœ€é•¿å…¬å…±å‰ç¼€-LCP"><a href="#æœ€é•¿å…¬å…±å‰ç¼€-LCP" class="headerlink" title="æœ€é•¿å…¬å…±å‰ç¼€ LCP"></a>æœ€é•¿å…¬å…±å‰ç¼€ LCP</h2><p>Longest Common Prefix Array æœ€é•¿å…¬å…±å‰ç¼€ï¼ŒLCP(i,j)è¡¨ç¤ºsuff(sa[i])å’Œsuff(sa[j])çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚</p><h3 id="LCPçš„æ€§è´¨"><a href="#LCPçš„æ€§è´¨" class="headerlink" title="LCPçš„æ€§è´¨"></a>LCPçš„æ€§è´¨</h3><ul><li>$LCP(i,j)=LCP(j,i)$</li><li>$LCP(i,i) = length(sa[i]) = n-sa[i]+1$ï¼Œèµ·ç‚¹åœ¨sa[i]çš„åç¼€ï¼Œé•¿åº¦ä¸ºn-sa[i]+1</li></ul><h3 id="å¼•ç†"><a href="#å¼•ç†" class="headerlink" title="å¼•ç†"></a>å¼•ç†</h3><ul><li>å¯¹ä»»æ„çš„$k\in[i,j]$ï¼Œæœ‰$LCP(i,k)=min{ LCP(i,k),LCP(k,j)}$</li></ul><p>è¯æ˜ï¼šæ˜¯å·¦å³ä¸¤è¾¹ä¸¤ä¸ªå°äºç­‰äºå·æ¥â€å¤¹ä½â€çš„</p><p>ï¼ˆ1ï¼‰è®¾$suff(sa[i]),suff(sa[j]),suff(sa[k])$ä¸‰ä¸ªä¸²ä¸²åˆ†åˆ«æ˜¯$a,b,c$</p><p>ï¼ˆ2ï¼‰è®¾$p = min(LCP(i,k),LCP(k,j))$ï¼Œåˆ™æœ‰$LCP(i,j)\geq p$ã€‚ï¼ˆå·¦è¾¹å¤¹ä½äº†ï¼‰</p><p>ï¼ˆ3ï¼‰ç”¨åè¯æ³•ï¼Œè‹¥$LCP(i,j)\geq p+1$ï¼Œå› ä¸º$p = min(LCP(i,k),LCP(k,j))$ï¼Œæœ‰$a[p+1]\neq b[p+1]$æˆ–$b[p+1]\neq c[p+1]$ï¼Œä¸$a[p+1]=b[p+1]$çŸ›ç›¾ã€‚æ•…å¾å¾—$LCP(i,j)\leq p$</p><ul><li>è¡¥å……ï¼šä¸Šé¢çš„æ­¥éª¤ï¼ˆ3ï¼‰æ˜¯æ‘˜æŠ„è‡ªå‚è€ƒåšå®¢ï¼Œä½†æ˜¯æœ‰äº›è®¸ä¸ä¸¥è°¨ï¼Œå¯èƒ½å­˜åœ¨$a[p+1]\neq b[p+1]$ä¸”$b[p+1]\neq c[p+1]$çš„æƒ…å†µï¼Œè¿™æ ·çš„è¯æ˜æ¼äº†$a[p+1]=c[p+1]$çš„å¯èƒ½æ€§ã€‚æˆ‘çš„æƒ³æ³•æ˜¯ï¼šç”±äºæ˜¯ç»è¿‡æ’åºåçš„åç¼€ï¼Œæ•…ä¸ç­‰å·å¯ä»¥ä¿®æ”¹ä¸º$&lt;$å·ï¼Œå³$a[p+1]&lt; b[p+1]$æˆ–$b[p+1]&lt;c[p+1]$ï¼Œå¯æ¨å¾—$a[p+1]&lt;c[p+1]$ã€‚</li></ul><p>å»åšä¸»ä¸‹é¢æäº†ä¸€å˜´w</p><img src="/img/sasam/comment.png"><p>è¿™ä¹ˆä¸€æ¥ï¼Œæˆ‘ä»¬è¦æ±‚$LCP(i,j)$,å°±å¯ä»¥æ‹†æˆ$LCP(i,k),LCP(k,j)$,ä¹‹å$LCP(k,j)$å¯ä»¥å†æ‹†ï¼Œè¿™ä¹ˆè½¬åŒ–ï¼Œå°±æœ‰ç‚¹åŒºé—´DPåˆå¹¶çš„æ„Ÿè§‰äº†</p><h3 id="æ±‚LCP"><a href="#æ±‚LCP" class="headerlink" title="æ±‚LCP"></a>æ±‚LCP</h3><p>å¤„ç†heightæ•°ç»„ï¼Œ$height[i]$è¡¨ç¤º$LCP(i-1,i)$ï¼Œå®šä¹‰$height[1]=0$ï¼Œè¿™æ ·æ±‚$LCP(i,j)$å°±å˜æˆäº†æ±‚åŒºé—´æœ€å°å€¼$min{height(x)|x\in[i+1,j]}$ã€‚ä½†æ˜¯heightæ€ä¹ˆæ¥ï¼Ÿ</p><p>è®¾$h[i]=height[rk[i]]$ï¼Œå³å·¦ç«¯ç‚¹ä¸ºiçš„åç¼€çš„height</p><p><strong>å…³é”®å®šç†</strong>ï¼š$h[i]&gt;=h[i-1]-1$</p><p>è¯æ˜ä¸ºæ‘˜æŠ„ï¼Œä¾µåˆ </p><p><a href="https://www.luogu.com.cn/blog/xMinh/solution-p3809">é¢˜è§£ P3809 ã€ã€æ¨¡æ¿ã€‘åç¼€æ’åºã€‘ - xMinh çš„åšå®¢ - æ´›è°·åšå®¢ (luogu.com.cn)</a></p><pre class="line-numbers language-none"><code class="language-none">é¦–å…ˆæˆ‘ä»¬ä¸å¦¨è®¾ç¬¬i-1ä¸ªå­—ç¬¦ä¸²æŒ‰æ’åæ¥çš„å‰é¢çš„é‚£ä¸ªå­—ç¬¦ä¸²æ˜¯ç¬¬kä¸ªå­—ç¬¦ä¸²ï¼Œæ³¨æ„kä¸ä¸€å®šæ˜¯i-2ï¼Œå› ä¸ºç¬¬kä¸ªå­—ç¬¦ä¸²æ˜¯æŒ‰å­—å…¸åºæ’åæ¥çš„i-1å‰é¢é‚£ä¸ªï¼Œå¹¶ä¸æ˜¯æŒ‡åœ¨åŸå­—ç¬¦ä¸²ä¸­ä½ç½®åœ¨i-1å‰é¢çš„é‚£ä¸ªç¬¬i-2ä¸ªå­—ç¬¦ä¸²ã€‚è¿™æ—¶ï¼Œä¾æ®height[]çš„å®šä¹‰ï¼Œç¬¬kä¸ªå­—ç¬¦ä¸²å’Œç¬¬i-1ä¸ªå­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€è‡ªç„¶æ˜¯height[rk[i-1]]ï¼Œç°åœ¨å…ˆè®¨è®ºä¸€ä¸‹ç¬¬k+1ä¸ªå­—ç¬¦ä¸²å’Œç¬¬iä¸ªå­—ç¬¦ä¸²çš„å…³ç³»ã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œç¬¬kä¸ªå­—ç¬¦ä¸²å’Œç¬¬i-1ä¸ªå­—ç¬¦ä¸²çš„é¦–å­—ç¬¦ä¸åŒï¼Œé‚£ä¹ˆç¬¬k+1ä¸ªå­—ç¬¦ä¸²çš„æ’åæ—¢å¯èƒ½åœ¨içš„å‰é¢ï¼Œä¹Ÿå¯èƒ½åœ¨içš„åé¢ï¼Œä½†æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºheight[rk[i-1]]å°±æ˜¯0äº†å‘€ï¼Œé‚£ä¹ˆæ— è®ºheight[rk[i]]æ˜¯å¤šå°‘éƒ½ä¼šæœ‰height[rk[i]]&gt;=height[rk[i-1]]-1ï¼Œä¹Ÿå°±æ˜¯h[i]&gt;=h[i-1]-1ã€‚ç¬¬äºŒç§æƒ…å†µï¼Œç¬¬kä¸ªå­—ç¬¦ä¸²å’Œç¬¬i-1ä¸ªå­—ç¬¦ä¸²çš„é¦–å­—ç¬¦ç›¸åŒï¼Œé‚£ä¹ˆç”±äºç¬¬k+1ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ç¬¬kä¸ªå­—ç¬¦ä¸²å»æ‰é¦–å­—ç¬¦å¾—åˆ°çš„ï¼Œç¬¬iä¸ªå­—ç¬¦ä¸²ä¹Ÿæ˜¯ç¬¬i-1ä¸ªå­—ç¬¦ä¸²å»æ‰é¦–å­—ç¬¦å¾—åˆ°çš„ï¼Œé‚£ä¹ˆæ˜¾ç„¶ç¬¬k+1ä¸ªå­—ç¬¦ä¸²è¦æ’åœ¨ç¬¬iä¸ªå­—ç¬¦ä¸²å‰é¢ã€‚åŒæ—¶ï¼Œç¬¬kä¸ªå­—ç¬¦ä¸²å’Œç¬¬i-1ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€æ˜¯height[rk[i-1]]ï¼Œé‚£ä¹ˆè‡ªç„¶ç¬¬k+1ä¸ªå­—ç¬¦ä¸²å’Œç¬¬iä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€å°±æ˜¯height[rk[i-1]]-1ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œç¬¬äºŒç§æƒ…å†µçš„è¯æ˜è¿˜æ²¡æœ‰å®Œï¼Œæˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå¯¹äºæ¯”ç¬¬iä¸ªå­—ç¬¦ä¸²çš„æ’åæ›´é å‰çš„é‚£äº›å­—ç¬¦ä¸²ï¼Œè°å’Œç¬¬iä¸ªå­—ç¬¦ä¸²çš„ç›¸ä¼¼åº¦æœ€é«˜ï¼ˆè¿™é‡Œè¯´çš„ç›¸ä¼¼åº¦æ˜¯æŒ‡æœ€é•¿å…¬å…±å‰ç¼€çš„é•¿åº¦ï¼‰ï¼Ÿæ˜¾ç„¶æ˜¯æ’åç´§é‚»ç¬¬iä¸ªå­—ç¬¦ä¸²çš„é‚£ä¸ªå­—ç¬¦ä¸²äº†å‘€ï¼Œå³sa[rank[i]-1]ã€‚ä½†æ˜¯æˆ‘ä»¬å‰é¢æ±‚å¾—ï¼Œæœ‰ä¸€ä¸ªæ’åœ¨iå‰é¢çš„å­—ç¬¦ä¸²k+1ï¼ŒLCP(rk[i],rk[k+1])=height[rk[i-1]]-1;åˆå› ä¸ºheight[rk[i]]=LCP(i,i-1)&gt;=LCP(i,k+1)æ‰€ä»¥height[rk[i]]&gt;=height[rk[i-1]]-1ï¼Œä¹Ÿå³h[i]&gt;=h[i-1]-1ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>æ ¹æ®ä¸Šé¢çš„å®šç†ï¼šh[i]&gt;=h[i-1]-1 ï¼Œå³height[rk[i]]&gt;=height[rk[i-1]]-1</p><p>ç”¨kè®°å½•å½“å‰çš„h[i]ï¼Œå› ä¸ºh[i]&gt;=h[i-1]-1ï¼Œiæ¯æ¬¡å¾€åç§»åŠ¨æ—¶kâ€“ã€‚</p><p>iä»å¤´æ‰«åˆ°å°¾ï¼Œkä¼šå‡å°‘nï¼Œå› æ­¤æˆ‘ä»¬åœ¨å¤„ç†h[i]æ—¶å®Œå…¨å¯ä»¥é€å­—ç¬¦æ¯”è¾ƒï¼Œæœ€å¤šä¹Ÿåªæ¯”è¾ƒ2næ¬¡ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">int height[MAXN];inline void get_height(){    int k = 0,j;    rep(i,1,n) rk[sa[i]] = i;    rep(i,1,n){        if(rk[i]==1) continue;//ç¬¬ä¸€åå¾€å‰æ²¡æœ‰å‰ç¼€        if(k) k--;//h[i]&gt;=h[i-1]-1 å³height[rk[i]]&gt;=height[rk[i-1]]-1        j = sa[rk[i]-1];//æ‰¾æ’åœ¨rk[i]å‰é¢çš„        while(j+k&lt;=n&amp;&amp;i+k&lt;=n&amp;&amp;s[i+k]==s[j+k]) ++k;//é€å­—ç¬¦æ¯”è¾ƒ        //å› ä¸ºæ¯æ¬¡kåªä¼š-1ï¼Œæ•…++kæœ€å¤šåªä¼šåŠ 2næ¬¡        height[rk[i]] = k;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å†™é¢˜"><a href="#å†™é¢˜" class="headerlink" title="å†™é¢˜"></a>å†™é¢˜</h2><h4 id="ç¬¬ä¸€é¢˜"><a href="#ç¬¬ä¸€é¢˜" class="headerlink" title="ç¬¬ä¸€é¢˜"></a>ç¬¬ä¸€é¢˜</h4><p>[P4051 <a href="https://www.luogu.com.cn/problem/P4051">JSOI2007]å­—ç¬¦åŠ å¯† - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p>ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚JSOI07ï¼Œå¯¹è¿™ä¸ªä¸²çš„æ‰€æœ‰ç§»åŠ¨å¾—åˆ°çš„ä¸²è¿›è¡Œæ’åºï¼Œå¦‚ JSOI07 SOI07J OI07JS I07JSO 07JSOI 7JSOI0ï¼Œè¾“å‡ºè¿™äº›ä¸²æŒ‰é¡ºåºæ’åˆ—åæœ€åä¸€ä¸ªå­—æ¯ç»„æˆçš„ä¸²ã€‚</p><p>æ˜¯å¾ˆæ™®é€šçš„ä¸€é¢˜åç¼€æ’åºï¼ŒæŠŠå­—ç¬¦ä¸²å¤åˆ¶ä¸€éï¼ˆJSOI07å˜æˆJSOI07JSOI07ï¼‰å†å¯¹æ‰€æœ‰çš„åç¼€è¿›è¡Œæ’åºå³å¯ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)const int MAXN = 114514&lt;&lt;2;int n,m;string s;int rk[MAXN],sa[MAXN],c[MAXN],rk2[MAXN];inline void get_SA(){    rep(i,1,n) ++c[rk[i]=s[i]];    rep(i,2,m) c[i] += c[i-1];    repb(i,n,1) sa[c[rk[i]]--] = i;    for(int w=1;w&lt;=n;w&lt;&lt;=1){        int num = 0;        rep(i,n-w+1,n) rk2[++num] = i;        rep(i,1,n) if(sa[i]&gt;w) rk2[++num] = sa[i]-w;        rep(i,1,m) c[i]=0;        rep(i,1,n) ++c[rk[i]];        rep(i,2,m) c[i] += c[i-1];        repb(i,n,1) sa[c[rk[rk2[i]]]--]=rk2[i],rk2[i]=0;        swap(rk,rk2);                rk[sa[1]]=1,num=1;        rep(i,2,n)            rk[sa[i]] = (rk2[sa[i]]==rk2[sa[i-1]]&amp;&amp;rk2[sa[i]+w]==rk2[sa[i-1]+w])?num:++num;        if(num==n) break;        m = num;    }}inline void solve(){    cin&gt;&gt;s;    int tmp = s.size();    s = ' '+s+s;    n = s.size()-1;m = 256;    get_SA();    rep(i,1,n)        if(sa[i]&lt;=tmp){            //rep(j,sa[i],sa[i]+tmp-1) cout&lt;&lt;s[j];            //cout&lt;&lt;' ';            cout&lt;&lt;s[sa[i]+tmp-1];        }    cout&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç¬¬äºŒé¢˜"><a href="#ç¬¬äºŒé¢˜" class="headerlink" title="ç¬¬äºŒé¢˜"></a>ç¬¬äºŒé¢˜</h4><p>[P4248 <a href="https://www.luogu.com.cn/problem/P4248">AHOI2013]å·®å¼‚ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p>é¢˜æ„ï¼šç»™é•¿nï¼ˆ5e5ï¼‰çš„ä¸²ï¼Œé—®$\sum len(Ti)+len(Tj)-2\cdot LCP(Ti,Tj)|1\leq i&lt;j\leq n$</p><p>è§£ï¼šé¦–å…ˆå¸¸è§„çš„ä½¿ç”¨saè®¡ç®—å‡ºheightæ•°ç»„ï¼Œä¹‹åå‘ç°è¿™ä¸ªå¼å­çš„å‰åŠéƒ¨åˆ†å¯ä»¥ç›´æ¥è®¡ç®—ï¼Œå³$\sum len(Ti)+len(Tj) = \frac{(n-1)n(n+1)}{2}$</p><p>ååŠéƒ¨åˆ†$\sum LCP(Ti,Tj)$ï¼Œå› ä¸ºæœ‰$lcp(i,j) = min(lcp(i,k),lcp(k,j))$ï¼Œå³$lcp(i,j) = min{height(x)|i\leq x\leq j}$æ•…è½¬å˜æˆ <strong>æ±‚æ‰€æœ‰åŒºé—´æœ€å°å€¼ä¹‹å’Œ</strong></p><p>æ‰€æœ‰åŒºé—´æœ€å°å€¼ä¹‹å’Œçš„é—®é¢˜ï¼Œç”¨<strong>å•è°ƒæ ˆ</strong>å®ç°å³å¯ï¼š</p><ul><li><p>ç»´æŠ¤å•è°ƒæ ˆï¼Œæ ˆåº•æ˜¯ä»$height(2)$åˆ°$height(i)$æœ€å°çš„å…ƒç´ ï¼Œä»åº•åˆ°é¡¶å•è°ƒé€’å¢</p></li><li><p>ç”¨$dp[i]$è®°å½•ä»¥$i$ä¸ºå³ç«¯ç‚¹çš„æ‰€æœ‰åŒºé—´çš„æœ€å°å€¼ä¹‹å’Œã€‚</p></li><li><p>å¯¹äºä¸€ä¸ªæ–°çš„å…ƒç´ $height(i)$ï¼Œè¦æ‰¾åˆ°å®ƒ<strong>å·¦è¾¹æœ€è¿‘çš„æ¯”ä»–å°çš„å…ƒç´ </strong>pï¼Œåœ¨è®¿é—®åˆ°$height(i)$æ—¶ï¼ŒæŠŠæ ˆé¡¶å¤§äº$height(i)$çš„éƒ½å‡ºæ ˆå³å¯ã€‚é‚£ä¹ˆåˆ™æœ‰$dp[i] = dp[j]+(i-p)*height(i)$</p></li><li><p>å½“ç„¶ï¼Œå¦‚æœ$height(i)$å°±æ˜¯æœ€å°çš„å…ƒç´ ï¼Œç›´æ¥$dp[i] = (i-1)*height(i)$</p></li></ul><p>ä»£ç ï¼š</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;using namespace std;#define rep(i,a,b)  for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define ll long longconst int MAXN = 114514&lt;&lt;3;int n,m;string s;int rk[MAXN],sa[MAXN],c[MAXN],rk2[MAXN];inline void get_SA(){    rep(i,1,n) ++c[rk[i]=s[i]];    rep(i,2,m) c[i] += c[i-1];    repb(i,n,1) sa[c[rk[i]]--] = i;    for(int w=1;w&lt;=n;w&lt;&lt;=1){        int num = 0;        rep(i,n-w+1,n) rk2[++num] = i;        rep(i,1,n) if(sa[i]&gt;w) rk2[++num] = sa[i]-w;        rep(i,1,m) c[i] = 0;        rep(i,1,n) ++c[rk[i]];        rep(i,2,m) c[i]+=c[i-1];        repb(i,n,1) sa[c[rk[rk2[i]]]--]=rk2[i],rk2[i]=0;        swap(rk,rk2);        rk[sa[1]]=1,num=1;        rep(i,2,n)            rk[sa[i]] = (rk2[sa[i]]==rk2[sa[i-1]]&amp;&amp;rk2[sa[i]+w]==rk2[sa[i-1]+w])?num:++num;        if(num==n) break;        m = num;    }}int height[MAXN];inline void get_height(){    int k = 0,j;    rep(i,1,n) rk[sa[i]] = i;    rep(i,1,n){        if(rk[i]==1) continue;        if(k) k--;        j = sa[rk[i]-1];        while(j+k&lt;=n&amp;&amp;i+k&lt;=n&amp;&amp;s[i+k]==s[j+k]) ++k;        height[rk[i]] = k;    }}//ä¸Šé¢éƒ½æ˜¯æ¿å­ll res;ll dp[MAXN];//dp[i]ä»¥iä¸ºå³ç«¯ç‚¹çš„å·¦ä¾§æœ€å°å€¼ä¹‹å’Œint stk[MAXN],ed;//å•è°ƒæ ˆinline void solve(){    cin&gt;&gt;s;    n = s.length();    s = ' '+s;    m = 256;    get_SA();    get_height();    //å•è°ƒæ ˆè®¡ç®—æ‰€æœ‰åŒºé—´çš„æœ€å°å€¼ä¹‹å’Œ    ed = 0;    res = (n-1)*n/2*(n+1);    rep(i,2,n){        while(0&lt;ed&amp;&amp;height[stk[ed]]&gt;=height[i]) ed--;        if(0&lt;ed) dp[i] = dp[stk[ed]] + (i-stk[ed])*height[i];        else dp[i] = (i-1)*height[i];        stk[++ed] = i;    }    ll summ = 0;    rep(i,2,n) summ += dp[i];    res -= 2*summ;    cout&lt;&lt;res&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> ç®—æ³•å­¦ä¹ ç¬”è®° </tag>
            
            <tag> åç¼€æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FFTå¤„ç†å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜</title>
      <link href="2021/07/28/fft-match/"/>
      <url>2021/07/28/fft-match/</url>
      
        <content type="html"><![CDATA[<h1 id="FFTå¤„ç†å­—ç¬¦ä¸²åŒ¹é…ç±»é—®é¢˜"><a href="#FFTå¤„ç†å­—ç¬¦ä¸²åŒ¹é…ç±»é—®é¢˜" class="headerlink" title="FFTå¤„ç†å­—ç¬¦ä¸²åŒ¹é…ç±»é—®é¢˜"></a>FFTå¤„ç†å­—ç¬¦ä¸²åŒ¹é…ç±»é—®é¢˜</h1><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>hduå¤šæ ¡3é‡åˆ°äº†ä¸€é¢˜å¸¦é€šé…ç¬¦*çš„å­—ç¬¦ä¸²åŒ¹é…é¢˜ï¼Œèµ›ä¸­æƒ³ç”¨KMPå†™ï¼Œä½†æ˜¯å‘ç°æ˜¯å‡ç®—æ³•ï¼Œèµ›åç”¨Bitsetè¡¥äº†ä¸€å‘ï¼Œä¼˜åŒ–å¸¸æ•°åä¹ŸTï¼Œé¢˜è§£æ˜¯ç”¨FFTå†™çš„å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ã€‚</p><h2 id="é—®é¢˜1-æ™®é€šå­—ç¬¦ä¸²åŒ¹é…-å¯ç”¨KMPåšçš„é‚£ç§"><a href="#é—®é¢˜1-æ™®é€šå­—ç¬¦ä¸²åŒ¹é…-å¯ç”¨KMPåšçš„é‚£ç§" class="headerlink" title="é—®é¢˜1:æ™®é€šå­—ç¬¦ä¸²åŒ¹é…,å¯ç”¨KMPåšçš„é‚£ç§"></a>é—®é¢˜1:æ™®é€šå­—ç¬¦ä¸²åŒ¹é…,å¯ç”¨KMPåšçš„é‚£ç§</h2><p>å‚è€ƒï¼š</p><p><a href="https://blog.csdn.net/CCCCTong/article/details/104565258">(27æ¡æ¶ˆæ¯) FFTå¤„ç†å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜_CCCCTongçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://www.luogu.com.cn/blog/Ebola-Emperor/solution-p4173">é¢˜è§£ P4173 ã€æ®‹ç¼ºçš„å­—ç¬¦ä¸²ã€‘ - Ebola çš„åšå®¢ - æ´›è°·åšå®¢ (luogu.com.cn)</a></p><h3 id="æ•°å­¦åŸç†"><a href="#æ•°å­¦åŸç†" class="headerlink" title="æ•°å­¦åŸç†"></a>æ•°å­¦åŸç†</h3><ul><li><p>å®šä¹‰åŒ¹é…å‡½æ•°$C(x,y)=A_x-B_y$ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ç›¸åŒï¼Œåˆ™æ»¡è¶³$C(x,y)=0$ï¼Œè¦æ¨å¹¿åˆ°å­—ç¬¦ä¸²ä¸Šï¼š</p></li><li><p>å†å®šä¹‰å®Œå…¨åŒ¹é…å‡½æ•°$P = \sum^n_{i=1}C(i,i)=\sum^n_{i=1}(A_i-B_i)$ï¼Œå³æ¯ä¸€ä½ä¸Šçš„åŒ¹é…å‡½æ•°æ±‚å’Œã€‚</p></li></ul><p>æ•…è®¾Aä¸ºæ–‡æœ¬ä¸²ï¼ŒBä¸ºæ¨¡å¼ä¸²ï¼Œå–Aä¸²çš„å­ä¸²A[k,k+m-1]ï¼ˆä¸Bç­‰é•¿ï¼‰ï¼Œä¸æ¨¡å¼ä¸²Bè¿›è¡ŒåŒ¹é…ï¼Œå®šä¹‰å¾—åˆ°çš„$P(x) = \sum^{m-1}_{i=0}C(i,k+i)$=$\sum^{m-1}_{i=0} (A\_i-B\_{k+i})$</p><ul><li><strong>å¦‚æœBçš„å­ä¸²B[k~k+m-1]å’ŒAå®Œå…¨åŒ¹é…ï¼Œåˆ™ä»–ä»¬çš„å…¨åŒ¹é…å‡½æ•°ä¸º0</strong></li></ul><p><strong>ä½†å…¶å®ç¦»ä¸Šé¢çš„è¿˜å·®ä¸€æ­¥</strong>ï¼Œè€ƒè™‘ä¸²A=abå’ŒB=baï¼Œåœ¨ç¬¬ä¸€ä¸ªä½ç½®æœ‰$C(1,1)=1-2=-1$;åœ¨ç¬¬äºŒä¸ªä½ç½®ä¸Š$C(2,2)=2-1=1$;è¿™æ ·ä»¥æ¥ï¼Œè™½ç„¶æ¯ä¸ªä½ä¸Šçš„åŒ¹é…å‡½æ•°Cä¸ä¸º0ï¼Œä½†å…¨åŒ¹é…å‡½æ•°Pä¸º0ï¼Œæ‰€ä»¥ä¸è¡Œã€‚</p><ul><li>è¿™é‡Œå¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ä½¿ç”¨<strong>ç»å¯¹å€¼</strong>æ¥å®šä¹‰åŒ¹é…å‡½æ•°ï¼Œä½†æ˜¯ç»å¯¹å€¼éœ€è¦åˆ†ç±»è®¨è®ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<strong>å¹³æ–¹</strong>ï¼Œå³å®šä¹‰$C(i,i)=(A_i-B_i)^2$ã€‚</li></ul><p>è¿™æ ·ä¸€æ¥ï¼Œ$P(k) = \sum^{m-1}_{i=0} C(i,k+i)=\sum^{m-1}_{i=0} (A_i-B_{k+i})^2$</p><p>å†æ‹†æ‹¬å·ï¼š$\sum^{m-1}_{i=0} (A_i-B_{k+i})^2=\sum_{i=0}^{m-1}(A_i^2+B_{k+i}^2-2A_iB_{k+i})$</p><ul><li><p>åˆ†å¼€æ¥æ±‚å’Œå°±æœ‰$P(x)=\sum_{i=0}^{m-1}A_i^2+\sum_{i=0}^{m-1}B_{k+i}^2-2\sum_{i=0}^{m-1}A_iB_{k+i}$</p></li><li><p>å› ä¸ºæ˜¯åŒ¹é…é—®é¢˜ï¼Œè¦æ±‚å‡ºæ‰€æœ‰kçš„P(k),ç¬¬ä¸€é¡¹ä¸kæ— å…³ï¼Œå³å¯¹$P(k)$ä¸ºå¸¸æ•°</p></li><li><p>ç¬¬äºŒé¡¹é€šè¿‡å‰ç¼€å’Œå¯ä»¥$O(n)$å¾—åˆ°ã€‚</p></li><li><p>ç¬¬ä¸‰é¡¹åˆ™å› ä¸ºè¦æšä¸¾kå’Œiï¼Œéœ€è¦$O(n^2)$,å¯ä»¥æ€ä¹ˆæ ·ä¼˜åŒ–ï¼Ÿ</p></li></ul><p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿ$A_iB_{k+i}$ï¼Œå¯ä»¥å‘ç°$(k+i)-i=k$ã€‚ä½†æ˜¯FFTåœ¨xçš„æ¬¡æ•°ä¸Šæ˜¯+ï¼Œè¿™é‡Œè¦-æ‰èƒ½æ»¡è¶³è§„å¾‹ï¼Œå’‹åŠï¼Ÿ</p><ul><li><strong>reverse(A,A+m)åè½¬Bä¸²</strong>ï¼Œè®°ä¸ºSä¸²ï¼Œåˆ™æœ‰$A_i=S_{m-1-i}$ï¼Œåˆ™ç¬¬ä¸‰é¡¹$\sum_{i=0}^{m-1}A_iB_{k+i}$å˜ä¸ºäº†$\sum_{i=0}^{m-1}S_{m-1-i}B_{k+i}$ã€‚ä¸¤ä¸ªä¸‹æ ‡ä¹‹å’Œåˆšå¥½ä¸º$m-1+k$</li></ul><p>è¿™é‡Œkæ˜¯å·¦ç«¯ç‚¹ï¼Œä¸ºäº†ç¬¦åˆå­—ç¬¦ä¸²åŒ¹é…ç±»é—®é¢˜è®°å³ç«¯ç‚¹çš„ä¹ æƒ¯ï¼Œæˆ‘ä»¬ç”¨$x=k+m-1$å³<strong>kå¼€å¤´å­ä¸²çš„å³ç«¯ç‚¹</strong>æ¥ä»£æ¢kï¼š$k=x-m+1$</p><p>æˆ‘ä»¬å‘ç°$x=k+m-1$æ­£å¥½æ˜¯<strong>å·ç§¯ç»“æœä¸­ä»¥kä¸ºå·¦ç«¯ç‚¹çš„ç»“æœçš„ä½ç½®</strong>ã€‚</p><h3 id="å®ç°ç»†èŠ‚"><a href="#å®ç°ç»†èŠ‚" class="headerlink" title="å®ç°ç»†èŠ‚"></a>å®ç°ç»†èŠ‚</h3><p>æ³¨æ„å³ç«¯ç‚¹xä»£æ¢å·¦ç«¯ç‚¹kæœ‰$k=x-m+1$</p><ul><li><p>è®¾ç¬¬ä¸€é¡¹ä¸º$T=\sum_{i=0}^{m-1}A_i^2$</p></li><li><p>ç¬¬äºŒé¡¹ä¸º$\sum_{i=0}^{m-1}B_{(x-m+1)+i}^2$ï¼Œæˆ‘ä»¬é¢„å¤„ç†f[x]æ•°ç»„$f(x)=\sum_{j=0}^{j=x}B_j^2$ï¼ˆfä¸ºå‰ç¼€å’Œï¼‰ï¼Œå³ç¬¬äºŒé¡¹ä¸ºf[x]-f[x-m]</p></li><li><p>å¯¹äºç¬¬ä¸‰é¡¹ï¼ŒAå’ŒBåœ¨è¿›è¡ŒFFTä¹‹åå¾—åˆ°Gæ•°ç»„ï¼Œæœ‰ç¬¬ä¸‰é¡¹$\sum_{i=0}^{m-1}A_iB_{k+i}=G_{m-1+k}=G_{x}$åˆšåˆšå¥½å°±æ˜¯x!</p></li></ul><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;algorithm&gt;#include&lt;cmath&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define INF 0x3f3f3f3f//FFTæ¿å­const int MAXN = 214514;const double Pi=acos(-1.0);struct complex{    double x,y;    complex (double xx=0,double yy=0){x=xx,y=yy;}}a[MAXN],b[MAXN];complex operator + (complex a,complex b){ return complex(a.x+b.x , a.y+b.y);}complex operator - (complex a,complex b){ return complex(a.x-b.x , a.y-b.y);}complex operator * (complex a,complex b){ return complex(a.x*b.x-a.y*b.y , a.x*b.y+a.y*b.x);}//ä¸æ‡‚çš„çœ‹å¤æ•°çš„è¿ç®—é‚£éƒ¨åˆ† int l,r[MAXN];int limit=1;void FFT(complex *A,int type){    for(int i=0;i&lt;limit;i++)         if(i&lt;r[i]) swap(A[i],A[r[i]]);//æ±‚å‡ºè¦è¿­ä»£çš„åºåˆ—     for(int mid=1;mid&lt;limit;mid&lt;&lt;=1){//å¾…åˆå¹¶åŒºé—´çš„ä¸­ç‚¹        complex Wn( cos(Pi/mid) , type*sin(Pi/mid) ); //å•ä½æ ¹         for(int R=mid&lt;&lt;1,j=0;j&lt;limit;j+=R){//Ræ˜¯åŒºé—´çš„å³ç«¯ç‚¹ï¼Œjè¡¨ç¤ºå‰å·²ç»åˆ°å“ªä¸ªä½ç½®äº†             complex w(1,0);//å¹‚             for(int k=0;k&lt;mid;k++,w=w*Wn){//æšä¸¾å·¦åŠéƒ¨åˆ†                  complex x=A[j+k],y=w*A[j+mid+k];//è´è¶æ•ˆåº”                 A[j+k]=x+y;                A[j+mid+k]=x-y;            }        }    }}//FFTæ¿å­string s1,s2;int n,m;complex A[MAXN],B[MAXN];double f[MAXN];double g[MAXN];const double eps = 0.0001;void solve(){    limit = 1,l=0;    cin&gt;&gt;n&gt;&gt;m;    cin&gt;&gt;s1&gt;&gt;s2;    rep(i,0,n-1) B[i].x = s1[i]-'a'+1;    rep(i,0,m-1) A[i].x = s2[i]-'a'+1;    double T = 0;    //T = sigma A[i]^A[i] i=0~m-1    rep(i,0,m-1) T += A[i].x*A[i].x;    //f[x] = sigma B[i]^B[i] i=0~x    f[0] = B[0].x*B[0].x;    rep(i,1,n-1) f[i] = f[i-1]+B[i].x*B[i].x;    //g[x] = S[i]*B[j] i+j==x    reverse(A,A+m);//S = A.reverse    //FFTé¢„å¤„ç†    while(limit&lt;=n+m-2) limit&lt;&lt;=1,l++;    rep(i,0,limit-1)        r[i]= ( r[i&gt;&gt;1]&gt;&gt;1 )| ( (i&amp;1)&lt;&lt;(l-1) );        FFT(A,1);FFT(B,1);    rep(i,0,limit) A[i]=A[i]*B[i];    FFT(A,-1);    rep(i,0,n-1) g[i] = (int)(A[i].x/limit+0.5);//å››èˆäº”å…¥        //T + f(x) - f(x-m) - 2g(x);    double tmp;    rep(x,m-1,n-1){        tmp = T+f[x]-2*g[x];        if(x!=m-1) tmp -= f[x-m];        //cout&lt;&lt;tmp&lt;&lt;' ';        if(fabs(tmp)&lt;eps) cout&lt;&lt;x-(m-1)+1&lt;&lt;endl;//è¾“å‡ºåŒ¹é…ä¸Šçš„ä½ç½®    }    cout&lt;&lt;endl;}int main(){    freopen("in.txt","r",stdin);    int z;    cin&gt;&gt;z;    while(z--) solve();}//æ´›è°·P4173 æ®‹ç¼ºçš„å­—ç¬¦ä¸²ï¼ˆå¸¦é€šé…ç¬¦çš„å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼‰//è¿™é¢˜çš„ç®€åŒ–é—®é¢˜ï¼šæ²¡æœ‰é€šé…ç¬¦çš„æƒ…å†µå¦‚ä½•ç”¨FFTè¿›è¡ŒO(nlogn)çš„å­—ç¬¦ä¸²åŒ¹é…//https://www.luogu.com.cn/problem/P4173<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é—®é¢˜2-å¸¦é€šé…ç¬¦å­—ç¬¦ä¸²åŒ¹é…"><a href="#é—®é¢˜2-å¸¦é€šé…ç¬¦å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="é—®é¢˜2:å¸¦é€šé…ç¬¦å­—ç¬¦ä¸²åŒ¹é…"></a>é—®é¢˜2:å¸¦é€šé…ç¬¦å­—ç¬¦ä¸²åŒ¹é…</h2><p>é¢˜ç›®:åœ¨æ™®é€šå­—ç¬¦ä¸²åŒ¹é…çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šäº†å¯ä»¥åŒ¹é…ä»»ä½•å­—ç¬¦çš„é€šé…ç¬¦â€™*â€˜</p><p><a href="https://www.luogu.com.cn/problem/P4173">P4173 æ®‹ç¼ºçš„å­—ç¬¦ä¸² - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p>å‚è€ƒ:</p><p><a href="https://www.luogu.com.cn/blog/Ebola-Emperor/solution-p4173">é¢˜è§£ P4173 ã€æ®‹ç¼ºçš„å­—ç¬¦ä¸²ã€‘ - Ebola çš„åšå®¢ - æ´›è°·åšå®¢ (luogu.com.cn)</a></p><h3 id="æ•°å­¦åŸç†-1"><a href="#æ•°å­¦åŸç†-1" class="headerlink" title="æ•°å­¦åŸç†"></a>æ•°å­¦åŸç†</h3><p>åœ¨æ™®é€šçš„å­—ç¬¦ä¸²åŒ¹é…ä¸­ï¼Œæˆ‘ä»¬è®¾å­—æ¯aåˆ°zä¸º1-26ã€‚</p><ul><li>æˆ‘ä»¬è®¾å®šé€šé…ç¬¦ä¸º0ï¼ˆåŸå› ä¹‹åä¼šè®²</li></ul><p>è¿™æ ·ä¸€æ¥ï¼Œå…ˆå‰çš„åŒ¹é…å‡½æ•°$C(i,i)=(A_i-B_i)^2$åœ¨å‡ºç°é€šé…ç¬¦æ—¶ï¼Œä¸èƒ½æ»¡è¶³$C(i,i)=0$</p><ul><li><p>æ•…æ„é€ $C(i,i)=(A_i-B_i)^2A_iB_i$ï¼Œ<strong>è¿™æ ·åªè¦Aiæˆ–è€…Biä¸­æœ‰ä¸€ä¸ªé€šé…ç¬¦(å€¼ä¸º0)ï¼ŒåŒ¹é…å‡½æ•°çš„å€¼éƒ½ä¸º0ï¼éå¸¸å¥‡å¦™ï¼</strong></p></li><li><p>å¯¹åº”è¿™ä¸ªæ–°çš„åŒ¹é…å‡½æ•°$C$,æœ‰$P(k) = \sum^{m-1}_{i=0} C(i,k+i)=\sum^{m-1}_{i=0} (A_i-B_{k+i})^2A_iB_{k+i}$</p></li></ul><p>è€ƒè™‘æ‹†å¹³æ–¹åŒ–ç®€ä¸º:$\sum^{m-1}_{i=0} (A_i^3B_{k+i}+A_iB_{k+i}^3-2A_i^2B_{k+i}^2)$</p><p>å…¶å®å’Œæ²¡æœ‰é€šé…ç¬¦çš„æƒ…å†µéå¸¸ç±»ä¼¼ï¼Œä¾æ—§å¯ä»¥<strong>æ‹†åˆ†ä¸ºä¸‰ä¸ªé¡¹</strong>ï¼š</p><p>$\sum^{m-1}_{i=0} (A_i^3B_{k+i})+\sum^{m-1}_{i=0}(A_iB_{k+i}^3)-2\sum^{m-1}_{i=0}(A_i^2B_{k+i}^2)$</p><p>åŒæ ·æŠŠAç»™reverse$\sum^{m-1}_{i=0} (S_{m-1-i}^3B_{k+i})+\sum^{m-1}_{i=0}(S_{m-1-i}B_{k+i}^3)-2\sum^{m-1}_{i=0}(S_{m-1-i}^2B_{k+i}^2)$</p><p>åœ¨ä¸Šä¸€é¢˜ä¸­ï¼Œå‰ä¸¤é¡¹è¿˜å¯ä»¥ç”¨æ¯”è¾ƒç®€å•çš„æ–¹æ³•å»å¤„ç†ï¼Œç¬¬ä¸‰é¡¹æ‰éœ€è¦FFTï¼Œè¿™é‡Œä¸‰é¡¹éƒ½éœ€è¦FFTæ¥å¤„ç†äº†<span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>å¯ä»¥è¿›è¡Œ6æ¬¡FFTï¼ŒæŠŠä¸‰é¡¹éƒ½åŠ åˆ°Pä¸Šï¼Œæœ€åå¯¹Pè¿›è¡Œä¸€æ¬¡é€†å˜æ¢ã€‚</p><h3 id="è¸©çš„å‘"><a href="#è¸©çš„å‘" class="headerlink" title="è¸©çš„å‘"></a>è¸©çš„å‘</h3><ul><li>åœ¨è¿›è¡Œå®Œä¸€æ¬¡Aå’ŒBçš„å·ç§¯ä¹‹åï¼Œè®°å¾—è¦æŠŠAå’ŒB<strong>å…¨éƒ¨æ¸…ç©º</strong>ï¼ŒåŒ…æ‹¬nå’Œmä¹‹åçš„æ•°æ®ï¼Œå› ä¸ºåœ¨å¤šé¡¹å¼è½¬åŒ–ä¸ºç‚¹å€¼çš„æ—¶å€™ï¼Œnå’Œmå¾€åçš„ä½ç½®ä¹Ÿä¼šè¢«å¡«ä¸Šã€‚</li></ul><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;#include&lt;cmath&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define INF 0x3f3f3f3f//FFTæ¿å­const int MAXN = 114514&lt;&lt;4;const double Pi=acos(-1.0);struct complex{    double x,y;    complex (double xx=0,double yy=0){x=xx,y=yy;}};complex operator + (complex a,complex b){ return complex(a.x+b.x , a.y+b.y);}complex operator - (complex a,complex b){ return complex(a.x-b.x , a.y-b.y);}complex operator * (complex a,complex b){ return complex(a.x*b.x-a.y*b.y , a.x*b.y+a.y*b.x);}//ä¸æ‡‚çš„çœ‹å¤æ•°çš„è¿ç®—é‚£éƒ¨åˆ† int l,r[MAXN];int limit=1;void FFT(complex *A,int type){    for(int i=0;i&lt;limit;i++)         if(i&lt;r[i]) swap(A[i],A[r[i]]);//æ±‚å‡ºè¦è¿­ä»£çš„åºåˆ—     for(int mid=1;mid&lt;limit;mid&lt;&lt;=1){//å¾…åˆå¹¶åŒºé—´çš„ä¸­ç‚¹        complex Wn( cos(Pi/mid) , type*sin(Pi/mid) ); //å•ä½æ ¹         for(int R=mid&lt;&lt;1,j=0;j&lt;limit;j+=R){//Ræ˜¯åŒºé—´çš„å³ç«¯ç‚¹ï¼Œjè¡¨ç¤ºå‰å·²ç»åˆ°å“ªä¸ªä½ç½®äº†             complex w(1,0);//å¹‚             for(int k=0;k&lt;mid;k++,w=w*Wn){//æšä¸¾å·¦åŠéƒ¨åˆ†                  complex x=A[j+k],y=w*A[j+mid+k];//è´è¶æ•ˆåº”                 A[j+k]=x+y;                A[j+mid+k]=x-y;            }        }    }}//FFTæ¿å­string s1,s2;int n,m;int Aa[MAXN],Bb[MAXN];complex A[MAXN],B[MAXN],P[MAXN];double f[MAXN];double g[MAXN];vector&lt;int&gt; vec;const double eps = 0.0001;inline int idx(char c){    if(c=='*') return 0;    else return c-'a'+1;}void solve(){    limit = 1,l=0;    cin&gt;&gt;m&gt;&gt;n;//æ³¨æ„è¯»å…¥é¡ºåºï¼Œè¿™é‡Œæ˜¯å…ˆè¯»å…¥æ¨¡å¼ä¸²B    cin&gt;&gt;s2&gt;&gt;s1;    rep(i,0,n-1) Bb[i] = idx(s1[i]);    rep(i,0,m-1) Aa[i] = idx(s2[i]);    reverse(Aa,Aa+m);    //S = A.reverse,è¿™é‡Œå› ä¸ºä¸‰é¡¹éƒ½è¦reverse,æˆ‘ç›´æ¥æŠŠåŸæ•°ç»„ç»™ç¿»äº†    //FFTé¢„å¤„ç†    while(limit&lt;=n+m-2) limit&lt;&lt;=1,l++;    rep(i,0,limit-1)        r[i]= ( r[i&gt;&gt;1]&gt;&gt;1 )| ( (i&amp;1)&lt;&lt;(l-1) );    //ç¬¬ä¸€é¡¹g1[x] = sigma S[i]^3*B[j] i+j=x    rep(i,0,limit-1) A[i]=B[i]=complex();//nå’Œmä¹‹åçš„æ•°æ®ä¹Ÿè¦æ¸…ç©º,ä¹‹å‰waè¿™é‡Œ    rep(i,0,m-1) A[i] = complex(Aa[i]*Aa[i]*Aa[i],0);    rep(i,0,n-1) B[i] = complex(Bb[i],0);    FFT(A,1);FFT(B,1);    rep(i,0,limit) P[i]=A[i]*B[i];    //ç¬¬äºŒé¡¹g2[x] = sigma S[i]*B[j]^3 i+j=x    rep(i,0,limit-1) A[i]=B[i]=complex();    rep(i,0,m-1) A[i] = complex(Aa[i],0);    rep(i,0,n-1) B[i] = complex(Bb[i]*Bb[i]*Bb[i],0);    FFT(A,1);FFT(B,1);    rep(i,0,limit) P[i]=P[i]+A[i]*B[i];    //ç¬¬ä¸‰é¡¹g3[x] = sigma S[i]^2*B[j]^2 i+j=x    rep(i,0,limit-1) A[i]=B[i]=complex();    rep(i,0,m-1) A[i] = complex(Aa[i]*Aa[i],0);    rep(i,0,n-1) B[i] = complex(Bb[i]*Bb[i],0);    FFT(A,1);FFT(B,1);    rep(i,0,limit) P[i]=P[i]-complex(2,0)*A[i]*B[i];        FFT(P,-1);    vec.clear();    double tmp;    rep(x,m-1,n-1){        tmp = (int)(P[x].x/limit+0.5);        if(fabs(tmp)&lt;eps) vec.push_back(x-(m-1)+1);//å­˜å·¦ç«¯ç‚¹ä½ç½®    }    cout&lt;&lt;vec.size()&lt;&lt;endl;    for(auto x:vec) cout&lt;&lt;x&lt;&lt;' ';    cout&lt;&lt;endl;}int main(){    //freopen("in.txt","r",stdin);    solve();}//æ´›è°·P4173 æ®‹ç¼ºçš„å­—ç¬¦ä¸²ï¼ˆå¸¦é€šé…ç¬¦çš„å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼‰//https://www.luogu.com.cn/problem/P4173//æ´›è°·å¼€O2æ‰èƒ½è¿‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ­ç”µå¤šæ ¡2021ï¼ˆ3ï¼‰-1003-Forgiving-Matching"><a href="#æ­ç”µå¤šæ ¡2021ï¼ˆ3ï¼‰-1003-Forgiving-Matching" class="headerlink" title="æ­ç”µå¤šæ ¡2021ï¼ˆ3ï¼‰ 1003.Forgiving Matching"></a>æ­ç”µå¤šæ ¡2021ï¼ˆ3ï¼‰ 1003.Forgiving Matching</h2><p><a href="https://acm.dingbacode.com/showproblem.php?pid=6975">Problem - 6975 (dingbacode.com)</a></p><h3 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h3><p>æ—¶é—´ç»™8sï¼Œnå’Œmçš„æ€»å’Œ1e6ï¼Œæ¯ç»„nå’Œmä¸º1e5ã€‚ç»™é•¿ä¸ºnçš„å­—ç¬¦ä¸²Bå’Œé•¿ä¸ºmçš„å­—ç¬¦ä¸²Aã€‚ä¸²ä¸­åŒ…å«é€šé…ç¬¦*ï¼Œå¯ä»¥åŒ¹é…ä»»ä½•ç¬¦å·ã€‚</p><p>å®šä¹‰ä¸€ä¸ªåŸè°…æ•°kï¼Œå³å…è®¸æœ‰kä½å¤±é…ï¼Œé—®å¯¹[0,m]çš„ä¸åŒkï¼ŒAæœ‰å¤šå°‘ä¸ªè¿ç»­å­ä¸²ä¸BåŒ¹é…ã€‚</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™é¢˜å…¶å®æ¯”ä¸Šé¢çš„é¢˜éƒ½ç®€å•ã€‚å®ƒå¯¹æ—¶é—´å¤æ‚åº¦çš„è¦æ±‚å¾ˆä½ã€‚æ•…å¯ä»¥åˆ†æˆ0-9å…±10æ¬¡FFTã€‚</p><ul><li>åˆ†æé¢˜ç›®ï¼Œå¯ä»¥è½¬åŒ–ä¸ºï¼šæ±‚ä½ç½®xçš„å­ä¸²$B[x-m-2,x]$ä¸Açš„ä¸åŒ¹é…çš„æ•°é‡$tmp$ï¼ŒåŠ åˆ°å·®åˆ†æ•°ç»„$cf[m-tmp]$ä¸Šå»å³å¯ã€‚</li></ul><p>æˆ‘ä»¬ç»´æŠ¤10ä¸ªæ•°ç»„$A[i][j]$ï¼Œä»£è¡¨Aä¸²çš„jä½ç½®æ˜¯å¦ä¸ºæ•°å­—iï¼ˆ*å­˜åœ¨A[10]ä¸­ï¼‰ã€‚</p><ul><li>æˆ‘ä»¬å®šä¹‰åŒ¹é…å‡½æ•°$C(i,j)=A_i\cdot B_i$ï¼Œæ•…å…¨åŒ¹é…å‡½æ•°ä¸º$P(x)=\sum C(i,x+i)$,åŒæ ·é€šè¿‡åè½¬åå·ç§¯æ¥ç»´æŠ¤ï¼Œå·ç§¯åçš„æ•°ç»„$G[i][j]$ä»£è¡¨$A$å’Œ$B[j-m-2,j]$æœ‰å¤šå°‘ä¸ªç›¸åŒçš„ä½ç½®(éƒ½æ˜¯æ•°å­—i)ã€‚</li><li>é€šé…ç¬¦å¦å¤–è®¨è®ºï¼Œæœ‰<strong>åŒ¹é…å­—ç¬¦æ•° = 0-9åŒ¹é…å­—ç¬¦æ•° + Aé€šé…ç¬¦æ•° + Bå­ä¸²é€šé…ç¬¦æ•° - ABä½ç½®é‡åˆé€šé…ç¬¦æ•°é‡</strong></li></ul><p>Aé€šé…ç¬¦æ•°æ‰«ä¸€éå¯ä»¥å¾—åˆ°ï¼ŒBå­ä¸²é€šé…ç¬¦æ•°é€šè¿‡å‰ç¼€å’Œå¾—ï¼ŒABä½ç½®é‡åˆçš„é€šé…ç¬¦æ•°é‡ï¼Œåˆ™å’Œä¹‹å‰çš„å…¶ä»–å­—æ¯ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡FFTç»´æŠ¤åæŸ¥è¯¢ã€‚</p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;algorithm&gt;#include&lt;cmath&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)const int MAXN = 114514&lt;&lt;1;const double Pi=acos(-1.0);//FFTæ¿å­struct complex{    double x,y;    complex (double xx=0,double yy=0){x=xx,y=yy;}};complex operator + (complex a,complex b){ return complex(a.x+b.x , a.y+b.y);}complex operator - (complex a,complex b){ return complex(a.x-b.x , a.y-b.y);}complex operator * (complex a,complex b){ return complex(a.x*b.x-a.y*b.y , a.x*b.y+a.y*b.x);}//ä¸æ‡‚çš„çœ‹å¤æ•°çš„è¿ç®—é‚£éƒ¨åˆ† int l,r[MAXN&lt;&lt;2];int limit=1;void FFT(complex *A,int type){    for(int i=0;i&lt;limit;i++)         if(i&lt;r[i]) swap(A[i],A[r[i]]);//æ±‚å‡ºè¦è¿­ä»£çš„åºåˆ—     for(int mid=1;mid&lt;limit;mid&lt;&lt;=1){//å¾…åˆå¹¶åŒºé—´çš„ä¸­ç‚¹        complex Wn( cos(Pi/mid) , type*sin(Pi/mid) ); //å•ä½æ ¹         for(int R=mid&lt;&lt;1,j=0;j&lt;limit;j+=R){//Ræ˜¯åŒºé—´çš„å³ç«¯ç‚¹ï¼Œjè¡¨ç¤ºå‰å·²ç»åˆ°å“ªä¸ªä½ç½®äº†             complex w(1,0);//å¹‚             for(int k=0;k&lt;mid;k++,w=w*Wn){//æšä¸¾å·¦åŠéƒ¨åˆ†                  complex x=A[j+k],y=w*A[j+mid+k];//è´è¶æ•ˆåº”                 A[j+k]=x+y;                A[j+mid+k]=x-y;            }        }    }}//FFTæ¿å­string s1,s2;int n,m;inline int idx(char c){if(c=='*')return 10;return c-'0';}complex A[12][MAXN&lt;&lt;2],B[12][MAXN&lt;&lt;2];int cnt[MAXN];//è®°å½•æ•°å­—ç›¸åŒä½ç½®æ•°é‡int cnttp[MAXN];//é€šé…ç¬¦ä½ç½®ç›¸åŒint sum1[MAXN],sum2;int cf[MAXN];//å·®åˆ†æ•°ç»„void solve(){    l=0;limit=1;    cin&gt;&gt;n&gt;&gt;m;    cin&gt;&gt;s1&gt;&gt;s2;    rep(i,0,m) cf[i]=0;//å·®åˆ†æ•°ç»„    while(limit&lt;=n+m-2) limit&lt;&lt;=1,l++;    rep(i,0,limit-1)        r[i]= ( r[i&gt;&gt;1]&gt;&gt;1 )| ( (i&amp;1)&lt;&lt;(l-1) );    rep(k,0,10){        rep(i,0,limit-1) A[k][i] = complex();        rep(i,0,limit-1) B[k][i] = complex();    }    rep(i,0,n-1){        B[idx(s1[i])][i]=complex(1);        cnt[i]=cnttp[i]=0;        if(i==0) sum1[i] = (s1[i]=='*');        else sum1[i]=sum1[i-1]+(s1[i]=='*');    }    sum2=0;    rep(i,0,m-1){        A[idx(s2[i])][i]=complex(1);        sum2 += (s2[i]=='*');    }    //cnt[x] = sigma A[i]*B[j] i+j=x    rep(i,0,10){//æ™®é€šå­—ç¬¦åŒ¹é…çš„ä½ç½®        reverse(A[i],A[i]+m);        FFT(A[i],1);FFT(B[i],1);        rep(j,0,limit-1) A[i][j] = A[i][j]*B[i][j];        FFT(A[i],-1);        if(i!=10) rep(j,m-1,n-1) cnt[j] += (int)(A[i][j].x/limit+0.5);        else rep(j,m-1,n-1) cnttp[j] += (int)(A[i][j].x/limit+0.5);    }    //åŒ¹é…å­—ç¬¦æ•° = cnt[j] + Aé€šé… + Bé€šé… - ABé‡åˆé€šé…(FFT)    int tmp;    rep(i,m-1,n-1){        tmp = cnt[i] + sum2 + sum1[i] - cnttp[i];        if(i!=m-1) tmp -= sum1[i-m];//å…¶å®å°±æ˜¯sum1[i]-sum1[i-m]ï¼Œé˜²æ­¢è¶Šç•Œç”¨        cf[m-tmp]++;//æ›´æ–°å·®åˆ†æ•°ç»„    }    int now = 0;    rep(i,0,m){        now += cf[i];        cout&lt;&lt;now&lt;&lt;endl;    }}  int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FFT </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> ç®—æ³•å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºåæ‚”è´ªå¿ƒ</title>
      <link href="2021/07/21/fanhui-greedy/"/>
      <url>2021/07/21/fanhui-greedy/</url>
      
        <content type="html"><![CDATA[<h1 id="åæ‚”è´ªå¿ƒ"><a href="#åæ‚”è´ªå¿ƒ" class="headerlink" title="åæ‚”è´ªå¿ƒ"></a>åæ‚”è´ªå¿ƒ</h1><h2 id="å­¦ä¹ çš„å¸–å­"><a href="#å­¦ä¹ çš„å¸–å­" class="headerlink" title="å­¦ä¹ çš„å¸–å­"></a>å­¦ä¹ çš„å¸–å­</h2><p><a href="https://www.cnblogs.com/amagaisite/p/13537905.html">åæ‚”è´ªå¿ƒ å­¦ä¹ ç¬”è®° - SyadouHayami - åšå®¢å›­ (cnblogs.com)</a></p><p>[é¢˜è§£ P3620 ã€<a href="https://www.luogu.com.cn/blog/zhouzhuo/solution-p3620">APIO/CTSC 2007]æ•°æ®å¤‡ä»½ã€‘ - é‡å¿ƒqwq çš„åšå®¢ - æ´›è°·åšå®¢ (luogu.com.cn)</a></p><h2 id="å†™çš„ç¬¬ä¸€ä¸ªä¾‹é¢˜ï¼š"><a href="#å†™çš„ç¬¬ä¸€ä¸ªä¾‹é¢˜ï¼š" class="headerlink" title="å†™çš„ç¬¬ä¸€ä¸ªä¾‹é¢˜ï¼š"></a>å†™çš„ç¬¬ä¸€ä¸ªä¾‹é¢˜ï¼š</h2><p>[P3620 <a href="https://www.luogu.com.cn/problem/P3620">APIO/CTSC 2007]æ•°æ®å¤‡ä»½ - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è½¬æ¢åçš„é¢˜ç›®æ˜¯ï¼šç»™é•¿åº¦ä¸ºn-1çš„åºåˆ—ï¼Œä¸èƒ½é€‰æ‹©ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œé—®é€‰æ‹©kä¸ªå…ƒç´ çš„æœ€å°å’Œã€‚</p><p>æ™®é€šçš„è´ªå¿ƒæ˜¯ï¼ŒæŠŠæ‰€æœ‰çš„å…ƒç´ ä»å¤§åˆ°å°æ’åˆ—ï¼Œæ¯æ¬¡é€‰æ‹©æœ€å°çš„å…ƒç´ ï¼Œå¹¶ä¸”æŠŠå®ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ æ‰“ä¸Šåˆ é™¤æ ‡è®°è¡¨ç¤ºä¸èƒ½é€‰æ‹©ã€‚ä½†æ˜¯æ˜¾ç„¶è¿™æ ·ä¸å¸¦åæ‚”çš„è´ªå¿ƒæ˜¯ä¸è¡Œçš„ã€‚</p><p>æ¯”å¦‚å¯¹äºn=4,k=2çš„åºåˆ—2 1 2 9ï¼ŒæŒ‰ç…§è¿™ä¸ªè´ªå¿ƒæ¥åšï¼Œä¼šå…ˆé€‰åˆ°1ï¼Œå¹¶ä¸”åˆ é™¤äº†ä¸¤ä¸ª2ï¼Œä¹‹åå°±åªèƒ½é€‰æ‹©9äº†ï¼Œè¿™æ ·æ˜¾ç„¶ä¸æ˜¯æœ€ä¼˜è§£ã€‚</p><p><strong>â€è€ƒè™‘ä¸€ä¸ªåæ‚”çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦æ„é€ ä¸€ä¸ªæ–¹æ³•å»æ¶ˆæ‰ä¹‹å‰çš„è´¡çŒ®è½¬è€ŒåŠ ä¸ºæ­£ç¡®çš„æ›´ä¼˜çš„è´¡çŒ®ã€‚â€</strong></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªèƒ½å¤Ÿæ¶ˆé™¤æ‰ä¹‹å‰é€‰æ‹©çš„å½±å“çš„ç‚¹æ¨å…¥è¿™ä¸ªæ’åºä¸­ï¼Œå’Œå…¶ä»–æ™®é€šçš„è´ªå¿ƒé€‰é¡¹ä¸€èµ·æ¯”è¾ƒï¼Œæ¯æ¬¡é€‰æ‹©å…¶ä¸­æœ€ä¼˜çš„ã€‚(ç”±äºè¦åŠ¨æ€ç»´æŠ¤è¿™ä¸ªé¡ºåºï¼Œæ‰€ä»¥ç”¨å †/ä¼˜å…ˆé˜Ÿåˆ—å®ç°)</p><p>åœ¨è¿™é¢˜é‡Œï¼Œå½“é€‰æ‹©äº†ä½ç½®içš„å…ƒç´ $da_i$,åˆ™$da_{i-1}$å’Œ$da_{i+1}$æ˜¯ä¸èƒ½é€‰æ‹©çš„ï¼Œä½†æ˜¯æœ€ä¼˜è§£ä¾æ—§æœ‰å¯èƒ½åŒ…å«ç€ä¸¤ä¸ªå…ƒç´ ï¼Œæ•…æˆ‘ä»¬æ„é€ ä¸€ä¸ªæ–°çš„ç‚¹åŠ å…¥æ’åºï¼Œè¿™ä¸ªç‚¹çš„ç‚¹æƒå°±æ˜¯ï¼š$da_{i-1}+da_{i+1}-da_i$,ä»”ç»†æƒ³æƒ³ï¼Œå°±æ˜¯æ¶ˆå»äº†ä¹‹å‰é€‰æ‹©$da_i$çš„è´¡çŒ®ï¼Œå¹¶ä¸”åŠ ä¸Šäº†è¿™ä¸ªæ–°çš„é€‰æ‹©çš„è´¡çŒ®ã€‚</p><ul><li>å…³äºä¸ºä»€ä¹ˆæ˜¯$da_{i-1}$å’Œ$da_{i+1}$ä¸€èµ·ï¼Œè€Œä¸å¯èƒ½æ˜¯å•ç‹¬é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªï¼Ÿ</li></ul><p>å› ä¸ºæ˜¾ç„¶å¯¹äºè¿™ç§æƒ…å†µï¼Œåœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­$da_i$æ¯”$da_{i-1}$å’Œ$da_{i+1}$æ›´æ—©å‡ºç°ï¼Œæ•…$da_{i-1}$å’Œ$da_{i+1}$éƒ½è¦æ¯”$da_i$å°ï¼Œæ‰€ä»¥æ˜¾ç„¶ç€ä¸¤ä¸ªè¦é€‰ä¹Ÿæ˜¯ä¸€èµ·é€‰ï¼Œè€Œä¸ä¼šåªé€‰å…¶ä¸­ä¸€ä¸ªå°±æŠŠä¹‹å‰çš„é€‰æ‹©$da_i$åæ‚”æ‰ã€‚</p><p>åœ¨é€‰æ‹©äº†è¿™ä¸ªä»£è¡¨$da_{i-1}$å’Œ$da_{i+1}$çš„ç‚¹åï¼ŒåŒç†ä¹Ÿè¦æ¨å…¥ä»£è¡¨$da_{i-1}$å’Œ$da_{i+1}$çš„ç‚¹ã€‚</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>é€šè¿‡åŒå‘é“¾è¡¨å®ç°äº†å¯¹ç‚¹çš„åˆ å»ï¼Œåœ¨é€‰æ‹©äº†$da_i$ä¹‹åï¼Œæˆ‘ä»¬æŠŠ$da_{i-1}+da_{i+1}-da_i$çš„å€¼å­˜åœ¨äº†åŸå…ˆ$da_i$çš„ä½ç½®ï¼Œå¹¶ä¸”åˆ å»äº†$da_{i-1}$å’Œ$da_{i+1}$ä¸¤ä¸ªç‚¹ï¼Œå¹¶ä¸”æŠŠåæ‚”æ–°ç‚¹æ¨å…¥ä¼˜å…ˆé˜Ÿåˆ—ã€‚</p><pre class="line-numbers language-none"><code class="language-none">2 1 2 9<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸¤ä¸ª2è¢«åˆ å»ï¼Œå¹¶ä¸”æŠŠåæ‚”ç‚¹çš„è´¡çŒ®å­˜åœ¨äº†åŸå…ˆé€‰æ‹©çš„1çš„ä½ç½®ï¼š</p><pre class="line-numbers language-none"><code class="language-none">(2) 3 (2) 9<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ—¶å€™$da_i$å·¦å³åˆ†åˆ«å’Œ$da_{i-2}$å’Œ$da_{i+2}$ç›¸è¿ï¼Œå¦‚æœæˆ‘ä»¬ä¹‹åå‘ç°$da_{i-2}$å’Œ$da_{i+2}$è¦æ¯”$da_{i-1}$å’Œ$da_{i+1}$æ›´ä¼˜ï¼ŒåŒæ ·æ˜¯åˆ å»$da_i$å·¦å³ä¸¤ä¾§çš„ä¸¤ä¸ªç‚¹ï¼Œå¹¶ä¸”æŠŠè¿™ä¸¤ä¸ªç‚¹å‡å»$da_i$çš„å€¼å­˜å…¥$da_i$ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;queue&gt;using namespace std;const int MAXN = 114514;#define INF 0x3f3f3f3f#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)int da[MAXN],l[MAXN],r[MAXN];//åŒå‘è¿è¡¨bool del[MAXN];inline void del_lr(int pos){//åˆ é™¤å…¶å·¦å³çš„å…ƒç´     del[l[pos]] = del[r[pos]] = 1;//æ‰“ä¸Šåˆ é™¤    da[pos] = da[l[pos]]+da[r[pos]]-da[pos];    //åŒå‘é“¾è¡¨åˆ ç‚¹    l[pos]=l[l[pos]],r[pos]=r[r[pos]];    l[r[pos]]=pos,r[l[pos]]=pos;//ä¸€å¼€å§‹å¿˜äº†è¿™å¥å³å¦ä¸€è¾¹ä¹Ÿè¦æ¥åˆ°posä¸Šæ¥}//å…³äºä¸ºä»€ä¹ˆæ˜¯åŒå‘é“¾è¡¨ï¼š//å¦‚æœæ˜¯4 2 1 2 4ï¼Œé€‰æ‹©äº†1ä¹‹å,2 2æ— æ³•é€‰æ‹©ä»é“¾è¡¨ä¸­åˆ é™¤å˜æˆ4 3 4,3ä»£è¡¨1å·¦å³ä¸¤è¾¹çš„2//è¿™æ—¶å€™é€‰æ‹©3å°±ä»£è¡¨é€‰æ‹©äº†ä¸¤ä¸ª2è€Œæ”¾å¼ƒäº†1ï¼Œè€Œé€‰äº†è¿™ä¸¤ä¸ª2å°±ä¸èƒ½é€‰4,3å’Œä¸¤ä¸ª4åœ¨é“¾è¡¨ä¸Šä¹Ÿæ˜¯ç›¸é‚»çš„int a[MAXN];int n,k;struct Node{    int val,pos;//æ•°å€¼å’Œç¼–å·    bool operator &lt; (Node rhs)const{//ä¼˜å…ˆé˜Ÿåˆ—è¦åŠ const        return val&gt;rhs.val;    }};priority_queue&lt;Node&gt; q;void solve(){    cin&gt;&gt;n&gt;&gt;k;    rep(i,1,n) cin&gt;&gt;a[i];    rep(i,1,n-1){        da[i] = a[i+1]-a[i];//ç›¸é‚»åšå·®å­˜å…¥åŒå‘é“¾è¡¨        l[i] = i-1,r[i] = i+1;        q.push(Node{da[i],i});    }    da[0]=da[n]=INF;//ä¿è¯äº†é“¾è¡¨ä¸¤ç«¯ä¸ä¼šè¢«ä¿®æ”¹(æ•°å€¼å¾ˆå¤§ä¸€å®šåœ¨å †çš„å°¾éƒ¨)    Node now;    int res = 0;//è®°å½•ç»“æœ    rep(i,1,k){//é€‰æ‹©kæ¡çº¿ç¼†        while(del[q.top().pos]) q.pop();//å·²ç»è¢«åˆ æ‰çš„ç‚¹è¿˜åœ¨ä¼˜å…ˆé˜Ÿåˆ—é‡Œ        now = q.top();        q.pop();        res += now.val;//res += da[now.pos]ä¹Ÿè¡Œ        del_lr(now.pos);//åˆ æ‰å·¦å³ä¸¤è¾¹        q.push(Node{da[now.pos],now.pos});//è¿™æ—¶å€™çš„da[pos]å·²ç»æ˜¯ä¿®æ”¹è¿‡çš„äº†    }    cout&lt;&lt;res&lt;&lt;endl;}int main(){    //freopen("P3620_2.in","r",stdin);    solve();}//åæ‚”è´ªå¿ƒä¾‹é¢˜//P3620 [APIO/CTSC 2007]æ•°æ®å¤‡ä»½//https://www.luogu.com.cn/problem/P3620<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å†™çš„ç¬¬äºŒä¸ªä¾‹é¢˜ï¼š"><a href="#å†™çš„ç¬¬äºŒä¸ªä¾‹é¢˜ï¼š" class="headerlink" title="å†™çš„ç¬¬äºŒä¸ªä¾‹é¢˜ï¼š"></a>å†™çš„ç¬¬äºŒä¸ªä¾‹é¢˜ï¼š</h2><p>[P4053 <a href="https://www.luogu.com.cn/problem/P4053">JSOI2007]å»ºç­‘æŠ¢ä¿® - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><p>è¿™é¢˜åªæ˜¯è“é¢˜ï¼Œæ¯”ç¬¬ä¸€é¢˜è¦ç®€å•ç‚¹</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>é¢˜ç›®æ„æ€æ˜¯ï¼Œæ¯ä¸ªå¾…ä¿®ç†çš„å»ºç­‘æœ‰ä¸¤ä¸ªå‚æ•°ï¼šä¿®ç†éœ€è¦çš„æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œå¿…é¡»åœ¨ç»“æŸæ—¶é—´ä¹‹å‰ä¿®å®Œï¼Œé—®æœ€å¤šæœ‰å¯ä»¥ä¿®å¤šå°‘ä¸ªå»ºç­‘ã€‚</p><p>å…ˆè€ƒè™‘ä¸€èˆ¬çš„è´ªå¿ƒï¼šæŠŠå»ºç­‘æ ¹æ®ç»“æŸæ—¶é—´è¿›è¡Œæ’åºï¼Œä»å°åˆ°å¤§è€ƒè™‘è‹¥èƒ½ä¿®$(now+a[i].cost\leq a[i].endt)$å°±ç›´æ¥ä¿®ï¼Œä½†æ˜¯è¿™æ ·æ˜¾ç„¶ä¼šæœ‰ä¸è¡Œçš„æƒ…å†µï¼Œæ¯”å¦‚</p><pre class="line-numbers language-none"><code class="language-none">3100 10050 20050 200//ç›®æµ‹æœ€ä¼˜è§£ä¸º2ï¼Œä½†ä¸Šè¿°è´ªå¿ƒä¸º1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è€ƒè™‘æ€ä¹ˆåæ‚”è´ªå¿ƒï¼š</p><ul><li>å¯ä»¥ç›´æ¥åŠ å…¥çš„æƒ…å†µ$now+a[i].cost\leq a[i].endt$</li><li>ä¸å¯ä»¥åŠ å…¥ï¼Œéœ€è¦è€ƒè™‘åæ‚”çš„æƒ…å†µ$now+a[i].cost&gt;a[i].endt$</li></ul><p>è€ƒè™‘æ¯æ¬¡æŠŠç‚¹$a[i]$åŠ å…¥ä¿®ç†çš„é›†åˆä¸­æ—¶ï¼ŒæŠŠ$a[i].cost$æ¨å…¥å †ä¸­ç»´æŠ¤æœ€å¤§å †ï¼Œä¹‹åä¸€æ—¦å‡ºç°ä¸å¯åŠ å…¥çš„æƒ…å†µï¼Œè€ƒè™‘ï¼š</p><ul><li><p>(1)å»é™¤å †é¡¶çš„ç‚¹åè¿™ä¸ªç‚¹èƒ½ä¸èƒ½åŠ å…¥,$now-q.top+a[i].cost\leq a[i].endt$</p></li><li><p>(2)ç”¨è¿™ä¸ªç‚¹æ›¿æ¢å †é¡¶çš„ç‚¹æ˜¯ä¸æ˜¯æ›´ä¼˜(ç”¨çš„æ—¶é—´æ›´å°‘),$a[i].cost&lt;q.top$</p></li></ul><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;algorithm&gt;#include&lt;queue&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define ll long long#define int ll//é¢˜ç›®å±…ç„¶ä¸æ ‡èŒƒå›´!typedef pair&lt;int,int&gt; pii;#define ft first#define sd second#define mkp make_pairconst int MAXN = 114514&lt;&lt;1;int n;pii a[MAXN];priority_queue&lt;int&gt; q; //ç»´æŠ¤å½“å‰é€‰æ‹©çš„ç‚¹ä¸­æ—¶é—´æœ€é•¿çš„bool cmp(pii a,pii b){    return a.sd&lt;b.sd;}void solve(){    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;a[i].ft&gt;&gt;a[i].sd;//æŒ‰ç…§ç»“æŸæ—¶é—´æ’åº    //æŒ‰ç…§æ—¶é—´æ’åº    sort(a+1,a+1+n,cmp);    //rep(i,1,n) cout&lt;&lt;'('&lt;&lt;a[i].ft&lt;&lt;','&lt;&lt;a[i].sd&lt;&lt;')'&lt;&lt;endl;    int nowt = 0;//å½“å‰æ—¶é—´    int tmp,cnt;    rep(i,1,n){        if(nowt+a[i].ft&gt;a[i].sd){//æ—¶é—´ä¸å¤Ÿä¿®äº†            if(!q.empty()){                tmp = q.top();//å–éœ€è¦æ—¶é—´æœ€å¤§çš„                if(tmp&gt;a[i].ft&amp;&amp;nowt+a[i].ft-tmp&lt;=a[i].sd){//å»æ‰å¤´å¯ä»¥è®©æ—¶é—´è¶³å¤Ÿ                    nowt = nowt - tmp + a[i].ft;                    q.pop();                    q.push(a[i].ft);                }            }        }        else{//æ—¶é—´è¶³å¤Ÿ            nowt += a[i].ft;            q.push(a[i].ft);            cnt++;        }    }    cout&lt;&lt;cnt&lt;&lt;endl;}signed main(){    solve();}// åæ‚”è´ªå¿ƒ// P4053 [JSOI2007]å»ºç­‘æŠ¢ä¿®// https://www.luogu.com.cn/problem/P4053<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å†™çš„ç¬¬ä¸‰ä¸ªä¾‹é¢˜ï¼š"><a href="#å†™çš„ç¬¬ä¸‰ä¸ªä¾‹é¢˜ï¼š" class="headerlink" title="å†™çš„ç¬¬ä¸‰ä¸ªä¾‹é¢˜ï¼š"></a>å†™çš„ç¬¬ä¸‰ä¸ªä¾‹é¢˜ï¼š</h2><p><a href="https://www.luogu.com.cn/problem/CF436E">CF436E Cardboard Box - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>é¢˜æ„ï¼šç»™nä¸ªå…³å¡ï¼Œè¦è·å¾—wé¢—æ˜Ÿï¼Œæ¯ä¸ªå…³å¡å¯ä»¥æ”¯ä»˜$a_i$è·å¾—1é¢—æ˜Ÿï¼Œæ”¯ä»˜$b_i$è·å¾—ä¸¤é¢—æ˜Ÿï¼Œé—®å¾—åˆ°wé¢—æ˜Ÿçš„æœ€å°è´¹ç”¨ã€‚è¦æ±‚è¾“å‡ºé€‰æ‹©ã€‚</p><h4 id="ä¸€ä¸ªå‡è´ªå¿ƒ"><a href="#ä¸€ä¸ªå‡è´ªå¿ƒ" class="headerlink" title="ä¸€ä¸ªå‡è´ªå¿ƒ"></a>ä¸€ä¸ªå‡è´ªå¿ƒ</h4><p>æˆ‘å…ˆå†™äº†ä¸€ä¸ªå‡çš„åæ‚”è´ªå¿ƒï¼šå³é€‰æ‹©äº†$a_i$ä¹‹å$a_i-b_i$æ¨å…¥å †ä¸­ï¼Œä»£è¡¨åæ‚”ç¬¬iå…³é€‰æ‹©1ä¸ªçš„æ“ä½œï¼Œæ”¹æˆäº†é€‰2ä¸ªã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">//å‡çš„åæ‚”è´ªå¿ƒconst int MAXN = 114514&lt;&lt;2;int n,w;priority_queue&lt;pii,vector&lt;pii&gt;,greater&lt;pii&gt; &gt; q;int a[MAXN],b[MAXN],sel[MAXN];void solve(){    cin&gt;&gt;n&gt;&gt;w;    int cost = 0;    rep(i,1,n){        cin&gt;&gt;a[i]&gt;&gt;b[i];        q.push(mkp(a[i],i));    }    pii tmp;    rep(i,1,w){        tmp = q.top();        q.pop();        if(sel[tmp.sd]==0){            cost += tmp.ft;            q.push(mkp(b[tmp.sd]-tmp.ft,tmp.sd));            sel[tmp.sd] = 1;        }        else{//sel[tmp.sd]==1            cost += tmp.ft;            sel[tmp.sd] = 2;        }    }    cout&lt;&lt;cost&lt;&lt;endl;    rep(i,1,n) cout&lt;&lt;sel[i];    cout&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿™ä¸ªè´ªå¿ƒçš„é—®é¢˜åœ¨äºï¼šæœ‰äº›å…³æ˜¯ä¸€ä¸ªç‚¹éå¸¸ä¸åˆ’ç®—ï¼Œä¸¤ä¸ªç‚¹éå¸¸åˆ’ç®—çš„æƒ…å†µï¼Œå¯¼è‡´$a_i$æ ¹æœ¬æ²¡æœºä¼šè¢«é€‰ï¼Œè¿™æ ·$b_i-a_i$æ ¹æœ¬æ²¡æœºä¼šåŠ å…¥é˜Ÿåˆ—ã€‚</strong></p><h4 id="æ­£è§£"><a href="#æ­£è§£" class="headerlink" title="æ­£è§£"></a>æ­£è§£</h4><p>é¦–å…ˆï¼Œæ ¹æ®ä¹‹å‰çš„å‡ç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»0æ˜Ÿç›´æ¥å˜æˆ2æ˜Ÿçš„æƒ…å†µï¼Œä½†æ˜¯è¿™ç§æƒ…å†µï¼Œé€‰æ‹©çš„æ˜Ÿæ˜Ÿæ•°é‡ä¼šç›´æ¥+2ï¼Œè€Œæ™®é€šçš„æƒ…å†µæ˜¯+1ï¼Œè¿™æ ·ä¸èƒ½è¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨<strong>0æ˜Ÿå˜æˆ2æ˜Ÿçš„æ—¶å€™ï¼ŒåŒæ—¶ä¹Ÿè¦è®©ä¸€ä¸ªå·²ç»åšçš„é€‰æ‹©-1</strong>ï¼Œå³â€iä»0æ˜Ÿå˜2æ˜Ÿï¼Œjä»1æ˜Ÿåæ‚”æˆ0æ˜Ÿâ€œå’Œâ€iä»0æ˜Ÿå˜2æ˜Ÿï¼Œjä»2æ˜Ÿåæ‚”æˆ1æ˜Ÿâ€œè¿™ä¸¤ç§æƒ…å†µã€‚</p><p><strong>è®¨è®ºè´ªå¿ƒæƒ…å†µå¯¹ç­”æ¡ˆçš„è´¡çŒ®ï¼š</strong></p><ul><li>iä»0æ˜Ÿå˜1æ˜Ÿï¼š$a_i$</li><li>iä»1æ˜Ÿå˜2æ˜Ÿï¼š$b_i-a_i$</li></ul><p>æœ¬æ¥å¯ä»¥åªç”¨ä¸€æ¡é˜Ÿåˆ—ç»´æŠ¤ï¼Œä½†ç”±äºåé¢çš„åæ‚”é€‰é¡¹ï¼Œå› æ­¤ä¹Ÿéœ€è¦ä¸¤æ¡é˜Ÿåˆ—ï¼ŒåŸå› ä¸€ä¼šå„¿ä¼šè®²ã€‚</p><p><strong>è®¨è®ºä¸¤ç§åæ‚”æƒ…å†µå¯¹ç­”æ¡ˆçš„è´¡çŒ®ï¼š</strong></p><ul><li>iä»0æ˜Ÿå˜2æ˜Ÿï¼Œjä»1æ˜Ÿåæ‚”æˆ0æ˜Ÿï¼š$b_j-a_i$</li><li>iä»0æ˜Ÿå˜2æ˜Ÿï¼Œjä»2æ˜Ÿåæ‚”æˆ1æ˜Ÿï¼š$b_j-(b_i-a_i)$</li></ul><p>è¦æ±‚å¾—ä»¥ä¸Šä¸¤ç§æƒ…å†µçš„æœ€ä¼˜è§£ï¼Œéœ€è¦ç»´æŠ¤ï¼šæœ€å°çš„$b_j$ï¼Œæœ€å¤§çš„$a_i$å’Œæœ€å¤§çš„$b_i-a_i$ã€‚éœ€è¦ç”¨åˆ°ä¸‰æ¡é˜Ÿåˆ—ã€‚</p><p><strong>ä¸ºä»€ä¹ˆéœ€è¦äº”æ¡é˜Ÿåˆ—ï¼Ÿï¼š</strong></p><p>æœ‰äº›å…³å¡æ˜Ÿå€¼çš„ä¿®æ”¹ä¼š<strong>ç‰µæ‰¯åˆ°ä¸¤ä¸ªå †</strong>ï¼Œå³ä¸€ä¸ªå…³å¡ä¼šè¢«æ¨å…¥å¤šä¸ªå †ä¸­ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å–å‡ºäº†è¿™ä¸ªå…³å¡çš„å…¶ä¸­ä¸€ä¸ªï¼Œå¹¶å¯¹å®ƒè¿›è¡Œå¤„ç†åï¼Œå¦ä¸€ä¸ªå †ä¸­çš„è¿™ä¸ªå…³å¡çš„ç‚¹ä¼šå˜ä¸ºæ— æ•ˆç‚¹ã€‚æˆ‘ä»¬ç”¨sel[i]è®°å½•ç¬¬iå…³çš„é€‰é¡¹ï¼Œæ¯æ¬¡å–å †é¡¶ä¹‹å‰ï¼Œå…ˆä¸selè¿›è¡Œæ¯”è¾ƒï¼ŒæŠŠå †é¡¶çš„æ— æ•ˆç‚¹éƒ½å»é™¤ï¼ˆæœ‰ç‚¹åƒå•è°ƒé˜Ÿåˆ—ï¼‰ã€‚å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">while(!q1.empty()&amp;&amp;sel[q1.top().sd]!=0) q1.pop();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å®ç°ç»†èŠ‚"><a href="#å®ç°ç»†èŠ‚" class="headerlink" title="å®ç°ç»†èŠ‚"></a>å®ç°ç»†èŠ‚</h4><ul><li>æˆ‘ä»¬åœ¨å®ç°çš„æ—¶å€™ï¼Œä»5ä¸ªå †ä¸­å–å‡ºç›¸åº”çš„å †é¡¶å…ƒç´ ï¼Œæ±‚å‡ºå››ç§æ–¹æ¡ˆçš„è§£çš„è´¡çŒ®å­˜è¿›$op1,op2,op3,op4$ï¼Œå†è¿›è¡Œæ¯”è¾ƒï¼Œé€‰æ‹©è´¡çŒ®æœ€å°çš„ä¸€ä¸ªï¼Œå¹¶æŠŠå¯¹åº”çš„å †é¡¶å‡ºæ ˆï¼Œå†æ¨å…¥æ›´æ”¹åçš„å…ƒç´ ã€‚</li></ul><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">int minp = 1;rep(i,2,4)if(op[i]&lt;op[minp])minp=i;//æ‰¾åˆ°4ä¸ªopä¸­çš„æœ€ä¼˜è§£res += op[minp];<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>æ›´æ–°å…³å¡æ˜Ÿæ•°çš„æ“ä½œä¼šè¢«é‡å¤ç”¨ï¼Œå› æ­¤å¯ä»¥ç”¨å‡½æ•°å°è£…è®©å…¶æ›´ç›´è§‚ï¼Œæ¯”å¦‚ï¼Œè´ªå¿ƒæ“ä½œ1å’Œåæ‚”æ“ä½œ2éƒ½ä¼šäº§ç”Ÿæ–°çš„1æ˜Ÿå…³ï¼Œæ•…å¯ä»¥ç”¨å‡½æ•°add1å°è£…ã€‚</li></ul><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">inline void add0(int pos){    sel[pos] = 0;    q1.push(mkp(a[pos],pos));//0å˜1    q3.push(mkp(b[pos],pos));//0å˜2}inline void add1(int pos){    sel[pos] = 1;    q2.push(mkp(b[pos]-a[pos],pos));//1å˜2    q4.push(mkp(a[pos],pos));//1å˜0}inline void add2(int pos){    sel[pos] = 2;    q5.push(mkp(b[pos]-a[pos],pos));//2å˜1}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;queue&gt;#include&lt;algorithm&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)typedef pair&lt;int,int&gt; pii;#define ft first#define sd second#define mkp make_pair#define int long long#define INF 0x7fffffffconst int MAXN = 114514&lt;&lt;2;int n,w;int a[MAXN],b[MAXN],sel[MAXN];//====è´ªå¿ƒæ“ä½œ====//1.æŠŠ0æ˜Ÿå˜1æ˜Ÿ  2.æŠŠ1æ˜Ÿå˜2æ˜Ÿ//   ai         bi-ai(q2)//q1ç»´æŠ¤aiæœ€å°å€¼ï¼Œq2ç»´æŠ¤bi-aiæœ€å°å€¼//====åæ‚”æ“ä½œ====//3.æŠŠjçš„0æ˜Ÿå˜2æ˜Ÿ,å†æŠŠiçš„1æ˜Ÿå˜0æ˜Ÿ  4.æŠŠjçš„0æ˜Ÿå˜2æ˜Ÿ,å†æŠŠiçš„2æ˜Ÿå˜1æ˜Ÿ//    bj - ai                       bj - (bi-ai)//q3ç»´æŠ¤bjæœ€å°å€¼ï¼Œq4ç»´æŠ¤aiæœ€å¤§å€¼ï¼Œq5ç»´æŠ¤bi-aiæœ€å¤§å€¼//è¿™æ ·ä¸€æ¥ä¾¿å¯ä»¥å¤„ç†"1æ˜Ÿç‰¹åˆ«ä¸åˆ’ç®—,2æ˜Ÿç‰¹åˆ’ç®—"çš„æƒ…å†µpriority_queue&lt;pii,vector&lt;pii&gt;,greater&lt;pii&gt; &gt; q1,q2,q3;priority_queue&lt;pii&gt; q4,q5;inline void add0(int pos){    sel[pos] = 0;    q1.push(mkp(a[pos],pos));//0å˜1    q3.push(mkp(b[pos],pos));//0å˜2}inline void add1(int pos){    sel[pos] = 1;    q2.push(mkp(b[pos]-a[pos],pos));//1å˜2    q4.push(mkp(a[pos],pos));//1å˜0}inline void add2(int pos){    sel[pos] = 2;    q5.push(mkp(b[pos]-a[pos],pos));//2å˜1}inline void solve(){    cin&gt;&gt;n&gt;&gt;w;    int cost = 0;    rep(i,1,n){        cin&gt;&gt;a[i]&gt;&gt;b[i];        q1.push(mkp(a[i],i));        q3.push(mkp(b[i],i));    }    int op[6];    int res=0;    rep(i,1,w){//è¿›è¡Œwæ¬¡é€‰æ‹©        op[1]=op[2]=op[3]=op[4]=INF;//å››ç§æ“ä½œçš„è´¡çŒ®,æ‰¾æœ€å€¼        int pos1,pos2,pos3,pos4,pos5;//äº”ä¸ªå †çš„ä¸‹æ ‡æš‚å­˜        while(!q1.empty()&amp;&amp;sel[q1.top().sd]!=0) q1.pop();        if(!q1.empty()){//0å˜1            pos1 = q1.top().sd;            op[1] = a[pos1];        }        while(!q2.empty()&amp;&amp;sel[q2.top().sd]!=1) q2.pop();        if(!q2.empty()){//1å˜2            pos2 = q2.top().sd;            op[2] = b[pos2]-a[pos2];        }        while(!q3.empty()&amp;&amp;sel[q3.top().sd]!=0) q3.pop();        while(!q4.empty()&amp;&amp;sel[q4.top().sd]!=1) q4.pop();        if(!q3.empty()&amp;&amp;!q4.empty()){//0å˜2,1å˜0            pos3 = q3.top().sd;pos4 = q4.top().sd;            op[3] = b[pos3]-a[pos4];        }        while(!q5.empty()&amp;&amp;sel[q5.top().sd]!=2) q5.pop();        if(!q3.empty()&amp;&amp;!q5.empty()){//0å˜2,2å˜1            pos3 = q3.top().sd;pos5 = q5.top().sd;            op[4] = b[pos3]-(b[pos5]-a[pos5]);        }        int minp = 1;        rep(i,2,4)if(op[i]&lt;op[minp])minp=i;//æ‰¾åˆ°4ä¸ªopä¸­çš„æœ€ä¼˜è§£        res += op[minp];        if(minp==1){//1.æŠŠ0æ˜Ÿå˜1æ˜Ÿ            q1.pop();            add1(pos1);        }        else if(minp==2){//2.æŠŠ1æ˜Ÿå˜2æ˜Ÿ            q2.pop();            add2(pos2);        }        else if(minp==3){//3.æŠŠjçš„0æ˜Ÿå˜2æ˜Ÿ,å†æŠŠiçš„1æ˜Ÿå˜0æ˜Ÿ            q3.pop(),q4.pop();            add2(pos3);            add0(pos4);        }        else if(minp==4){//4.æŠŠjçš„0æ˜Ÿå˜2æ˜Ÿ,å†æŠŠiçš„2æ˜Ÿå˜1æ˜Ÿ            q3.pop(),q5.pop();            add2(pos3);            add1(pos5);        }    }    cout&lt;&lt;res&lt;&lt;endl;    rep(i,1,n) cout&lt;&lt;sel[i];    cout&lt;&lt;endl;}signed main(){    solve();}//åæ‚”è´ªå¿ƒä¾‹é¢˜//CF436E Cardboard Box//https://www.luogu.com.cn/problem/CF436E<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šæ ¡è¡¥é¢˜è®°å½•</title>
      <link href="2021/07/20/duoxiao/"/>
      <url>2021/07/20/duoxiao/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šæ ¡è¡¥é¢˜è®°å½•"><a href="#å¤šæ ¡è¡¥é¢˜è®°å½•" class="headerlink" title="å¤šæ ¡è¡¥é¢˜è®°å½•"></a>å¤šæ ¡è¡¥é¢˜è®°å½•</h1><h2 id="nä¸ªåŒºé—´åˆ†kç»„-ä½¿æ¯ç»„åŒºé—´çš„å¹¶é›†é•¿åº¦ä¹‹å’Œæœ€å¤§"><a href="#nä¸ªåŒºé—´åˆ†kç»„-ä½¿æ¯ç»„åŒºé—´çš„å¹¶é›†é•¿åº¦ä¹‹å’Œæœ€å¤§" class="headerlink" title="nä¸ªåŒºé—´åˆ†kç»„,ä½¿æ¯ç»„åŒºé—´çš„å¹¶é›†é•¿åº¦ä¹‹å’Œæœ€å¤§"></a>nä¸ªåŒºé—´åˆ†kç»„,ä½¿æ¯ç»„åŒºé—´çš„å¹¶é›†é•¿åº¦ä¹‹å’Œæœ€å¤§</h2><p>ç‰›å®¢2-G-League of Legends ã€å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–DPã€‘</p><p><a href="https://ac.nowcoder.com/acm/contest/11253/G">G-League of Legends_2021ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥2 (nowcoder.com)</a></p><p>é¢˜æ„ï¼šç»™n,k(5000)ï¼Œæœ‰nä¸ªæˆå‘˜è¦è¢«åˆ†æˆkç»„ï¼Œæ¯ç»„å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸ºï¼šæ‰€æœ‰ç»„å‘˜ç©ºé—²æ—¶é—´[ai,bi)çš„å¹¶é›†çš„é•¿åº¦ã€‚æ±‚æœ€å¤§çš„ç­”æ¡ˆã€‚</p><p>è§£ï¼šæŠŠæ‰€æœ‰çš„çº¿æ®µåˆ†æˆä¸¤ä¸ªé›†åˆï¼Œâ€œå¤§è¾¹â€å’Œâ€œå°è¾¹â€ï¼Œå¦‚æœä¸€ä¸ªçº¿æ®µèƒ½å¤Ÿå®Œæ•´åŒ…å«å¦ä¸€æ¡çº¿æ®µï¼Œé‚£è¿™ä¸ªè¾¹æ˜¯â€œå¤§è¾¹â€ï¼Œå‰©ä½™çš„è¾¹ä¸ºâ€œå°è¾¹â€ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">//O(n)å¤„ç†å¤§è¾¹å°è¾¹int minr = INF;    sort(a+1,a+1+n,cmp);//è¿™é‡Œç¬¬ä¸€å…³é”®å­—æ˜¯ftå°ï¼Œç¬¬äºŒå…³é”®å­—æ˜¯sdå¤§    repb(i,n,1){//åˆ†æˆå¤§å°åŒºé—´        if(a[i].sd&gt;=minr) da[++cd] = a[i].sd-a[i].ft;//å¤§åŒºé—´åªè®°å½•é•¿åº¦        else minr = a[i].sd,xi[++cx] = a[i];    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>ä¸€æ¡å¤§è¾¹åªæœ‰ä¸¤ç§å»å¤„ï¼šä¸€ç§æ˜¯å•ç‹¬æˆç»„ï¼Œè´¡çŒ®=é•¿åº¦ã€‚å¦ä¸€ç§æ˜¯è·ŸéšæŸæ¡èƒ½è¢«å®ƒå®Œå…¨åŒ…å«çš„â€œå°è¾¹â€è¿›å…¥åŒä¸€ç»„ï¼Œåˆ™å¯¹ç­”æ¡ˆä¸é€ æˆå½±å“ã€‚</p></li><li><p>å¯¹å°è¾¹ï¼Œåœ¨å¯¹pairæ’åºåï¼Œiä½ç½®ä¸€å®šæ»¡è¶³$L_i \geq L_{i-1}$ä¸”$R_i \geq R_{i-1}$ã€‚</p></li></ul><p>å› æ­¤æˆ‘ä»¬åªéœ€è¦è®¨è®ºå°è¾¹çš„ç­”æ¡ˆï¼Œæœ€åæšä¸¾ä½¿ç”¨å¤§è¾¹çš„æ•°é‡å³å¯ã€‚ä¸€æ®µè¿ç»­çš„å°è¾¹$(i,j)$å¦‚æœè¦æ”¾åœ¨åŒä¸€ç»„ï¼Œä¸€å®šæ»¡è¶³$L_j&gt;R_i $ï¼Œè€Œä¸”è¿™ä¹ˆæˆä¸€ç»„çš„è´¡çŒ®å°±æ˜¯$L_j-R_i$ã€‚</p><p><img src="/img/duoxiao/nk2g.jpg" alt="nk2g"></p><p>è®¾$DP_{i,j}$ä¸ºå‰iç»„ç”¨äº†jä¸ªäººçš„æœ€ä¼˜è§£ã€‚æ˜¾ç„¶æœ‰å…¬å¼$DP_{i,j} = DP_{i-1,k} + (R_{k+1}-L{j})$ï¼Œè¿™ä¹ˆä»¥æ¥å°±æœ‰äº†$n^3$çš„åšæ³•ã€‚ä¹‹åè€ƒè™‘ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼ŒæŠŠ$DP_{i,j} = DP_{i-1,k} + (R_{k+1}-L{j})$ä¸­çš„$DP_{i-1,k} + R_{k+1}$æ¨å…¥é˜Ÿåˆ—å³å¯ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3ftypedef pair&lt;int,int&gt; pii;#define ft first#define sd second#define mkp make_pairconst int MAXN = 5050;pii a[MAXN],xi[MAXN];//å°è¾¹int da[MAXN];//å¤§è¾¹int cd,cx;//è®°æ•°int n,m;//nä¸ªäººåˆ†mç»„int dp[MAXN][MAXN];//åˆ†æˆiç»„ï¼Œç”¨å‰jä¸ªpii q[MAXN];//å¯¹äºæ¯ä¸ª1&lt;=i&lt;=måˆ†é…ä¸€æ¡ä¼˜å…ˆé˜Ÿåˆ—//ä¼˜å…ˆé˜Ÿåˆ—,ftå­˜dp[i][k] + xi[k].sd,sdå­˜ xi[k].sdint st,ed;bool cmp(pii a,pii b){    if(a.ft==b.ft) return a.sd&gt;b.sd;    return a.ft&lt;b.ft;}void solve(){    cin&gt;&gt;n&gt;&gt;m;//åˆ†æˆmç»„    rep(i,1,n)        cin&gt;&gt;a[i].ft&gt;&gt;a[i].sd;    int minr = INF;    sort(a+1,a+1+n,cmp);    repb(i,n,1){//åˆ†æˆå¤§å°åŒºé—´        if(a[i].sd&gt;=minr) da[++cd] = a[i].sd-a[i].ft;//å¤§åŒºé—´åªè®°å½•é•¿åº¦        else minr = a[i].sd,xi[++cx] = a[i];    }    sort(xi+1,xi+1+cx);    dp[0][0] = 0;//è¦ç‰¹æ®Šå¤„ç†ä¸€ä¸‹    rep(i,1,m){        st=1,ed=0;        rep(j,i,cx){            if((i==1&amp;&amp;j==1)||dp[i-1][j-1]!=0){                while(st&lt;=ed&amp;&amp;q[ed].ft&lt;=dp[i-1][j-1]+xi[j].sd) ed--;//pop back;                 q[++ed] = mkp(dp[i-1][j-1]+xi[j].sd,xi[j].sd);            }            while(st&lt;=ed&amp;&amp;q[st].sd&lt;=xi[j].ft) st++;//pop front            if(st&lt;=ed)                dp[i][j] = q[st].ft - xi[j].ft;//dp[i][k]+xi[k].sd - xi[j].ft        }    }    //æ¥ä¸‹æ¥æšä¸¾å‰ç¼€å’Œ    sort(da+1,da+1+cd,greater&lt;int&gt;());    cd = min(cd,m);    int res = 0;    int sum = 0;    rep(j,0,m){//å‰jä¸ªå¤§åŒºé—´å•ç‹¬æˆç»„        sum += da[j];//åšå‰ç¼€å’Œ        if(dp[m-j][cx]==0) continue;//æ— æ•ˆå€¼        res = max(res,dp[m-j][cx]+sum);    }    cout&lt;&lt;res&lt;&lt;endl;}int main(){    //freopen("in.txt","r",stdin);    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„å•è°ƒé˜Ÿåˆ—å®ç°çš„ç»†èŠ‚ã€‚ä¸€å¼€å§‹ä¸€ç›´waï¼Œå› ä¸ºæ˜¯è¦æ»¡è¶³$k&lt;j$çš„ï¼Œæ‰€ä»¥åªæœ‰åœ¨è®¡ç®—åˆ°$DP_{i,j}$æ—¶ï¼Œæ‰èƒ½æŠŠ$DP_{i-1,j-1}+R_j$æ¨è¿›æ¥ã€‚</p><h2 id="æŠŠå­—ç¬¦ä¸²åˆ†æˆä¸¤æ®µï¼Œé—®æœ‰å¤šå°‘å¤±é…æ•°-lt-kçš„å­ä¸²"><a href="#æŠŠå­—ç¬¦ä¸²åˆ†æˆä¸¤æ®µï¼Œé—®æœ‰å¤šå°‘å¤±é…æ•°-lt-kçš„å­ä¸²" class="headerlink" title="æŠŠå­—ç¬¦ä¸²åˆ†æˆä¸¤æ®µï¼Œé—®æœ‰å¤šå°‘å¤±é…æ•°<=kçš„å­ä¸²"></a>æŠŠå­—ç¬¦ä¸²åˆ†æˆä¸¤æ®µï¼Œé—®æœ‰å¤šå°‘å¤±é…æ•°&lt;=kçš„å­ä¸²</h2><p>æ­ç”µå¤šæ ¡5 Another Stringã€æ»‘åŠ¨çª—å£ï¼Œå·®åˆ†ã€‘</p><p><a href="https://acm.hdu.edu.cn/showproblem.php?pid=7015">Problem - 7015 (hdu.edu.cn)</a></p><p>é¢˜æ„ï¼šç»™ä¸€ä¸ªé•¿3000çš„ä¸²nï¼Œå’Œå…è®¸æœ€å¤§å¤±é…æ•°ï¼ˆè·ç¦»ï¼‰kï¼Œé—®å¯¹äºæ¯ä¸ªåˆ†ç•Œç‚¹iï¼Œå·¦å³ä¸¤ä¾§æœ‰å¤šå°‘å¯¹è·ç¦»å°äºç­‰äºkçš„å­ä¸²ã€‚</p><p>è¿™ä¸ªåˆ†ç•Œç‚¹$i$ï¼Œé¢˜ç›®å®šä¹‰çš„æ˜¯å·¦åŠè¾¹çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œå³å·¦åŠè¾¹ä¸º$s[1,i]$å³åŠè¾¹ä¸º$s[i+1,n]$ã€‚</p><p>æˆ‘å†™çš„æ—¶å€™å®š$i$ä¸ºå³åŠè¾¹çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå³å·¦åŠè¾¹ä¸º$s[1,i-1]$,å³åŠè¾¹ä¸º$s[i,n]$ã€‚</p><p>è§£ï¼šç¬¬ä¸€å±‚æšä¸¾ä¸¤ä¸ªæ»‘åŠ¨çª—å£çš„é—´è·dï¼Œç„¶ååœ¨é‡Œé¢ç”¨forå¾ªç¯æšä¸¾$l$ï¼Œå¯¹äºæ¯ä¸ª$l$ï¼Œä½¿$r$ä¸€ç›´å¢åŠ å¾—åˆ°æœ€å¤§çš„ä¸”è·ç¦»ä¸è¶…è¿‡$k$çš„å­ä¸²ã€‚</p><p><img src="/img/duoxiao/hd5.jpg" alt="hd5"></p><p>å¦‚å›¾ï¼Œå¯ä»¥å‘ç°å¯¹äºè¿™ä¸€å¯¹åŒ¹é…ä¸²ï¼Œå¯ä»¥é€‰æ‹©çš„åˆ†ç•Œç‚¹$i$ä»$4$åˆ°$6$ï¼Œåœ¨ç»“æœä¸Šï¼Œå¯¹è¿™ä¸€æ®µçš„$res[4]$åˆ°$res[6]$ï¼Œéƒ½è¦$+1$ï¼Œå¯ä»¥ç”¨å·®åˆ†æ•°ç»„å®ç°ã€‚</p><p>ä½†æ˜¯è¿™æ ·åªæ˜¯è®¨è®ºåˆ°â€œæœ€é•¿â€çš„æƒ…å†µï¼Œå¯¹äºæ¯ä¸ªlè€Œè¨€ï¼Œä¸ä»…ä»…æ˜¯è¿™ä¸ªæœ€å¤§çš„rå¯ä»¥ä½¿å¾—ä¸²s[l,r]ä¸ä¸²$s[d+l-1,d+r-1]$åŒ¹é…ï¼Œå¯¹äºå…¶ä»–çš„$l\leq x\leq r$ï¼Œæ˜¾ç„¶å¯¹äºä¸²$s[l,x]$å’Œ$s[l+d-1,x+d-1]$ä¹Ÿæ»¡è¶³æ¡ä»¶ï¼Œæ•…æˆ‘ä»¬åœ¨å›¾ä¸Šæ ‡å‡ºè¿™äº›æ»¡è¶³æ¡ä»¶çš„å­ä¸²ï¼š</p><p><img src="/img/duoxiao/hd5.2.jpg" alt="hd5.2"></p><ul><li>å¯ä»¥å‘ç°ï¼Œè¿™å¯¹ä¸²çš„ç»“æŸç‚¹xä»åå¾€å‰ç§»åŠ¨ï¼Œåˆ†åˆ«æœ‰é•¿åº¦ä¸º1ï¼Œ2ï¼Œ3çš„ä¸‰å¯¹åŒ¹é…ä¸²ã€‚é•¿åº¦ä¸º1çš„ä¸²â€™aâ€™æœ‰ç¬¦åˆæ¡ä»¶çš„åˆ†ç•Œç‚¹$i\in [2,6]$ï¼Œé•¿åº¦ä¸º2çš„ä¸²â€™abâ€™æœ‰ç¬¦åˆæ¡ä»¶çš„åˆ†ç•Œç‚¹$i\in [3,6]$ï¼Œé•¿åº¦ä¸º3çš„ä¸²â€™abcâ€™æœ‰ç¬¦åˆæ¡ä»¶çš„åˆ†ç•Œç‚¹$i\in[4,6]$ã€‚å¯ä»¥å‘ç°ï¼Œå¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸ºä¸€ä¸ª<strong>æ¢¯å‹</strong>ã€‚</li><li>æˆ‘ä»¬ç”¨å·®åˆ†æ•°ç»„å®ç°ï¼Œè¦æ„é€ è¿™æ ·çš„æ¢¯å½¢ï¼Œéœ€è¦åœ¨å·®åˆ†æ•°ç»„çš„cf[2,3,4]å¤„+1ï¼Œcf[7]å¤„-3ã€‚ä½†æ˜¯å¯¹äºè¿™ä¸ªæ¢¯å½¢æ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œä¿®æ”¹å·®åˆ†æ•°ç»„çš„å¤æ‚åº¦ä¹Ÿå˜æˆäº†$O(n)$ï¼Œæ•…éœ€è¦å†é€ ä¸€ä¸ª<strong>å·®åˆ†æ•°ç»„çš„å·®åˆ†æ•°ç»„</strong>cf2ï¼ŒåŸæœ¬çš„cf[2,3,4]+=1ï¼Œå¯ä»¥å˜æˆcf[2]+=1ï¼Œcf[5]-=1ã€‚</li></ul><p>èµ›ä¸­è¿™é¢˜å…¶å®å·²ç»å†™çš„ä¸ƒä¸ƒå…«å…«äº†ï¼Œæœ€åå‘ç°ï¼Œå¯¹äºç¬¬ä¸€å±‚æšä¸¾çš„é—´è·dï¼Œæˆ‘å¹¶æ²¡æœ‰æŠŠè¿™ä¸ªç†è§£æˆé—´è·ï¼Œè€Œæ˜¯ç†è§£æˆå¦å¤–ä¸€ä¸ªåˆ†ç•Œç‚¹xï¼Œæƒ³ç€æ»‘çª—çš„æ—¶å€™ï¼Œä¸èƒ½è®©å·¦è¾¹çš„lå’Œrè¶…è¿‡è¿™ä¸ªåˆ†ç•Œç‚¹xï¼Œå®é™…ä¸Šå®Œå…¨æ˜¯å¯ä»¥çš„ï¼Œä¸ç„¶ä¼šæ¼æ‰å¾ˆå¤šæƒ…å†µã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a; }int n,k;string s;const int MAXN = 3090;ll cf1[MAXN],cf2[MAXN];void solve(){    cin&gt;&gt;n&gt;&gt;k;    rep(i,1,n) cf1[i]=cf2[i]=0;    cin&gt;&gt;s;    s = ' '+s;    rep(fj,2,n){        int nowdis = 0;        int rb = 0;        rep(lb,1,n){            if(fj+lb-1&gt;n) break;            while(rb+1&lt;fj+lb-1&amp;&amp;fj+rb&lt;=n&amp;&amp;nowdis+(s[rb+1]!=s[fj+rb])&lt;=k){                rb++;                nowdis += s[rb]!=s[fj+rb-1];            }            nowdis -= (s[lb]!=s[fj+lb-1]);            cf1[lb+1]++;cf1[rb+2]--;            cf2[fj+lb]-=rb-lb+1;        }    }    ll now = 0;    rep(i,1,n){        now += cf1[i];        cf2[i] += now;    }    now = cf2[1];    rep(i,2,n){        now += cf2[i];        cout&lt;&lt;now&lt;&lt;endl;    }}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å›¾ä¸Šé€‰è¾¹ï¼Œä½¿ä¸¤ç«¯ç‚¹æƒ-1ï¼Œé—®æœ€å°‘æ­¥æ•°"><a href="#å›¾ä¸Šé€‰è¾¹ï¼Œä½¿ä¸¤ç«¯ç‚¹æƒ-1ï¼Œé—®æœ€å°‘æ­¥æ•°" class="headerlink" title="å›¾ä¸Šé€‰è¾¹ï¼Œä½¿ä¸¤ç«¯ç‚¹æƒ-1ï¼Œé—®æœ€å°‘æ­¥æ•°"></a>å›¾ä¸Šé€‰è¾¹ï¼Œä½¿ä¸¤ç«¯ç‚¹æƒ-1ï¼Œé—®æœ€å°‘æ­¥æ•°</h2><p>ç‰›å®¢å¤šæ ¡9 J-Jam</p><p><a href="https://ac.nowcoder.com/acm/contest/11260/J">J-Jam_2021ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥9 (nowcoder.com)</a></p><p>é¢˜æ„ï¼šæœ‰åå­—è·¯å£ï¼Œæ¯ä¸ªè·¯å£æœ‰ä¸‰ä¸ªæ–¹å‘ï¼Œæ¯ä¸ªæ—¶é—´ç‚¹çš„å®‰æ’ä¸èƒ½ä½¿ä¸¤æ¡è·¯çº¿äº¤å‰ï¼Œé—®æœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ—¶é—´å¯ä»¥è®©åå­—è·¯å£çš„è½¦éƒ½èµ°å®Œã€‚ï¼ˆæ¯ä¸ªè·¯å£æ¯ä¸ªæ–¹å‘çš„è½¦Ci,j&lt;=100)</p><p><img src="/img/duoxiao/shizi.png" alt="shizi"></p><p>è§£ï¼šè¿™é¢˜å¯ä»¥ç”¨å¸¦èŠ±æ ‘å†™ï¼Œå¯¹æ¯ä¸ªè½¦å»ºç‚¹ï¼Œä¹‹åè·‘å›¾ä¸Šçš„æœ€å¤§åŒ¹é…ã€‚ä½†æ˜¯æˆ‘ä»¬èµ›ä¸­å†™çš„æ˜¯ç½‘ç»œæµã€‚</p><p>é¦–å…ˆå¯ä»¥å‘ç°ï¼Œæ¯ä¸ªè·¯å£å‘å³èµ°çš„è½¦è¾†å¯ä»¥ç‹¬ç«‹å‡ºæ¥ï¼Œå› ä¸ºå‘å³èµ°æ˜¯ä¸ä¸å…¶ä»–æ–¹å‘å†²çªç‚¹ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œå¯ä»¥æŠŠæ¯æ–¹ä½çš„ä¸¤ç§æ–¹å‘éƒ½æ‹‰å‡ºæ¥ï¼Œè½¬å˜æˆäº†ï¼šâ€ç»™å®šä¸€å¼ å›¾ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€æ¡è¾¹ï¼Œä½¿å¾—ä¸¤ç«¯ç‚¹æƒå€¼å„-1ï¼Œé—®æœ€å°‘æ“ä½œå¤šå°‘æ¬¡ä½¿ç‚¹æƒå…¨éƒ¨æ¸…ç©ºï¼Ÿâ€</p><p><img src="/img/duoxiao/shizitu.jpg" alt="shizitu"></p><p>å³ä¾¿å»ºå‡ºæ¥è¿™æ ·ä¸€å¼ å›¾ï¼Œè¿˜æ˜¯æ— æ³•æƒ³åˆ°æ€ä¹ˆåšï¼ˆå¯ä»¥æŠŠæ¯ä¸ªè½¦å­æ‹†å‡ºæ¥å»ºå›¾ç”¨å¸¦èŠ±æ ‘ï¼Œè¿™é‡Œå…ˆä¸è®¨è®ºè¿™ç§ï¼‰ã€‚è¿™å¼ å›¾ä¹Ÿä¸æ˜¯äºŒåˆ†å›¾ï¼Œ<strong>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ å»ä¸¤æ¡è¾¹ä½¿ä¹‹å˜æˆä¸€å¼ äºŒåˆ†å›¾ï¼Œå¹¶ä¸”ç€ä¸¤æ¡è¾¹å¯ä»¥100*100åœ°å–æšä¸¾</strong>ï¼Œæ€»æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(Cx100x100)ï¼ŒCæ˜¯å…«ä¸ªç‚¹çš„ç½‘ç»œæµçš„å¤æ‚åº¦ï¼Œåº”è¯¥ä¸ä¼šå¾ˆå¤§ã€‚å¦‚ä¸‹å›¾åˆ å»è¿™ä¸¤æ¡è¾¹ï¼š</p><p><img src="/img/duoxiao/erfentu.jpg" alt="erfentu"></p><p>ä»£ç ï¼šï¼ˆç”¨äº†hjtçš„ç½‘ç»œæµæ¿å­ï¼‰</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;#include&lt;queue&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fconst int N = 114;struct FLOW{struct edge{int to,w,nxt;};vector&lt;edge&gt; a; int head[N],cur[N];int n,s,t;queue&lt;int&gt; q; bool inque[N];int dep[N];void ae(int x,int y,int w){ // add edgea.push_back({y,w,head[x]});head[x]=a.size()-1;}bool bfs(){ // get dep[]fill(dep,dep+n,INF); dep[s]=0;copy(head,head+n,cur);q=queue&lt;int&gt;(); q.push(s);while(!q.empty()){int x=q.front(); q.pop(); inque[x]=0;for(int i=head[x];i!=-1;i=a[i].nxt){int p=a[i].to;if(dep[p]&gt;dep[x]+1 &amp;&amp; a[i].w){dep[p]=dep[x]+1;if(inque[p]==0){inque[p]=1;q.push(p);}}}}return dep[t]!=INF;}int dfs(int x,int flow){ // extendint now,ans=0;if(x==t)return flow;for(int &amp;i=cur[x];i!=-1;i=a[i].nxt){int p=a[i].to;if(a[i].w &amp;&amp; dep[p]==dep[x]+1)if((now=dfs(p,min(flow,a[i].w)))){a[i].w-=now;a[i^1].w+=now;ans+=now,flow-=now;if(flow==0)break;}}return ans;}void init(int _n){n=_n+1; a.clear();fill(head,head+n,-1);fill(inque,inque+n,0);}int solve(int _s,int _t){ // return max flows=_s,t=_t;int ans=0;while(bfs())ans+=dfs(s,INF);return ans;}}flow;void add_edge(int x,int y,int w){flow.ae(x,y,w),flow.ae(y,x,0);}inline int mo(int x){return (x+4-1)%4+1;}int cnt[10][6];int c[10][6];int l[10],r[10],al[10],ar[10];void solve(){    rep(i,1,4)        rep(j,1,4) cin&gt;&gt;c[i][j];    rep(i,1,4){        cnt[i][1] = c[i][mo(i+1)];//å·¦èµ°        cnt[i][2] = c[i][mo(i+2)];//å‰èµ°        cnt[i][3] = c[i][mo(i-1)];//å³èµ°    }    int res = 0;    rep(i,1,4) res = max(res,cnt[i][3]);    l[1] = cnt[1][1],l[2] = cnt[2][1];    l[3] = cnt[3][2],l[4] = cnt[4][2];    r[1] = cnt[1][2],r[2] = cnt[2][2];    r[3] = cnt[3][1],r[4] = cnt[4][1];    int s=99,t=100;    int fres = INF;    int eg1 = min(l[1],l[4]),eg2 = min(r[2],r[3]);    int tot = 0;//æ€»ç‚¹æƒ    rep(i,1,4) ar[i]=r[i],al[i]=l[i],tot+=r[i]+l[i];    //cout&lt;&lt;"tot"&lt;&lt;tot&lt;&lt;endl;    rep(i,0,eg1){        al[1]=l[1]-i;        al[4]=l[4]-i;        rep(j,0,eg2){            flow.init(101);//s=1,t=100;            ar[2]=r[2]-j;            ar[3]=r[3]-j;            rep(i,1,4){                add_edge(s,i,al[i]);//s to l                add_edge(4+i,t,ar[i]);//r to t                add_edge(i,4+i,INF);//åŒä¾§                add_edge(i,4+mo(i+2),INF);//å¯¹é¢            }            add_edge(2,5,INF);            add_edge(3,8,INF);            int tmp;            fres = min(fres,tot-flow.solve(s,t)-i-j);        }    }    cout&lt;&lt;max(res,fres)&lt;&lt;endl;}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> åšé¢˜è®°å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºæ¬§æ‹‰é™å¹‚</title>
      <link href="2021/07/19/euler/"/>
      <url>2021/07/19/euler/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¬§æ‹‰é™å¹‚"><a href="#æ¬§æ‹‰é™å¹‚" class="headerlink" title="æ¬§æ‹‰é™å¹‚"></a>æ¬§æ‹‰é™å¹‚</h1><p>èµ·å› æ˜¯å› ä¸ºç‰›å®¢å¤šæ ¡çš„ä¸€ä¸ªæ•°è®ºé¢˜ï¼Œéœ€è¦è®¡ç®—ç»„åˆæ•°ä½œä¸ºæ¬¡æ•°ï¼Œå³$a^{C_x^t}\mod p$,æˆ‘åœ¨è®¡ç®—Cçš„æ—¶å€™ç”¨pä½œä¸ºæ¨¡æ•°ï¼Œå¯¼è‡´äº†ç»“æœçš„é”™è¯¯ã€‚</p><p>æ´›è°·æ¬§æ‹‰é™å¹‚æ¨¡æ¿é¢˜ï¼š</p><p><a href="https://www.luogu.com.cn/problem/P5091">P5091 ã€æ¨¡æ¿ã€‘æ‰©å±•æ¬§æ‹‰å®šç† - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><h2 id="æ¬§æ‹‰å®šç†ï¼šè¦æ±‚aå’Œpäº’è´¨"><a href="#æ¬§æ‹‰å®šç†ï¼šè¦æ±‚aå’Œpäº’è´¨" class="headerlink" title="æ¬§æ‹‰å®šç†ï¼šè¦æ±‚aå’Œpäº’è´¨"></a>æ¬§æ‹‰å®šç†ï¼šè¦æ±‚aå’Œpäº’è´¨</h2><p>è¯æ˜ï¼š<a href="https://oi-wiki.org/math/euler/">æ¬§æ‹‰å‡½æ•° - OI Wiki (oi-wiki.org)</a></p><p>$a^{\phi(p)} \mod p = 1$</p><p>åˆ™æœ‰$a^b \mod p=a^{b\mod\phi(p) }$</p><h2 id="æ‰©å±•æ¬§æ‹‰é™å¹‚ï¼šä¸è¦æ±‚aå’Œpäº’è´¨ï¼ŒæŒ‰ç…§bå’Œ-phi-p-æ¯”è¾ƒåˆ†ä¸¤ç±»"><a href="#æ‰©å±•æ¬§æ‹‰é™å¹‚ï¼šä¸è¦æ±‚aå’Œpäº’è´¨ï¼ŒæŒ‰ç…§bå’Œ-phi-p-æ¯”è¾ƒåˆ†ä¸¤ç±»" class="headerlink" title="æ‰©å±•æ¬§æ‹‰é™å¹‚ï¼šä¸è¦æ±‚aå’Œpäº’è´¨ï¼ŒæŒ‰ç…§bå’Œ$\phi(p)$æ¯”è¾ƒåˆ†ä¸¤ç±»"></a>æ‰©å±•æ¬§æ‹‰é™å¹‚ï¼šä¸è¦æ±‚aå’Œpäº’è´¨ï¼ŒæŒ‰ç…§bå’Œ$\phi(p)$æ¯”è¾ƒåˆ†ä¸¤ç±»</h2><p>$a^b \mod p = a^{b}(b&lt;\phi(p))$</p><p>$a^b \mod p = a^{(b\mod\phi(p))+\phi(p)}(b&lt;\phi(p))$</p><p>æ•…æˆ‘ç”¨ä¸€ä¸ªflagæ¥è®°å½•bæ˜¯å¦æœ‰è¶…è¿‡phi(p)çš„æƒ…å†µï¼Œæ¥åˆ¤æ–­æœ€åæ˜¯å¦åœ¨æ¬¡æ•°ä¸ŠåŠ ä¸Šphi(p)</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cmath&gt;using namespace std;#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)ll a,b,med;#define int llll qpow(ll d,ll c){//å¿«é€Ÿå¹‚    ll res = 1;    while(c){        if(c&amp;1) res=res*d%med;        d=d*d%med;c&gt;&gt;=1;    }return res;}int euler_phi(int n){    int sqr = sqrt(n+0.5);    int res = n;     for(int i=2;i&lt;=sqr;i++){        if(n%i==0){//æ‰¾åˆ°ä¸€ä¸ªè´¨å› å­             res = res/i*(i-1);//å…ˆé™¤åä¹˜ï¼Œé˜²æ­¢è¶Šç•Œ             while(n%i==0) n/=i;//æŠŠè¿™ä¸ªå› å­ä»nä¸­æ¶ˆé™¤æ‰         }    }    if(n&gt;1) res = res/n*(n-1);//å¤§äºsqrtçš„å› å­æœ€å¤šåªæœ‰ä¸€ä¸ª     return res; }string s;signed main(){    cin&gt;&gt;a&gt;&gt;med;    ll phi = euler_phi(med);    cin&gt;&gt;s;    int siz = s.size();    b = 0;    int flag = 0;    rep(i,0,siz-1){        b = b*10;        b = (b+s[i]-'0');        if(b&gt;=phi) flag = 1;        b%=phi;    }    cout&lt;&lt;qpow(a,b+flag*phi)&lt;&lt;endl;}//P5091 ã€æ¨¡æ¿ã€‘æ‰©å±•æ¬§æ‹‰å®šç†//https://www.luogu.com.cn/problem/P5091<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¢˜è§£é‡Œç»™çš„æ•°æ®åŠ å¼ºç‰ˆï¼Œaå’Œmçš„èŒƒå›´å˜æˆäº†1e12,éœ€è¦ç”¨é¾Ÿé€Ÿä¹˜</p><p><a href="https://www.luogu.com.cn/problem/U55950">U55950 ã€æ¨¡æ¿ã€‘æ‰©å±•æ¬§æ‹‰å®šç† - æ´›è°· | è®¡ç®—æœºç§‘å­¦æ•™è‚²æ–°ç”Ÿæ€ (luogu.com.cn)</a></p><h2 id="é¾Ÿé€Ÿä¹˜"><a href="#é¾Ÿé€Ÿä¹˜" class="headerlink" title="é¾Ÿé€Ÿä¹˜"></a>é¾Ÿé€Ÿä¹˜</h2><p>å¦‚æœxå’Œyç›´æ¥ç›¸ä¹˜ä¼šçˆ†llï¼Œåˆ™å¯ä»¥ä½¿ç”¨é¾Ÿé€Ÿä¹˜ã€‚</p><p>çœ‹ä»£ç å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œå³æŠŠyæŒ‰äºŒè¿›åˆ¶æ‹†åˆ†ï¼Œä»ä½ä½å¾€é«˜ä½ç§»åŠ¨ï¼Œæ¯æ¬¡æŠŠxä¹˜ä¸Š2å†å–æ¨¡ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">ll gui_mul(ll x,ll y){//é¾Ÿé€Ÿä¹˜    ll res = 0;    while(y!=0){        if(y&amp;1)res+=x,res%=med;        x+=x,x%=med;//yçš„ä½æ•°æ¯æ¬¡å¾€ä¸Š,å¯¹åº”çš„æƒå€¼*2        y&gt;&gt;=1;    }    return res;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»“åˆé¾Ÿé€Ÿä¹˜åçš„å®Œæ•´ä»£ç ï¼š</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cmath&gt;using namespace std;#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)ll a,b,med;#define int llll gui_mul(ll x,ll y){//é¾Ÿé€Ÿä¹˜    ll res = 0;    while(y!=0){        if(y&amp;1)res+=x,res%=med;        x+=x,x%=med;        y&gt;&gt;=1;    }    return res;}ll qpow(ll d,ll c){//å¿«é€Ÿå¹‚    ll res = 1;    while(c){        if(c&amp;1) res=gui_mul(res,d);        d=gui_mul(d,d);c&gt;&gt;=1;    }return res;}int euler_phi(int n){    int sqr = sqrt(n+0.5);    int res = n;     for(int i=2;i&lt;=sqr;i++){        if(n%i==0){//æ‰¾åˆ°ä¸€ä¸ªè´¨å› å­             res = res/i*(i-1);//å…ˆé™¤åä¹˜ï¼Œé˜²æ­¢è¶Šç•Œ             while(n%i==0) n/=i;//æŠŠè¿™ä¸ªå› å­ä»nä¸­æ¶ˆé™¤æ‰         }    }    if(n&gt;1) res = res/n*(n-1);//å¤§äºsqrtçš„å› å­æœ€å¤šåªæœ‰ä¸€ä¸ª     return res; }string s;signed main(){    cin&gt;&gt;a&gt;&gt;med;    ll phi = euler_phi(med);    cin&gt;&gt;s;    int siz = s.size();    b = 0;    int flag = 0;    rep(i,0,siz-1){        b = b*10;        b = (b+s[i]-'0');        if(b&gt;=phi) flag = 1;        b%=phi;    }    cout&lt;&lt;qpow(a,b+flag*phi)&lt;&lt;endl;}//P5091 ã€æ¨¡æ¿ã€‘æ‰©å±•æ¬§æ‹‰å®šç†//https://www.luogu.com.cn/problem/P5091<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•å­¦ä¹ ç¬”è®° </tag>
            
            <tag> æ•°è®º </tag>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•´äº†ä¸ªNASå’ŒDDNS</title>
      <link href="2021/06/12/nas/"/>
      <url>2021/06/12/nas/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤§è‡´æ­¥éª¤"><a href="#å¤§è‡´æ­¥éª¤" class="headerlink" title="å¤§è‡´æ­¥éª¤"></a>å¤§è‡´æ­¥éª¤</h2><p>æ³¨æ„ï¼šä¸‹é¢å‚è€ƒäº†å¾ˆå¤šä¸ªå¸–å­ï¼Œä½†æ˜¯çŸ¥è¯†ç”¨åˆ°äº†è¯´æ˜è¯´åˆ°çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¸è¦å’Œä»–ä»¬æä¸€æ ·å°±è¡Œäº†ã€‚</p><p>æˆ‘çš„openwrtå·²ç»è£…å¥½ddnsæ’ä»¶å’Œluci-app-ddnsäº†ã€‚ä¸€å¼€å§‹æˆ‘ç”¨çš„aliddnsï¼Œä½†æ˜¯ä¼¼ä¹æœ‰ç‚¹é—®é¢˜ï¼Œä¸èƒ½æ­£å¸¸è¿è¡Œï¼Œè€Œä¸”æ—¥å¿—æ–‡ä»¶ä¹Ÿæ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œä¹‹åå°±æ¢äº†æ™®é€šçš„ddnsæ’ä»¶ã€‚</p><p>1.è´­ä¹°äº†é˜¿é‡Œçš„åŸŸåï¼Œå¹¶ä¸”æ ¹æ®è¿™ä¸ªè§†é¢‘çš„æ–¹æ³•åˆ›å»ºäº†ç”¨æˆ·ï¼Œæ·»åŠ äº†åŸŸåè§£ææƒé™ï¼Œå¹¶ä¸”å£°ç§°accesskeyã€‚</p><p><a href="https://www.bilibili.com/video/BV1n741147yj">OpenWrtè½¯è·¯ç”±è®¾ç½®é˜¿é‡Œäº‘DDNSåŠ¨æ€åŸŸåè§£ææ•™ç¨‹_å“”å“©å“”å“©_bilibili</a></p><p>2.è®¾ç½®ç«¯å£è½¬å‘ï¼Œå°±æ˜¯æŠŠå†…ç½‘ä¸­æŸä¸ªåœ°å€ä¸‹çš„æŸä¸ªç«¯å£ï¼Œæ˜ å°„åˆ°å…¬ç½‘ipçš„æŸä¸ªç«¯å£ä¸Šï¼Œåœ¨openwrtçš„é˜²ç«å¢™è®¾ç½®é‡Œå¯ä»¥è®¾ç½®ç«¯å£è½¬å‘ã€‚</p><p><a href="https://www.bilibili.com/video/BV1sb41157Lk">ã€è§†é¢‘æ•™ç¨‹ã€‘æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨OpenWRTè·¯ç”±å™¨è¿›è¡Œç«¯å£è½¬å‘_å“”å“©å“”å“©_bilibili</a></p><p>3.åœ¨openwrtè®¾ç½®ddnsï¼Œåœ¨æ¦‚å†µé‡Œæ·»åŠ ipv4çš„åŠ¨æ€dnsï¼Œçœ‹å…¬ç½‘ipåœ¨å“ªä¸ªæ¥å£é‡Œï¼Œæˆ‘çš„ç”µä¿¡é—ªè®¯æ˜¯åœ¨wanå£ï¼ŒæŠŠåŸŸåè®¾ç½®ä¸€ä¸‹å³å¯ï¼Œè®°å¾—è®¾ç½®ä¸€ä¸‹å­åŸŸåï¼Œå½¢å¦‚nas.example.comä¸­çš„nasï¼Œè¿™ä¸ªå­åŸŸååˆ°æ—¶å€™æ˜¯è¦å¡«åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„åŸŸåè§£æé‡Œé¢çš„ã€‚</p><p><a href="https://post.smzdm.com/p/a6lrn3l0/">æˆ‘çš„è½¯è·¯ç”±æŠ˜è…¾ä¹‹æ—… ç¯‡å››ï¼šOpenwrt by Leanæå®šèŠ±ç”Ÿå£³+3322 DDNSï¼Œæ´—ç™½é»‘ç¾¤æ™–è¿œç¨‹/å®šæ—¶å”¤é†’_NASå­˜å‚¨_ä»€ä¹ˆå€¼å¾—ä¹° (smzdm.com)</a></p><p>4.ä¹‹ååœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„åŸŸåè§£æä¸­åˆ›å»ºä¸€ä¸ªAè®°å½•ï¼Œè¿™é‡Œçš„å…¬ç½‘ipå¯ä»¥ä¹±è®¾ç½®ï¼Œå› ä¸ºä¹‹åè·¯ç”±å™¨é‚£è¾¹ä¼šæŠŠæ­£ç¡®çš„ipæ›´æ–°ä¸Šæ¥ã€‚å¾ˆé—æ†¾é˜¿é‡Œçš„é¢‘ç‡æœ€å¿«ä¹Ÿåªèƒ½è®¾ç½®10åˆ†é’Ÿã€‚</p><p>5.è¿™é‡Œæœ‰ä¸€ä¸ªæŒºå¥½çœ‹çš„è§†é¢‘ï¼Œè®²äº†ç”±äºé˜¿é‡Œäº‘æ›´æ–°æ¯”è¾ƒæ…¢ï¼Œæœ‰æ—¶å€™å¯èƒ½éœ€è¦å‡ ä¸ªå°æ—¶ï¼Œæ‰€ä»¥åœ¨æ¯å¤©æ™šä¸Šå®šä¸€ä¸ªæ—¶é—´æ¥é‡å¯è·¯ç”±å™¨ï¼Œå¯ä»¥å°½é‡æŠŠè¿™ä¸ªå…¬ç½‘ipæ›´æ¢çš„æ—¶é—´æ”¾åœ¨æ™šä¸Šç¡è§‰åã€‚</p><p><a href="https://www.zhihu.com/zvideo/1254589422701576192">(1 æ¡æ¶ˆæ¯) è½¯è·¯ç”±ç©6å¹´ OPENWRTè®¾ç½® æ’ä»¶å“ªå‘å“ªå¥½åŠDDNSè®¾ç½® - çŸ¥ä¹ (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¡åƒåœ¾ </tag>
            
            <tag> Openwrt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢æ–°ä¸»é¢˜</title>
      <link href="2021/05/18/new-theme/"/>
      <url>2021/05/18/new-theme/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–°ä¸»é¢˜"><a href="#æ–°ä¸»é¢˜" class="headerlink" title="æ–°ä¸»é¢˜"></a>æ–°ä¸»é¢˜</h1><h3 id="github"><a href="#github" class="headerlink" title="github"></a>github</h3><p><a href="https://github.com/blinkfox/hexo-theme-matery">https://github.com/blinkfox/hexo-theme-matery</a></p>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿‘æœŸCFåšé¢˜è®°å½•</title>
      <link href="2021/04/26/zuoti/"/>
      <url>2021/04/26/zuoti/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿‘æœŸCFåšé¢˜è®°å½•ï¼š"><a href="#è¿‘æœŸCFåšé¢˜è®°å½•ï¼š" class="headerlink" title="è¿‘æœŸCFåšé¢˜è®°å½•ï¼š"></a>è¿‘æœŸCFåšé¢˜è®°å½•ï¼š</h1><h2 id="æ¢—æ¦‚"><a href="#æ¢—æ¦‚" class="headerlink" title="æ¢—æ¦‚"></a>æ¢—æ¦‚</h2><p>ä¸»è¦åŒ…æ‹¬ä¸€äº›è¿‘æœŸå†™çš„CDEé¢˜ï¼Œå¤§è‡´è®°å½•ä¸€ä¸‹ï¼Œä»¥ä¾¿ä¹‹åç¿»é˜…å¤ä¹ ï¼Œä¹Ÿä½œè®°å½•æ¿€åŠ±è‡ªå·±å†™é¢˜ã€‚</p><h2 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h2><h3 id="ã€ç‰©å“å†²çªã€‘"><a href="#ã€ç‰©å“å†²çªã€‘" class="headerlink" title="ã€ç‰©å“å†²çªã€‘"></a>ã€ç‰©å“å†²çªã€‘</h3><ul><li>ã€æš´åŠ›ã€‘Edu104E å¾ˆæœ‰cfé£æ ¼çš„ä¸€é¢˜ï¼Œå››ç§ç±»å‹ç‰©å“ï¼Œæ¯ç§ç±»å‹ç‰©å“å„é€‰ä¸€ä¸ªï¼Œæœ‰çš„ç‰©å“uå’Œä¸Šä¸€ç§çš„vé—´æœ‰å†²çªï¼Œé—®å››ç§ç‰©å“å„é€‰ä¸€ä¸ªçš„æœ€å°èŠ±è´¹ã€‚</li></ul><p><a href="https://codeforces.com/contest/1487/problem/E">https://codeforces.com/contest/1487/problem/E</a></p><p>å†²çªæ•°é‡æœ‰é™ï¼Œæ‰€ä»¥æ’åºåç›´æ¥æš´åŠ›å³å¯ï¼Œæœ¬ä»¥ä¸ºä¼šTï¼Œå…¶å®å› ä¸ºå†²çªåªæœ‰2e6ï¼Œå¤æ‚åº¦å¹¶ä¸ä¼šç‚¸ã€‚</p><h3 id="ã€ç½‘æ ¼æŒ–æ§½è”é€šã€‘"><a href="#ã€ç½‘æ ¼æŒ–æ§½è”é€šã€‘" class="headerlink" title="ã€ç½‘æ ¼æŒ–æ§½è”é€šã€‘"></a>ã€ç½‘æ ¼æŒ–æ§½è”é€šã€‘</h3><ul><li>ã€æ„é€ ,æ€ç»´ã€‘CF706D æ„é€ ï¼Œåœ¨n*mçš„ç½‘æ ¼ä¸­æœ‰å‡ ä¸ªä½ç½®è¢«æŒ–ç©ºï¼Œè¿™äº›ä½ç½®ä¸ä¼šæœ‰åŒè¾¹æˆ–è€…åŒè§’ï¼Œé—®æ€ä¹ˆå†æŒ–å‡ ä¸ªç©ºï¼Œè®©æ‰€æœ‰ç©ºæ§½è”é€šï¼Œå¹¶ä¸”åªæœ‰ä¸€æ¡è·¯ï¼Œå³æˆä¸ºæ ‘å½¢</li></ul><p><a href="https://codeforces.com/contest/1496/problem/E">https://codeforces.com/contest/1496/problem/E</a></p><p>åœ¨j=3k+2çš„åˆ—ä¸Šå…¨éƒ¨æŒ–ç©ºï¼Œæ¯ä¸ªè¿™ç§â€œèµ°å»Šâ€ä¸­é—´åˆšå¥½éš”2ï¼Œè¿™æ—¶å€™åªéœ€è¦æ¯ä¸¤ä¸ªâ€œèµ°å»Šâ€æŒ–ä¸€æ¡å°è·¯å³å¯ï¼Œå¦‚æœm%3==1ï¼Œé‚£ä¹ˆæœ€åç©ºå‡ºæ¥çš„ä¸¤åˆ—åœ¨å·¦è¾¹æœ‰èµ°å»Šï¼Œå³è¾¹æ²¡æœ‰ï¼Œéœ€è¦ç‰¹æ®Šè®¨è®ºï¼</p><h3 id="ã€ç½‘æ ¼æ¶‚è‰²è¿çº¿æœ€ä¼˜è§£ã€‘"><a href="#ã€ç½‘æ ¼æ¶‚è‰²è¿çº¿æœ€ä¼˜è§£ã€‘" class="headerlink" title="ã€ç½‘æ ¼æ¶‚è‰²è¿çº¿æœ€ä¼˜è§£ã€‘"></a>ã€ç½‘æ ¼æ¶‚è‰²è¿çº¿æœ€ä¼˜è§£ã€‘</h3><ul><li>ã€å·®åˆ†ã€‘CF578D n*nç½‘æ ¼å¡«å……é»‘ç™½ä¸¤ç§é¢œè‰²ï¼Œå¯ä»¥é€‰æ‹©æŠŠä¸€ä¸ªkçš„æ­£æ–¹å½¢å…¨éƒ¨å¡«æˆç™½è‰²ï¼Œé—®æ€ä¹ˆæ ·é€‰è¿™ä¸ªæ­£æ–¹å½¢ä½¿å¾—ç½‘æ ¼ä¸­çš„ç™½è‰²è¡Œ/åˆ—æ•°é‡æœ€å¤š</li></ul><p><a href="https://codeforces.com/contest/1200/problem/D">https://codeforces.com/contest/1200/problem/D</a></p><p>å¯¹æ¯è¡Œæ‰¾å‡ºæœ€å…ˆå‡ºç°é»‘è‰²ç©ºç¼ºminnå’Œæœ€åå‡ºç°é»‘è‰²ç©ºç¼ºmaxxï¼Œç„¶åæƒ³è±¡ç”¨ä¸€ä¸ªk*kçš„æ­£æ–¹å½¢å»â€œå¥—ä½â€è¿™æ¡é»‘çº¿æ—¶ï¼Œå“ªäº›æ˜¯å¯ä»¥é€‰æ‹©çš„å·¦ä¸Šè§’ï¼Œåœ¨å¯ä»¥çš„ä½ç½®ä¸Šé€šè¿‡äºŒç»´å·®åˆ†æ•°ç»„å…¨éƒ¨åŠ ä¸Š1ï¼Œæœ€åçœ‹æ‰€æœ‰ä½ç½®ä¸Šæœ€å¤§çš„æ•°å€¼ï¼Œå°±æ˜¯ç™½è‰²kæ–¹å—çš„æœ€ä½³ä½ç½®</p><h3 id="ã€å·²æ¶‚è‰²çŸ©é˜µæ±‚æ»¡è¶³è¦æ±‚å­çŸ©é˜µæ•°é‡ã€‘"><a href="#ã€å·²æ¶‚è‰²çŸ©é˜µæ±‚æ»¡è¶³è¦æ±‚å­çŸ©é˜µæ•°é‡ã€‘" class="headerlink" title="ã€å·²æ¶‚è‰²çŸ©é˜µæ±‚æ»¡è¶³è¦æ±‚å­çŸ©é˜µæ•°é‡ã€‘"></a>ã€å·²æ¶‚è‰²çŸ©é˜µæ±‚æ»¡è¶³è¦æ±‚å­çŸ©é˜µæ•°é‡ã€‘</h3><ul><li>ã€DPã€‘CF567C (è¿™é¢˜ä¸çœ‹å›¾æœ‰ç‚¹éš¾æ‡‚) æœ‰n*mçš„ç½‘æ ¼ï¼Œæ¯ä¸ªcellæœ‰ä¸€ç§é¢œè‰²(a to zè¡¨ç¤º26ç§ä¸åŒé¢œè‰²)ï¼Œé—®å›¾ä¸­æœ‰å‡ ä¸ªå­çŸ©å½¢å¯ä»¥ç»„æˆâ€œå›½æ——â€ï¼Ÿæœ‰ä¸‰æ¡é«˜åº¦ç›¸åŒçš„æ¨ªç€çš„è‰²å¸¦çš„çŸ©å½¢è¢«å®šä¹‰ä¸ºå›½æ——</li></ul><p><a href="https://codeforces.com/contest/118C1/problem/C">https://codeforces.com/contest/118C1/problem/C</a></p><p>ç”¨dpå†™ï¼šç»´æŠ¤ä¸¤ä¸ªæ•°ç»„,$dp_{i,j}$è¡¨ç¤ºä»¥i,jä¸ºå·¦ä¸‹è§’å¯ä»¥ç»„æˆå‡ ä¸ªå›½æ——ï¼Œ$top_{i,j}$è¡¨ç¤º(i,j)æ ¼çš„é¢œè‰²å¾€ä¸Šå¯ä»¥å»¶ä¼¸åˆ°å¤šé•¿ã€‚</p><p>å…ˆO(nm)é¢„å¤„ç†å‡ºtopæ•°ç»„ï¼Œç„¶ådpçš„æ—¶å€™ï¼Œæ¯åˆ°ä¸€ä¸ªæ ¼å­(i,j)ï¼Œå…ˆå¾€ä¸Šèµ°æ£€æŸ¥æ˜¯å¦æœ‰ä¸‰æ¡é«˜åº¦ç›¸åŒçš„è‰²å¸¦ã€‚ï¼ˆæ³¨æ„ä¸€å¼€å§‹åœ¨è¿™é‡Œwaäº†ï¼Œå› ä¸ºç¬¬ä¸‰æ®µé¢œè‰²çš„é•¿åº¦å…¶å®ä¸éœ€è¦ç­‰äºç¬¬ä¸€ç§é¢œè‰²çš„é•¿åº¦ï¼Œåªéœ€è¦å¤§äºç­‰äºå³å¯ï¼ï¼‰å¦‚æœæ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆè¿™é‡Œå¯ä»¥å½¢æˆå®½åº¦ä¸º1çš„å›½æ——å³$dp_{i,j}$å¯ä»¥ç­‰äº1ï¼Œä¹‹åå†æ£€æŸ¥å’Œ(i,j-1)ä½ç½®æ˜¯å¦å¯ä»¥æ‹¼æ¥ï¼ˆä¸‰æ®µé¢œè‰²å®Œå…¨ç›¸åŒ),å¦‚æœå¯ä»¥ï¼Œé‚£ä¹ˆ$dp_{i,j}=dp_{i,j}+dp_{i,j-1}$ã€‚ç­”æ¡ˆå°±æ˜¯æ‰€æœ‰dpçš„å’Œã€‚</p><h3 id="ã€é‡æ’åºåˆ—ä½¿æå°å€¼æœ€å¤šã€‘"><a href="#ã€é‡æ’åºåˆ—ä½¿æå°å€¼æœ€å¤šã€‘" class="headerlink" title="ã€é‡æ’åºåˆ—ä½¿æå°å€¼æœ€å¤šã€‘"></a>ã€é‡æ’åºåˆ—ä½¿æå°å€¼æœ€å¤šã€‘</h3><ul><li>ã€æ„é€ ,æ€ç»´ã€‘CF671D2 ç»™nä¸ªå†°çƒ(1e5)ï¼Œåˆ†åˆ«æœ‰aiçš„ä»·æ ¼ï¼ˆå¯èƒ½ç›¸åŒï¼‰ï¼Œè¦æ±‚æ‰¾åˆ°ä¸€ç§æ’åˆ—ï¼Œä½¿å¾—æ»¡è¶³a[i-1]&gt;a[i]&lt;a[i+1]çš„ç‚¹å°½å¯èƒ½å¤šï¼Œè¾“å‡ºè¿™ç§æœ€ä¼˜çš„æ’åˆ—ã€‚</li></ul><p><a href="https://codeforces.com/contest/1419/problem/D2">https://codeforces.com/contest/1419/problem/D2</a></p><p>å¦‚æœæ˜¯D1çš„æ¡ä»¶ï¼Œå³aiä»·æ ¼å„ä¸ç›¸åŒï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€å¤§ä¸€å°åœ°è¾“å‡ºã€‚ä½†æ˜¯è¿™é¢˜D2æ˜¯å¯èƒ½ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³ï¼šè®©æ¥è¿‘çš„æ•°å­—è·ç¦»å°½å¯èƒ½è¿œã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆæŠŠaiæ’åºï¼Œç„¶åä¾æ¬¡æŠŠaiå¡«å…¥æ•°ç»„ï¼Œå…ˆå¡«å¶æ•°å†å¡«å¥‡æ•°ã€‚</p><h3 id="ã€nçš„é™¤æ•°æ’ç¯ä½¿ç›¸é‚»ä¸äº’è´¨ã€‘"><a href="#ã€nçš„é™¤æ•°æ’ç¯ä½¿ç›¸é‚»ä¸äº’è´¨ã€‘" class="headerlink" title="ã€nçš„é™¤æ•°æ’ç¯ä½¿ç›¸é‚»ä¸äº’è´¨ã€‘"></a>ã€nçš„é™¤æ•°æ’ç¯ä½¿ç›¸é‚»ä¸äº’è´¨ã€‘</h3><ul><li>ã€æ„é€ ,æ•°è®ºã€‘CF671E ç»™ä¸€ä¸ªæ•°å­—nï¼Œåˆ—å‡ºnçš„æ‰€æœ‰å¤§äº1çš„é™¤æ•°ï¼Œä¹‹åæŠŠè¿™äº›é™¤æ•°æŒ‰ä¸€å®šé¡ºåºæ’æˆç¯ï¼Œè¦æ±‚ä¸¤ä¸ªç›¸é‚»çš„æ•°å­—éƒ½ä¸äº’è´¨ï¼Œè¿˜æä¾›ä¸€ç§æ“ä½œï¼Œå°±æ˜¯åœ¨ç›¸é‚»çš„ä¸¤ä¸ªæ•°å­—$a_i,a_j$ä¸­æ’å…¥ä»–ä»¬$lcm(a_i,a_j)$ï¼Œé—®æœ€å°‘è¿›è¡Œå¤šå°‘æ¬¡æ“ä½œå¯ä»¥ä½¿å¾—ç¯æ»¡è¶³æ¡ä»¶ï¼Ÿè¦æ±‚è¾“å‡ºåˆå§‹çš„ç¯æ’åˆ—åŠæ“ä½œæ¬¡æ•°ã€‚é™¤æ•°çš„æ•°é‡é¢˜ç›®ä¿è¯ä¸è¶…è¿‡2e5</li></ul><p><a href="https://codeforces.com/contest/1419/problem/E">https://codeforces.com/contest/1419/problem/E</a></p><p>é¦–å…ˆæœ‰ä¸€ä¸ªç»“è®ºï¼šåªæœ‰næ˜¯ç”±ä¸¤ä¸ªä¸åŒè´¨å› å­ç»„æˆæ—¶ï¼Œéœ€è¦ä¸€æ¬¡æ“ä½œã€‚å…ˆ$O(n\sqrt{n})$æ‰¾å‡ºnæ‰€æœ‰çš„è´¨å› å­åŠå‡ºç°æ¬¡æ•°ï¼Œå¹¶ç¼–å·ï¼Œå¦å¤–çš„æƒ…å†µï¼Œä¾ç…§ç±»ä¼¼å¦‚ä¸‹çš„æ’åˆ—æ­å‡ºâ€œéª¨æ¶â€ï¼š$1,12,2,23,3,34,4,41$ï¼Œå¹¶æŠŠè¿™äº›æ•°å­—å­˜è¿›mapä¸­é˜²æ­¢ä¹‹åé‡å¤ï¼Œæˆ‘ä»¬å‘ç°,å¯ä»¥æŠŠæ‰€æœ‰å«æœ‰prim[1]çš„é™¤æ•°éƒ½æ”¾åœ¨$prim_1,prim_1\cdot prim_2$ä¹‹é—´ï¼ŒåŒç†å¯ä»¥æŠŠæ‰€æœ‰å«æœ‰prim[2]çš„é™¤æ•°æ”¾åœ¨$prim_2,prim_2\cdot prim_3$ä¹‹é—´ã€‚æˆ‘ä»¬çŸ¥é“é™¤æ•°çš„æ•°é‡ä¸è¶…è¿‡2e5,å› æ­¤ç›´æ¥é€šè¿‡dfsæ‰¾åˆ°æ‰€æœ‰é™¤æ•°(ä¼¼ä¹ä¹Ÿå¯ä»¥ä¸ç”¨dfs,ä½†æ˜¯æˆ‘çš„æ–¹æ³•å†™dfsæ¯”è¾ƒæ–¹ä¾¿ï¼‰ï¼Œå¹¶ä¸”åœ¨æœç´¢è¿‡ç¨‹ä¸­éšä¾¿è®°å½•å®ƒçš„ä¸€ä¸ªå› å­iï¼Œæ¨å…¥å¯¹åº”çš„vector[i]ä¸­ï¼Œæœ€åç»“æœå°±æ˜¯$1,vec[1],12,2,vec[2],23,3,vec[3],34,4,vec[4],41$</p><h3 id="ã€æ’åˆ—çš„é€†åºæ•°ã€‘"><a href="#ã€æ’åˆ—çš„é€†åºæ•°ã€‘" class="headerlink" title="ã€æ’åˆ—çš„é€†åºæ•°ã€‘"></a>ã€æ’åˆ—çš„é€†åºæ•°ã€‘</h3><ul><li>ã€æ•°å­¦ã€‘DBPK2-1004 ç»™æ•°å­—nï¼Œä¸ºé•¿åº¦ä¸ºnçš„æ’åˆ—åˆå§‹ä¸º$1,2,3,4â€¦.n$å³å­—å…¸åºæœ€å°çš„æ’åˆ—ï¼Œmæ¬¡æŸ¥è¯¢ï¼Œæ¯æ¬¡æŸ¥è¯¢è®©nçš„æ’åˆ—æŒ‰å­—å…¸åºåç§»$x_i$æ¬¡ï¼Œå¹¶è¾“å‡ºç§»åŠ¨åçš„é€†åºæ•°ã€‚</li></ul><p><a href="https://www.dingbacode.com/contest/242/problem/1004">https://www.dingbacode.com/contest/242/problem/1004</a></p><p>ç ”ç©¶è§„å¾‹åå‘ç°ï¼Œç”¨ä¸€ä¸ªç‰¹æ®Šçš„è¿›åˆ¶æ¥è¡¨ç¤ºé€†åºæ•°çš„ä¸€ç§æ’åˆ—ï¼Œæ¯”å¦‚$1,2,3,4$ä¸º0000ï¼Œ$1,2,4,3$ä¸º0010ï¼Œ$1,3,2,4$ä¸º0100ï¼Œè¿™ä¸ªæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿæˆ‘çš„è¿™ç§è¿›åˆ¶æ˜¯ï¼Œç¬¬iä½ä¸Šé€¢iè¿›1ï¼è¿™æ ·ä¸€æ¥æ’åˆ—çš„é€†åºæ•°å³ä¸ºè¿™ä¸ªè¿›åˆ¶æ•°æ¯ä¸ªä½ä¸Šçš„æ•°å­—ä¹‹å’Œï¼šæ¯”å¦‚$1,3,4,2$ä½0110ï¼Œåˆ™é€†åºæ•°ä¸º$1+1=2$ã€‚éå¸¸ç¥å¥‡</p><ul><li>ã€æ•°å­¦,DPã€‘DBPK5-1001 æ±‚é•¿åº¦ä¸ºnçš„æ’åˆ—çš„æ‰€æœ‰é€†åºå¯¹ä¹‹å’Œå¯¹998244353å–æ¨¡çš„å€¼.</li></ul><p><a href="https://www.dingbacode.com/contest/289/problem/1001">https://www.dingbacode.com/contest/289/problem/1001</a></p><p>ç»“åˆä¹‹å‰å¯¹äºé€†åºæ•°çš„ç»“è®ºï¼Œæˆ‘æ¨å¾—å…¬å¼ï¼š$dp[i]=i\cdot dp[i-1]+\prod_{i=1}^{i-1}i\cdot\sum_{i=1}^{i-1}i$</p><h3 id="ã€å¿«é€Ÿè®¡æ•°äºŒè¿›åˆ¶ä¸­çš„1ã€‘ã€åºåˆ—å¤šå°‘å¯¹ai-ajå¼‚æˆ–å’ŒäºŒè¿›åˆ¶ä¸­1ä¸ºå¶æ•°ã€‘"><a href="#ã€å¿«é€Ÿè®¡æ•°äºŒè¿›åˆ¶ä¸­çš„1ã€‘ã€åºåˆ—å¤šå°‘å¯¹ai-ajå¼‚æˆ–å’ŒäºŒè¿›åˆ¶ä¸­1ä¸ºå¶æ•°ã€‘" class="headerlink" title="ã€å¿«é€Ÿè®¡æ•°äºŒè¿›åˆ¶ä¸­çš„1ã€‘ã€åºåˆ—å¤šå°‘å¯¹ai,ajå¼‚æˆ–å’ŒäºŒè¿›åˆ¶ä¸­1ä¸ºå¶æ•°ã€‘"></a>ã€å¿«é€Ÿè®¡æ•°äºŒè¿›åˆ¶ä¸­çš„1ã€‘ã€åºåˆ—å¤šå°‘å¯¹ai,ajå¼‚æˆ–å’ŒäºŒè¿›åˆ¶ä¸­1ä¸ºå¶æ•°ã€‘</h3><ul><li>ã€æ•°å­¦ã€‘ DPPK5 ç»™åºåˆ—aï¼Œé—®æœ‰å¤šå°‘å¯¹aiå’Œajä½¿å¾—$a_i\oplus a_j$äºŒè¿›åˆ¶ä¸Šæœ‰å¶æ•°ä¸ª1</li></ul><p><a href="https://www.dingbacode.com/contest/289/problem/1002">https://www.dingbacode.com/contest/289/problem/1002</a></p><p>å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œåªè¦æ±‚aiäºŒè¿›åˆ¶ä¸­çš„1å’ŒajäºŒè¿›åˆ¶ä¸­çš„1æ•°é‡å’Œä¸ºå¶æ•°å³å¯ã€‚ä½†æ˜¯å¦‚æœç”¨é™¤äºŒæ¨¡äºŒçš„æ–¹æ³•ä¼šè¢«å¡ï¼Œ(1000ms/1500ms)æ‰€ä»¥æœ‰ä¸€ç§æ›´å¿«çš„æ±‚1æ•°é‡çš„æ–¹æ³•ï¼šè¿™æ ·æ¯æ¬¡å¿…å®šèƒ½å»æ‰äºŒè¿›åˆ¶ä¸­çš„ä¸€ä¸ª1ï¼</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">while(hc){cnt+=1;    hc&amp;=(hc-1);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ã€map-lt-vector-xxx-gt-ä»£æ›¿å­—å…¸æ ‘ã€‘ã€åˆ†å‰²åºåˆ—ä½¿æ¯æ®µä»»ä¸¤ä¸ªç§¯ä¸æ˜¯å¹³æ–¹æ•°ã€‘"><a href="#ã€map-lt-vector-xxx-gt-ä»£æ›¿å­—å…¸æ ‘ã€‘ã€åˆ†å‰²åºåˆ—ä½¿æ¯æ®µä»»ä¸¤ä¸ªç§¯ä¸æ˜¯å¹³æ–¹æ•°ã€‘" class="headerlink" title="ã€map<vector,xxx>ä»£æ›¿å­—å…¸æ ‘ã€‘ã€åˆ†å‰²åºåˆ—ä½¿æ¯æ®µä»»ä¸¤ä¸ªç§¯ä¸æ˜¯å¹³æ–¹æ•°ã€‘"></a>ã€map&lt;vector,xxx&gt;ä»£æ›¿å­—å…¸æ ‘ã€‘ã€åˆ†å‰²åºåˆ—ä½¿æ¯æ®µä»»ä¸¤ä¸ªç§¯ä¸æ˜¯å¹³æ–¹æ•°ã€‘</h3><ul><li>ã€æ•°å­¦ã€‘ CF708E1 ç»™åºåˆ—aï¼Œä¸æ”¹å˜é¡ºåºåˆ†å‰²æˆå‡ æ®µï¼Œè¦æ±‚æ¯æ®µä¸­ä¸èƒ½å­˜åœ¨aiå’Œajä½¿å¾—$a_i\cdot a_j=x^2$å³ä¸èƒ½æ˜¯</li></ul><p>ä¸€ä¸ªå¹³æ–¹æ•°ã€‚é—®æœ€å°‘åˆ†å‰²æˆå‡ æ®µã€‚aièŒƒå›´1e7ã€‚</p><p><a href="https://codeforces.com/contest/1497/problem/E1">https://codeforces.com/contest/1497/problem/E1</a></p><p>å…¶å®è¿™é¢˜æ€è·¯ä½¿å¥½æƒ³çš„ï¼Œåœ¨2-sqrt(1e7)ä¹‹ä¸­åªæœ‰500ä»¥å†…çš„è´¨å› æ•°ï¼Œaiä¸ºæœ€å¤š8ä¸ªè´¨å› æ•°ç›¸ä¹˜ã€‚æ‰€ä»¥æˆ‘ä»¬æ‹†åˆ†æ¯ä¸ªaiï¼ˆå”¯ä¸€åˆ†è§£å®šç†ï¼‰å¹¶è®°å½•åœ¨å“ªäº›è´¨æ•°ä¸Šçš„æ¬¡æ•°ä¸ºå¥‡æ•°ã€‚ä¹‹åç”¨å­—å…¸æ ‘æˆ–è€…è¿™ä¸ªmapç»Ÿè®¡éƒ½è¡Œï¼Œé‡åˆ°å†²çªåæ¸…ç©ºmapå¹¶è®©res++.</p><h3 id="ã€æŒ‰è§„åˆ™å–å®ŒçŸ³å­ã€‘"><a href="#ã€æŒ‰è§„åˆ™å–å®ŒçŸ³å­ã€‘" class="headerlink" title="ã€æŒ‰è§„åˆ™å–å®ŒçŸ³å­ã€‘"></a>ã€æŒ‰è§„åˆ™å–å®ŒçŸ³å­ã€‘</h3><ul><li>ã€è´ªå¿ƒã€‘CF696D æœ‰nå †çŸ³å­(2e5)ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥ä»ç›¸é‚»çš„ä¸¤å †çŸ³å¤´é‡Œå„å–ä¸€ä¸ªï¼Œè¿˜æ”¯æŒä¸€ç§è¶…çº§æ“ä½œï¼Œåœ¨æ¯”èµ›å¼€å§‹å‰é€‰æ‹©ç›¸é‚»çš„ä¸¤å †çŸ³å­è¿›è¡Œäº¤æ¢ï¼Œè¶…çº§æ“ä½œåªèƒ½è¿›è¡Œä¸€æ¬¡ï¼Œé—®æ˜¯å¦èƒ½æŠŠçŸ³å¤´å–å®Œã€‚</li></ul><p><a href="https://codeforces.com/contest/1474/problem/D">https://codeforces.com/contest/1474/problem/D</a></p><p>è€ƒè™‘å¦‚æœæ²¡æœ‰è¶…çº§æ“ä½œæ€ä¹ˆå†™ï¼šè´ªå¿ƒåœ°ä»1åˆ°næ‰«ä¸€éï¼Œæ¯æ¬¡ç”¨å‰é¢çš„çŸ³å¤´å‡åœ¨åé¢çš„çŸ³å¤´ä¸Šï¼Œå¦‚æœå‰é¢çš„å¤šäºåé¢çš„ï¼Œåˆ™å¤±è´¥ã€‚</p><p>æ ¸å¿ƒï¼šå¦‚æœäº¤æ¢äº†iå’Œi+1ï¼Œé‚£ä¹ˆ1åˆ°i-1ä»¥åŠi+2åˆ°næ˜¯ä¸å—å½±å“çš„ï¼Œæ¯æ¬¡äº¤æ¢åªè¦æ¨¡æ‹Ÿè¿™ç§ä¸¤è¾¹å‡‘è¿‡æ¥åªå‰©ä¸‹ä¸­é—´çš„iå’Œi+1çš„æƒ…å†µã€‚</p><p>é¦–å…ˆæ­£ç€åç€éƒ½æ‰«ä¸€éï¼Œå¤„ç†å‡ºbå’Œcä¸¤ä¸ªæ•°ç»„(å³ä»å¼€å¤´åˆ°å½“å‰èŠ‚ç‚¹è´ªå¿ƒä¸‹æ¥çš„æƒ…å†µ)ï¼Œå¦‚æœæ‰«åˆ°ä¸€ä¸ªä½ç½®å‘ç°b[i]&gt;b[i+1],è¿™æ—¶è¯´æ˜æ­£ç€æœ€å¤šåªèƒ½èµ°åˆ°è¿™é‡Œäº†ï¼Œåè¿‡æ¥åŒç†ã€‚æˆ‘ä»¬è€ƒè™‘æ‰€æœ‰å¯è¡Œçš„ä½ç½®ï¼Œäº¤æ¢a[i]å’Œa[i+1],å¹¶ä¸”è®©a[i]-=b[i-1],a[i+1]-=c[i+2]ï¼ˆä¿è¯bä¸­i-1å’Œcä¸­i+1æ˜¯æœ‰æ•ˆå€¼ï¼‰ï¼Œç„¶åçœ‹a[i]å’Œa[i+1]æ˜¯å¦ç›¸ç­‰ä¸”å¤§äº0å³å¯ï¼</p><h3 id="ã€æ‰¾åæ ‡xyä½¿ç¦»æ‰€æœ‰ç‚¹è·ç¦»-xi-xj-yi-yj-å’Œæœ€å°ã€‘"><a href="#ã€æ‰¾åæ ‡xyä½¿ç¦»æ‰€æœ‰ç‚¹è·ç¦»-xi-xj-yi-yj-å’Œæœ€å°ã€‘" class="headerlink" title="ã€æ‰¾åæ ‡xyä½¿ç¦»æ‰€æœ‰ç‚¹è·ç¦»|xi-xj|+|yi-yj|å’Œæœ€å°ã€‘"></a>ã€æ‰¾åæ ‡xyä½¿ç¦»æ‰€æœ‰ç‚¹è·ç¦»|xi-xj|+|yi-yj|å’Œæœ€å°ã€‘</h3><ul><li>ã€æ€ç»´ã€‘CF703B ç»™n(1e3)ä¸ªç‚¹çš„xyåæ ‡(1e9),æ‰¾åˆ°åˆé€‚çš„ä½ç½®å»ºç«‹â€œåšç‰©é¦†â€ä½¿å¾—æ‰€æœ‰ç‚¹åˆ°åšç‰©é¦†çš„è·ç¦»ï¼ˆ|xi-xj|+|yi-yj|)ä¹‹å’Œæœ€å°ï¼Œé—®æœ‰å¤šå°‘ä¸ªè¿™æ ·çš„ç‚¹.</li></ul><p><a href="https://codeforces.com/contest/1486/problem/B">https://codeforces.com/contest/1486/problem/B</a></p><p>æ²¡é”™è¿™æ˜¯ä¸ªbé¢˜ï¼Œä½†æ˜¯æˆ‘ç¡®å®ä¸ä¼šå†™qaqã€‚æŠŠæ‰€æœ‰ç‚¹æŠ•å°„åˆ°xè½´å’Œyè½´ä¸Šçš„æŠ•å½±è®°å½•ï¼Œæ’åºåæ‰¾ä¸­ä½æ•°ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªä¸­ä½æ•°aiå’Œai+1,é‚£ä¹ˆåœ¨è¿™[ai,ai+1]è¿™ä¸ªåŒºé—´å†…çš„æ‰€æœ‰åæ ‡éƒ½æ˜¯å¯è¡Œçš„ã€‚åŒç†æ‰¾åˆ°yè½´ä¸Šçš„ä¸­ä½æ•°ï¼Œä¸¤ä¸ªåŒºé—´é•¿åº¦ç›¸ä¹˜å³ç»“æœã€‚</p><p>è¿™é¢˜ä¹‹æ‰€ä»¥åšä¸å‡ºæ¥ï¼Œæˆ‘è§‰å¾—æ˜¯æ€»æƒ³ç”¨ç®—æ³•çš„è§’åº¦å»å†™ï¼Œä½†æ˜¯å…¶å®è¿™æ˜¯ç®€å•çš„ä»äºŒç»´å¾€ä¸€ç»´ä¸Šçš„è½¬åŒ–çš„æ€æƒ³ã€‚æˆ‘ä»¬æŠŠæ€»è·ç¦»æ‹†åˆ†æˆxè½´ä¸Šçš„è·ç¦»å’Œyè½´ä¸Šçš„è·ç¦»ï¼Œè¿™æ ·ä¾¿è½¬åŒ–æˆäº†ä¸€ç»´ç›´çº¿ä¸Šçš„è·ç¦»ä¹‹å’Œé—®é¢˜ï¼Œå¯¹äºè¿™ç±»é—®é¢˜æˆ‘ä»¬å°±çŸ¥é“è¯¥ç”¨ä¸­ä½æ•°äº†ã€‚</p><h3 id="ã€æŒ‰è§„åˆ™æ„é€ æ ‘-æœ€å¤šèƒ½ç»™å¤šå°‘ç‚¹æ¶‚è‰²ã€‘"><a href="#ã€æŒ‰è§„åˆ™æ„é€ æ ‘-æœ€å¤šèƒ½ç»™å¤šå°‘ç‚¹æ¶‚è‰²ã€‘" class="headerlink" title="ã€æŒ‰è§„åˆ™æ„é€ æ ‘,æœ€å¤šèƒ½ç»™å¤šå°‘ç‚¹æ¶‚è‰²ã€‘"></a>ã€æŒ‰è§„åˆ™æ„é€ æ ‘,æœ€å¤šèƒ½ç»™å¤šå°‘ç‚¹æ¶‚è‰²ã€‘</h3><ul><li>ã€dp,æ ‘ã€‘CF652D ç»™ä¸€ç§æ ‘å«RDBï¼Œ1çº§çš„RDBåªæœ‰ä¸€ä¸ªç‚¹ï¼ŒRDBçš„ç­‰çº§æ¯æ¬¡å¾€ä¸Šå‡çº§ä¸€æ¬¡æ—¶:</li></ul><p>å¦‚æœç‚¹uæ²¡æœ‰å­©å­ï¼Œåˆ™ç»™å®ƒåˆ›é€ ä¸€ä¸ªå­©å­ï¼›å¦‚æœç‚¹uæœ‰ä¸€ä¸ªå­©å­ï¼Œåˆ™ç»™å®ƒå¢åŠ ä¿©å­©å­ï¼›å¦‚æœç‚¹uæœ‰ä¸‰ä¸ªå­©å­ï¼Œåˆ™ä¸åŠ¨å®ƒã€‚</p><img src="\img\zuoti\capture_20210324164919694.bmp" alt="capture_20210324164919694" style="zoom:50%;"><p>æ¯ç»„è¾“å…¥ç»™ä¸€ä¸ªnçº§çš„RDBï¼Œæ‰€æœ‰ç‚¹éƒ½æ˜¯ç»¿è‰²ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€ä¸ªâ€œé¸¡çˆªâ€å³ä¸€ä¸ªç‚¹è¿ç€ä¸‰ä¸ªå„¿å­ä¸”å…¨éƒ¨ä¸ºç»¿è‰²çš„å­å›¾ï¼ŒæŠŠæ•´ä¸ªâ€œé¸¡çˆªâ€æŸ“é»„ï¼Œé—®æœ€å¤šèƒ½æŸ“é»„å¤šå°‘ä¸ªç‚¹ã€‚</p><p><a href="https://codeforces.com/contest/1369/problem/D">https://codeforces.com/contest/1369/problem/D</a></p><p>ç­”ï¼šiçº§çš„æ ‘å…¶å®å°±æ˜¯ä¸¤é¢—i-2çº§æ ‘å’Œä¸€é¢—i-1çº§æ ‘ç»„æˆã€‚</p><p><img src="\img\zuoti\capture_20210324171647672.bmp" alt="capture_20210324171647672" style="zoom:33%;"><img src="\img\zuoti\capture_20210324172049435.bmp" alt="capture_20210324172049435" style="zoom:50%;"> </p><p>å› æ­¤åˆæ­¥å¯å¾—åˆ°é€’æ¨å¼$cnt_i=2\cdot cnt_{i-2}+cnt_{i-1}$ï¼Œå¦å¤–è¿˜è¦ç»´æŠ¤ä¸€ä¸ªtopæ•°ç»„ï¼Œè¡¨ç¤ºiçº§æ ‘çš„æ ¹æ˜¯å¦è¢«ä½¿ç”¨ï¼Œå¦‚æœ$top_{i-1}$å’Œ$top_{i-1}$éƒ½ä¸º0ï¼Œåˆ™içº§æ ‘çš„æ ¹å’Œè¿™ä¸‰ä¸ªç‚¹å¯ä»¥å†æ„æˆä¸€ä¸ªé¸¡çˆªï¼ˆæœ€åä¸€å¼ å›¾è¿™æ ·ï¼‰ï¼Œä¸”$top_i=1$ã€‚åªéœ€è¦ä¸€å¼€å§‹é¢„å¤„ç†å³å¯ã€‚</p><h3 id="ã€ä¸‰ç§æœ¨æ£é€‰ä¸¤ç§æ„é€ çŸ©å½¢-ä½¿ç”¨å®Œæœ¨æ£æ€»é¢ç§¯æœ€å¤§ã€‘"><a href="#ã€ä¸‰ç§æœ¨æ£é€‰ä¸¤ç§æ„é€ çŸ©å½¢-ä½¿ç”¨å®Œæœ¨æ£æ€»é¢ç§¯æœ€å¤§ã€‘" class="headerlink" title="ã€ä¸‰ç§æœ¨æ£é€‰ä¸¤ç§æ„é€ çŸ©å½¢,ä½¿ç”¨å®Œæœ¨æ£æ€»é¢ç§¯æœ€å¤§ã€‘"></a>ã€ä¸‰ç§æœ¨æ£é€‰ä¸¤ç§æ„é€ çŸ©å½¢,ä½¿ç”¨å®Œæœ¨æ£æ€»é¢ç§¯æœ€å¤§ã€‘</h3><ul><li>ã€DPã€‘EDU93D ç»™r,g,bä¸‰ä¸ªæ•°å­—è¡¨ç¤ºä¸‰ç§ç±»æœ¨æ£çš„æ•°é‡(&lt;=200)ä¹‹åè¯»å…¥æ¯ç§æœ¨æ£çš„æ‰€æœ‰æœ¨æ£ã€‚æ¯æ¬¡å¯ä»¥å–ä¸¤ç§ä¸åŒé¢œè‰²çš„æœ¨æ£ï¼Œä»¥ä¹‹ä¸ºé•¿å®½æ„é€ ä¸€ä¸ªçŸ©å½¢ï¼Œé‡å¤ç›´åˆ°æœ¨æ£ç”¨å°½ï¼Œé—®æœ€å¤§çš„æ€»é¢ç§¯ã€‚</li></ul><p><a href="https://codeforces.com/contest/1398/problem/D">https://codeforces.com/contest/1398/problem/D</a></p><p>ç”¨$O(n^3)$çš„åŠ¨æ€è§„åˆ’å†™ï¼Œæ¯ç§æœ¨æ£ä»å¤§åˆ°å°(ä»”ç»†æƒ³ä¸€ä¸‹ä»å°åˆ°å¤§ä¹Ÿè¡Œ)æ’åºï¼ˆå› ä¸ºåé¢æ€»ä¼šæœ‰ä¸€äº›ç”¨ä¸å®Œçš„æœ¨æ£ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ä¼˜å…ˆä½¿ç”¨é•¿çš„æœ¨æ£ï¼‰ï¼Œæ–¹æ³•æœ‰ç‚¹ç±»ä¼¼èƒŒåŒ…çš„çŠ¶æ€è½¬ç§»ã€‚æˆ‘ä»¬ç”¨$dp_{i,j,k}$è¡¨ç¤ºç”¨å‰iä¸ªræœ¨æ£ï¼ˆå…¨éƒ½ä½¿ç”¨ï¼‰ï¼Œå‰jä¸ªgæœ¨æ£ï¼Œå‰kä¸ªbæœ¨æ£æ„é€ çš„æœ€å¤§æ€»é•¿åº¦ã€‚</p><p>æˆ‘ä»¬çŸ¥é“è¿™ä¸ªdpä¸­æœ‰å¾ˆå¤šçŠ¶æ€éƒ½æ˜¯è¾¾ä¸åˆ°çš„ï¼Œæ¯”å¦‚$dp_{1,0,0}$æ˜¾ç„¶æ˜¯è¾¾ä¸åˆ°çš„çŠ¶æ€</p><p>å¹¶ä¸”å¦‚æœè¦æ±‚$dp_{i,j,k}$,æˆ‘ä»¬ä¸çŸ¥é“ä»–æ˜¯ä»$dp{i-1,j-1,k},dp_{i-1,j,k-1},dp_{i,j-1,k-1}$ä¸­çš„å“ªä¸ªæ‹¼æ¥ä¸Šæ¥çš„ã€‚</p><p>å› æ­¤æˆ‘ä»¬ç”¨$dp{i,j,k}$å¾€ä¸Šå»æ¨$dp_{i+1,j+1,k}$ç­‰ç­‰ã€‚æ‰€ä»¥æœ‰è½¬ç§»æ–¹ç¨‹ï¼š</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">if(i+1&lt;=c[1]&amp;&amp;j+1&lt;=c[2])    dp[i+1][j+1][k]=max(dp[i+1][j+1][k],dp[i][j][k]+(ll)a[1][i+1]*a[2][j+1]); if(i+1&lt;=c[1]&amp;&amp;k+1&lt;=c[3])    dp[i+1][j][k+1]=max(dp[i+1][j][k+1],dp[i][j][k]+(ll)a[1][i+1]*a[3][k+1]);if(j+1&lt;=c[2]&amp;&amp;k+1&lt;=c[3])    dp[i][j+1][k+1]=max(dp[i][j+1][k+1],dp[i][j][k]+(ll)a[2][j+1]*a[3][k+1]);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æƒ³äº†ä¸€ä¸‹ä¸ºä»€ä¹ˆä»å°åˆ°å¤§æ’åºä¹Ÿæ˜¯å¯ä»¥çš„ï¼šä¸‰ç§ç±»å‹çš„æœ¨æ£ï¼Œä¸€å®šæœ‰ä¸¤ç§æœ¨æ£æ˜¯è¦å…¨éƒ¨ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€ç§æœ¨æ£å¯ä»¥ä¸ç”¨å®Œï¼Œè€Œè¿™äº›ä¸ç”¨å®Œçš„éƒ½æ˜¯æœ€å°çš„é‚£å‡ ä¸ªã€‚</p><p>å› ä¸ºä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œ$dp_{0,0,123}$ä¹‹ç±»çš„éƒ½æ˜¯0ï¼Œä»è¿™ä¸ªç‚¹å¾€ä¸Šdpæ¨å‡ºçš„ç»“æœï¼Œä¹Ÿå°±æ˜¯bç±»æœ¨æ£å‰123ä¸ªéƒ½ä¸ä½¿ç”¨å¾—åˆ°çš„ç»“æœã€‚æ‰€ä»¥ä»å°åˆ°å¤§æ’åºä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><h3 id="ã€æ—…è¡Œå•†é—®é¢˜-è¾¹è´¹ç”¨ä¸ºmax-a-j-a-i-c-i-ã€‘"><a href="#ã€æ—…è¡Œå•†é—®é¢˜-è¾¹è´¹ç”¨ä¸ºmax-a-j-a-i-c-i-ã€‘" class="headerlink" title="ã€æ—…è¡Œå•†é—®é¢˜,è¾¹è´¹ç”¨ä¸ºmax(a[j]-a[i],c[i])ã€‘"></a>ã€æ—…è¡Œå•†é—®é¢˜,è¾¹è´¹ç”¨ä¸ºmax(a[j]-a[i],c[i])ã€‘</h3><ul><li>ã€DPã€‘CF712E æœ‰n(1e5)ä¸ªåŸå¸‚ï¼Œæ¯ä¸ªåŸå¸‚æœ‰aiå’Œciä¸¤ä¸ªå±æ€§ï¼Œä»åŸå¸‚iåˆ°åŸå¸‚jçš„è´¹ç”¨ä¸º$max(c_i,a_j-c_i)$,é—®ä»ä»»ä¸€åŸå¸‚å¼€å§‹ç»è¿‡æ‰€æœ‰åŸå¸‚å†å›åˆ°è¯¥åŸå¸‚æ‰€éœ€è¦çš„æœ€å°è´¹ç”¨ã€‚</li></ul><p><a href="https://codeforces.com/contest/1504/problem/E">https://codeforces.com/contest/1504/problem/E</a></p><p>æˆ‘ä»¬è§‚å¯Ÿè¿™æ¡å¼å­ï¼š$cost(i,j)=max(c_i,a_j-c_i)$,å¯ä»¥çŸ¥é“$c_i$æ˜¯é€ƒä¸æ‰çš„ï¼Œå› æ­¤æˆ‘ä»¬æŠŠcå…¨éƒ¨éƒ½å…ˆåŠ åˆ°ç»“æœ$res$ä¸Šï¼Œè¿™æ ·æ¯æ¡è¾¹çš„è´¹ç”¨å°±å˜æˆäº†$cost(i,j)=max(0,a_j-(a_i+c_i))$ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å½¢è±¡åœ°æŠŠaiç†è§£æˆæ¥¼æˆ¿çš„é«˜åº¦ï¼Œciç†è§£æˆè¿™ä¸ªæ¥¼æˆ¿çš„æ¢¯å­é«˜åº¦ï¼Œæˆ‘ä»¬åœ¨æ¥¼æˆ¿iä¸Šæ—¶ï¼Œå¦‚æœæ¥¼æˆ¿é«˜åº¦å’Œæ¢¯å­é«˜åº¦ä¹‹å’Œé«˜äºæ¥¼æˆ¿jçš„é«˜åº¦ï¼Œåˆ™å¯ä»¥å…è´¹ä»içˆ¬åˆ°jï¼Œå¦åˆ™åˆ™éœ€è¦è¡¥ä¸Šè¿™äº›é«˜åº¦çš„å·®ã€‚å³ä»æ¥¼é«˜+æ¢¯å­è¾ƒé«˜çš„æ¥¼æˆ¿çˆ¬åˆ°ä½çš„æ˜¯ä¸éœ€è¦è´¹ç”¨çš„ã€‚</p><p>ä»¥aä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œcä¸ºç¬¬äºŒå…³é”®å­—å¯¹æˆ¿å­æ’åºã€‚</p><p>å› æ­¤æˆ‘ä»¬åˆ†ä¸¤éƒ¨åˆ†ï¼š</p><p>ç¬¬ä¸€éƒ¨åˆ†å…ˆä»æœ€ä½çš„æ¥¼å±‚çˆ¬åˆ°æœ€é«˜çš„æ¥¼å±‚ï¼ˆä¸­é—´ä½¿è´¹ç”¨å°½é‡å°ï¼‰ã€‚</p><p>ç¬¬äºŒéƒ¨åˆ†åªéœ€è¦æŠŠæ²¡çˆ¬è¿‡çš„æ¥¼æˆ¿ä»é«˜å¾€ä½æ’åˆ—ï¼Œæœ€åèµ°å›æœ€ä½çš„æ¥¼æˆ¿å³å¯ï¼ˆè¿™éƒ¨åˆ†ä¸éœ€è¦ä»»ä½•è´¹ç”¨ï¼‰ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int now = ac[1].ft+ac[1].sd;//nowæ˜¯å½“å‰æˆ¿å­+æ¢¯å­çš„é«˜åº¦   //ä¹‹åæ¯æ­¥çš„æ¶ˆè€—çœ‹ä½œmax(0,aj-(ai+ci))   rep(i,2,n){       if(ac[i].ft&gt;=now)//é€šè¿‡æ¢¯å­ä¸Šå»çš„æƒ…å†µ           res += ac[i].ft-now;       //ä¸åŠ çš„è¿™äº›æ˜¯è¾¾åˆ°æœ€é«˜ä¹‹åè®¿é—®çš„       //å¦‚æœè¿™ä¸ªæ¥¼å¯ä»¥ä½¿nowæ›´é«˜ï¼Œä¹Ÿåº”è¯¥åœ¨ä¸­é—´å…è´¹ç»è¿‡       now = max(now,ac[i].ft+ac[i].sd);   }   //ç¬¬äºŒéƒ¨åˆ†ç»è¿‡çš„æ¥¼å…¨éƒ¨å…è´¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ã€kä¸ªå­—æ¯æ„é€ å­—ç¬¦ä¸²ä½¿-a-i-a-j-amp-amp-a-i-1-a-j-1-çš„ijå°½å¯èƒ½å°‘ã€‘"><a href="#ã€kä¸ªå­—æ¯æ„é€ å­—ç¬¦ä¸²ä½¿-a-i-a-j-amp-amp-a-i-1-a-j-1-çš„ijå°½å¯èƒ½å°‘ã€‘" class="headerlink" title="ã€kä¸ªå­—æ¯æ„é€ å­—ç¬¦ä¸²ä½¿(a[i]==a[j]&amp;&amp;a[i+1]==a[j+1])çš„ijå°½å¯èƒ½å°‘ã€‘"></a>ã€kä¸ªå­—æ¯æ„é€ å­—ç¬¦ä¸²ä½¿(a[i]==a[j]&amp;&amp;a[i+1]==a[j+1])çš„ijå°½å¯èƒ½å°‘ã€‘</h3><ul><li>ã€æ„é€ ã€‘EDU107D ç»™ä¸¤ä¸ªæ•°å­—nå’Œkï¼Œç”¨å­—æ¯è¡¨çš„å‰kä¸ªå­—æ¯æ„é€ ä¸€ä¸ªé•¿åº¦ä¸ºnçš„å­—ç¬¦ä¸²ï¼Œæ¯æœ‰ä¸€å¯¹i!=jä½¿å¾—$a_i=a_j,a_{i+1}=a_{j+1}$ï¼Œåˆ™è¯¥ä¸²çš„cost+1,é—®æœ€å°costçš„æ„é€ ä¸ºï¼Ÿ</li></ul><p><a href="https://codeforces.com/contest/1511/problem/D">https://codeforces.com/contest/1511/problem/D</a></p><p>å…ˆè€ƒè™‘å¦‚ä½•æ„é€ å®Œå…¨æ— è´¹ç”¨åœ°å­—ç¬¦ä¸²ï¼Ÿæ‰€æœ‰å­—æ¯åœ°ä¸¤ä¸¤ç»„åˆéƒ½èƒ½å¤Ÿå‡ºç°ï¼Œä¸€å…±æœ‰k*kç§ç»„åˆï¼Œè¿™äº›ç»„åˆéƒ½å‡ºç°åˆ™å¯ä»¥æ„æˆé•¿åº¦ä¸º$k^2+1$çš„ä¸²ï¼ˆè€ƒè™‘ä¸‰ä¸ªå­—æ¯åŒ…å«ä¸¤ç§ç»„åˆï¼Œå››ä¸ªå­—æ¯åŒ…å«3ç§ç»„åˆä»¥æ­¤ç±»æ¨ï¼‰.</p><p>è€ƒè™‘è¿™ç§æ„é€ :$aabacad,bbcbd,ccd,d$ï¼Œå³å¯¹äºæ¯ä¸ªå­—æ¯ï¼Œå…ˆè¾“å‡ºä¸€ä¸ªå®ƒè‡ªå·±ï¼Œå†åŠ ä¸Šå®ƒå’Œæ’åé¢çš„å„ç§å­—æ¯çš„ç»„åˆã€‚</p><h2 id="æ•°è®º"><a href="#æ•°è®º" class="headerlink" title="æ•°è®º"></a>æ•°è®º</h2><h3 id="ã€ç»Ÿè®¡xçš„æ‰€æœ‰é™¤æ•°ã€‘ã€æ±‚cÂ·lcm-a-b-dÂ·gcd-a-b-xâ€‹çš„abå¯¹æ•°ã€‘"><a href="#ã€ç»Ÿè®¡xçš„æ‰€æœ‰é™¤æ•°ã€‘ã€æ±‚cÂ·lcm-a-b-dÂ·gcd-a-b-xâ€‹çš„abå¯¹æ•°ã€‘" class="headerlink" title="ã€ç»Ÿè®¡xçš„æ‰€æœ‰é™¤æ•°ã€‘ã€æ±‚cÂ·lcm(a,b)-dÂ·gcd(a,b)=xâ€‹çš„abå¯¹æ•°ã€‘"></a>ã€ç»Ÿè®¡xçš„æ‰€æœ‰é™¤æ•°ã€‘ã€æ±‚cÂ·lcm(a,b)-dÂ·gcd(a,b)=xâ€‹çš„abå¯¹æ•°ã€‘</h3><ul><li>ã€æ•°è®ºã€‘EDU106D ç»™$c,d,x$ä¸‰ä¸ª1e7å†…çš„æ•°ï¼Œæ±‚æœ‰å¤šå°‘å¯¹$(a,b)$æ»¡è¶³$c\cdot lcm(a,b)-d\cdot gcd(a,b)=x$</li></ul><p><a href="https://codeforces.com/contest/1499/problem/D">https://codeforces.com/contest/1499/problem/D</a></p><p>æŠŠå¼å­å˜å½¢ï¼Œè®¾$a=L\cdot gcd(a,b),b=R\cdot gcd(a,b)$åˆ™å°†å¼å­å˜å½¢å¾—åˆ°$L\cdot R=\frac{\frac{x}{gcd(a,b)}+d\cdot gcd(a,b)}{c}$ï¼Œè§‚å¯Ÿå¼å­å¯ä»¥å‘ç°ï¼Œxå¿…é¡»æ˜¯gcdçš„å€æ•°ï¼Œå› æ­¤æˆ‘ä»¬$O(\sqrt{x})$æšä¸¾xçš„æ‰€æœ‰é™¤æ•°(æ¯”èµ›çš„æ—¶å€™ä»¥ä¸ºè¿™ä¸ªæ˜¯o(x)çš„),ä¹‹åå³è¾¹çš„å€¼å°±ç¡®å®šäº†.</p><p>æœ‰äº†$L\cdot R$çš„å€¼ï¼Œç„¶åè®¾$zyz[L\cdot R]$ä¸ºyçš„æ‰€æœ‰è´¨å› å­æ•°é‡,å…ˆç”¨ç±»ä¼¼åŸƒå¼ç­›çš„æ–¹æ³•ç­›å‡ºæ¯ä¸ªæ•°å­—çš„æœ‰å¤šå°‘ç§ä¸åŒçš„è´¨å› å­ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹$(L,R)$æœ‰$2^(zyz[L\cdot R])$å¯¹ã€‚</p><p>å“¦å¯¹ï¼Œå…³äºç»Ÿè®¡xæ‰€æœ‰é™¤æ•°çš„æ–¹æ³•ï¼šéå¸¸åŸºç¡€ï¼Œä½†æ˜¯æˆ‘å¿˜æ‰äº†</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">rep(i,1,sqr){    if(x%i==0){        vec.push_back(i);        if(i*i!=x) vec.push_back(x/i);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ã€ç»™ä¸€åºåˆ—-å¯æ’å…¥2-ai-aj-é—®èƒ½å¦å¾—åˆ°kã€‘"><a href="#ã€ç»™ä¸€åºåˆ—-å¯æ’å…¥2-ai-aj-é—®èƒ½å¦å¾—åˆ°kã€‘" class="headerlink" title="ã€ç»™ä¸€åºåˆ—,å¯æ’å…¥2*ai-aj,é—®èƒ½å¦å¾—åˆ°kã€‘"></a>ã€ç»™ä¸€åºåˆ—,å¯æ’å…¥2*ai-aj,é—®èƒ½å¦å¾—åˆ°kã€‘</h3><ul><li>ã€æ•°è®º,è£´èœ€å®šç†ã€‘CF698D ç»™ä¸€ä¸ªåºåˆ—aï¼Œé•¿åº¦2e5ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥é€‰å®šåºåˆ—ä¸­çš„ä»»æ„ä¸¤ä¸ªæ•°å­—x,y.å¯ä»¥æŠŠ2x-yæ’å…¥åºåˆ—ä¸­ï¼Œé—®èƒ½ä¸èƒ½é€šè¿‡è¿™ç§æ“ä½œæ‹¼å‡‘å‡ºkï¼ˆ1e18ï¼‰ã€‚</li></ul><p><a href="https://codeforces.com/problemset/problem/1477/A">https://codeforces.com/problemset/problem/1477/A</a></p><p>è£´èœ€å®šç†ï¼šæœ‰é0æ•°aå’Œbï¼Œåˆ™ä¸€å®šæœ‰ax+by=gcd(a,b)ä¸€å®šæœ‰æ•´æ•°è§£.(ä¹Ÿæ˜¯exgcdçš„å‰ç½®)</p><p>æˆ‘ä»¬æŠŠ$new = 2a-b$æ‹†åˆ†ä¸º$new = a+(a-b)$ ï¼Œè®¾$a=c+(c-d)$ï¼Œé‚£ä¹ˆé€’å½’å¯ä»¥å¾—åˆ°$new = c+(c-d)+(a-b)$,åé¢ä¹Ÿå¯ä»¥å†æ¥ä¸€å †(x-y),æ‰€ä»¥æˆ‘ä»¬æŠŠé—®é¢˜è½¬åŒ–æˆäº†ï¼š</p><p>æ˜¯å¦èƒ½ç”¨$\sum a_i-a_j=k-a_x$ã€‚ï¼ˆi,jéšä¾¿å–ï¼‰ã€‚å†ç»“åˆä¹‹å‰çš„è£´èœ€å®šç†ï¼Œæˆ‘ä»¬å…ˆç®—å‡ºæ‰€æœ‰$a_i-a_{i-1}$çš„gcdï¼Œå†æšä¸¾$a_x$ï¼Œçœ‹$k-a_x$èƒ½å¦è¢«gcdæ•´é™¤å³å¯ï¼Œå¤æ‚åº¦$O(n)$.</p><h3 id="ã€æŸ¥è¯¢l-råŒºé—´æœ€å°‘è¦æ‹†åˆ†æˆå‡ æ®µä½¿å­ä¸²å„å…ƒç´ äº’è´¨ã€‘"><a href="#ã€æŸ¥è¯¢l-råŒºé—´æœ€å°‘è¦æ‹†åˆ†æˆå‡ æ®µä½¿å­ä¸²å„å…ƒç´ äº’è´¨ã€‘" class="headerlink" title="ã€æŸ¥è¯¢l,råŒºé—´æœ€å°‘è¦æ‹†åˆ†æˆå‡ æ®µä½¿å­ä¸²å„å…ƒç´ äº’è´¨ã€‘"></a>ã€æŸ¥è¯¢l,råŒºé—´æœ€å°‘è¦æ‹†åˆ†æˆå‡ æ®µä½¿å­ä¸²å„å…ƒç´ äº’è´¨ã€‘</h3><ul><li>ã€æ•°è®º,å€å¢ã€‘CF717D ç»™1e5é•¿çš„åºåˆ—(aiä¹Ÿæ˜¯1e5èŒƒå›´)è¿›è¡Œ1e5æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡ç»™lå’Œrï¼Œé—®æœ€å°‘éœ€è¦æŠŠlåˆ°rè¿™ä¸€åŒºé—´çš„åºåˆ—æ‹†åˆ†æˆå‡ æ®µå­ä¸²ï¼Œæ‰èƒ½ä½¿æ¯æ®µçš„LCM=è¿™æ®µå…ƒç´ çš„ç§¯.</li></ul><p><a href="https://codeforces.com/contest/1516/problem/D">https://codeforces.com/contest/1516/problem/D</a></p><p>å¾ˆä¹…æ²¡æœ‰å†™å€å¢äº†ï¼Œå› æ­¤è¿™é¢˜è®°å½•çš„è¯¦ç»†ä¸€ç‚¹ã€‚</p><p>é¦–å…ˆå¯ä»¥ç¡®å®šï¼Œè¦æ»¡è¶³LCM=è¿™æ®µå…ƒç´ çš„ç§¯ï¼Œå³è¿™æ®µå…ƒç´ çš„æ‰€æœ‰æ•°å­—å¿…é¡»ä¸¤ä¸¤äº’è´¨ã€‚æˆ‘ä»¬ç”¨è´¨æ•°ç­›ç­›å‡º1åˆ°1e5çš„è´¨æ•°æ¨å…¥è´¨æ•°è¡¨ä¸­ï¼Œç„¶åå¯¹æ¯ä¸ªæ•°å­—è¿›è¡Œè´¨å› æ•°åˆ†è§£ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ•°ç»„ï¼š</p><ul><li>pre[x]è¡¨ç¤ºè´¨æ•°xä¸Šä¸€æ¬¡å‡ºç°çš„ä½ç½®(å› ä¸ºæ˜¯å€’ç€æ‰¾çš„ï¼Œæ‰€ä»¥pre[x]ä¸€å®šæ˜¯æ¯”å½“å‰ä½ç½®å¾€åçš„)</li><li>rb[i]è¡¨ç¤ºiä½ç½®å¾€å³è¾¹æ•°ï¼Œæœ€è¿‘æ˜¯å“ªä¸ªæ•°å­—å’Œä»–ä¸äº’è´¨</li></ul><p>æˆ‘ä»¬çŸ¥é“å¦‚æœè¦æ‰¾åˆ°å½“å‰ä½ç½®içš„ä¸‹ä¸€æ®µï¼Œå³ç›´æ¥è·³è½¬åˆ°rb[i]å³å¯ã€‚æˆ‘ä»¬å€’ç€åšä¸€æ¬¡å¾ªç¯ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">if(a[i]%prm[j]==0){    while(a[i]%prm[j]==0) a[i]/=prm[j];    rb[i] = min(rb[i],pre[prm[j]]);    pre[prm[j]] = i;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å³ä¸€ä¸ªæ•°å­—æœ‰å¤šä¸ªè´¨å› å­ç»„æˆæ—¶ï¼Œéœ€è¦æ‰¾åˆ°è¿™äº›è´¨å› å­xä¸­pre[x]æœ€å°çš„èµ‹å€¼ç»™rb[i];å…¶æ¬¡å› ä¸ºåœ¨å½“å‰ä½ç½®iä¸Šæ‰¾åˆ°äº†æ–°çš„åŒ…å«è´¨æ•°prm[j]çš„ä½ç½®ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦æ›´æ–°pre[prm[j]]ã€‚</p><p>æˆ‘ä»¬çŸ¥é“rb[i]æ˜¯iä½ç½®ç»è¿‡ä¸€æ¬¡è·³è½¬ååˆ°è¾¾çš„ä½ç½®ï¼Œä½¿ç”¨å€å¢æ³•ï¼Œæˆ‘ä»¬éœ€è¦å¯¹iä½ç½®æ‰¾å‡ºè·³è½¬2,4,8,16â€¦.æ¬¡çš„ä½ç½®ï¼Œæ”¾åœ¨bz[i],[j]ä¸­ï¼Œè¡¨ç¤ºä½ç½®iç»è¿‡$2^j$æ¬¡è·³è½¬ååˆ°è¾¾çš„ä½ç½®ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">rep(i,1,n) bz[i][0] = rb[i];bz[n+1][0] = n+1;rep(j,1,20){    bz[n+1][j] = n+1;    rep(i,1,n){        bz[i][j] = bz[bz[i][j-1]][j-1];    }}   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬è¯»å…¥læ—¶ï¼Œä»å¤§å¾€å°æ£€æµ‹2çš„å€æ•°ï¼Œå¼±æ²¡æœ‰è¶…è¿‡råˆ™æ‰§è¡Œè¿™æ¬¡è·³è·ƒï¼Œå¹¶ä¸”ç»Ÿè®¡ç»“æœã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">cin&gt;&gt;l&gt;&gt;r;int cnt = 1;repb(j,20,0){//ä»å¤§å¾€å°æ‰¾    if(bz[l][j]&lt;=r){//å¦‚æœæ‰§è¡Œ2^jæ¬¡è·³è·ƒä¸ä¼šè¶Šç•Œ,åˆ™æ‰§è¡Œ        cnt+=(1&lt;&lt;j);        l = bz[l][j];    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é¢˜è¿˜æœ‰ä¸€äº›è¾¹ç•Œéœ€è¦èµ‹åˆå€¼ï¼Œæ¯”å¦‚rb[n+1]=n+1,æ‰€æœ‰pre[x]=n+1,ä»¥åŠbz[n+1],[0]=n+1ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> åšé¢˜è®°å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šå…ƒçº¿æ€§å›å½’â€”â€”æ³¢å£«é¡¿æˆ¿ä»·é—®é¢˜ å­¦ä¹ ç¬”è®°</title>
      <link href="2021/04/09/linear/"/>
      <url>2021/04/09/linear/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šå…ƒçº¿æ€§å›å½’â€”â€”æ³¢å£«é¡¿æˆ¿ä»·é—®é¢˜å­¦ä¹ ç¬”è®°"><a href="#å¤šå…ƒçº¿æ€§å›å½’â€”â€”æ³¢å£«é¡¿æˆ¿ä»·é—®é¢˜å­¦ä¹ ç¬”è®°" class="headerlink" title="å¤šå…ƒçº¿æ€§å›å½’â€”â€”æ³¢å£«é¡¿æˆ¿ä»·é—®é¢˜å­¦ä¹ ç¬”è®°"></a>å¤šå…ƒçº¿æ€§å›å½’â€”â€”æ³¢å£«é¡¿æˆ¿ä»·é—®é¢˜å­¦ä¹ ç¬”è®°</h1><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>å½±å“æ³¢å£«é¡¿æˆ¿ä»·çš„ä¸€å…±æœ‰12ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å‡è®¾æˆ¿ä»·$Y=x_1\cdot w_1+x_2\cdot w_2\dots +x_{12}\cdot w_{12}+b$,è¦é€šè¿‡æ•°æ®æ±‚è¿™åäºŒä¸ªå‚æ•°çš„æƒé‡å’Œ$b$ã€‚</p><h2 id="å®šä¹‰æŸå¤±å‡½æ•°"><a href="#å®šä¹‰æŸå¤±å‡½æ•°" class="headerlink" title="å®šä¹‰æŸå¤±å‡½æ•°"></a>å®šä¹‰æŸå¤±å‡½æ•°</h2><p>æŸå¤±å‡½æ•°$loss$è¶Šå¤§è¡¨ç¤ºé¢„æµ‹çš„è¶Šä¸å‡†ç¡®ï¼Œ$loss = (y-pred)^2$å³é¢„æµ‹å€¼ä¸å®é™…å€¼çš„å‡æ–¹è¯¯å·®ã€‚</p><h2 id="å¯¹çŸ©é˜µæ±‚å¯¼"><a href="#å¯¹çŸ©é˜µæ±‚å¯¼" class="headerlink" title="å¯¹çŸ©é˜µæ±‚å¯¼"></a>å¯¹çŸ©é˜µæ±‚å¯¼</h2><p>è¿™ä¸€éƒ¨åˆ†å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/137713040">https://zhuanlan.zhihu.com/p/137713040</a></p><p>ç±»æ¯”ä¹‹å‰çš„çº¿æ€§å›å½’é—®é¢˜ï¼Œæˆ‘ä»¬è®¾æˆ¿ä»·ä¸º$Y=X\beta$å…¶ä¸­Xæ˜¯æ¯ä¸ªå‚æ•°$x_i$ç»„æˆçš„çŸ©é˜µ,$\beta$æ˜¯$w_i$çš„çŸ©é˜µ</p><p>æˆ‘ä»¬è¦æ±‚æ®‹å·®å¹³æ–¹å’Œ$Q=(X\beta-Y)(X\beta-Y)^T$å¯¹$\beta$çš„å¯¼æ•°ï¼Œ</p><p>æœ‰$\frac{\partial X^TY\beta}{\partial \beta}=Y^TX$(ä¸ä¼šç”¨Latexæ‰“çŸ©é˜µï¼Œè¯æ˜éƒ¨åˆ†åœ¨çŸ¥ä¹æœ‰ï¼Œè¿™é‡Œå…ˆä¸è®°å½•äº†)</p><p>å› æ­¤$(X\beta-Y)(X\beta-Y)^T=(\beta^TX^T-Y^T)(X\beta-Y)=\beta^TX^TX\beta-\beta^TX^TY-Y^TX\beta+Y^TY$</p><p>æ±‚å¯¼åå¾—åˆ°$2X^TX\beta-2X^TY$</p><h2 id="å‚æ•°æ±‚è§£"><a href="#å‚æ•°æ±‚è§£" class="headerlink" title="å‚æ•°æ±‚è§£"></a>å‚æ•°æ±‚è§£</h2><p>æˆ‘ä»¬è¦æ‰¾å¯¼æ•°ä¸º0çš„æå€¼ç‚¹ï¼Œå› æ­¤è®¾$\beta$æ»¡è¶³$2X^TX\beta-2X^TY$</p><p>å˜å½¢å¾—åˆ°$\beta=(X^TX)^{-1}X^TY$å³å¯å¾—åˆ°$\beta$</p><p>ä½†æ˜¯æ–¹æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>Xå¯èƒ½æ²¡æœ‰é€†çŸ©é˜µï¼Œç»“æœä¸å¤Ÿç²¾ç¡®</li><li>å”¯ç‹¬å¤šï¼ŒçŸ©é˜µæ±‚é€†ï¼ŒçŸ©é˜µç›¸ä¹˜è€—è´¹å¤§é‡æ—¶é—´</li></ul><h2 id="æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£"><a href="#æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£" class="headerlink" title="æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£"></a>æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£</h2><p>ç”¨çŸ©é˜µæ±‚å¯¼çš„æ–¹æ³•å¾—æ¢¯åº¦$\frac{\partial Q}{\partial \beta}=2X^TX\beta-2X^TY$</p><p>å› æ­¤å¸¦å…¥æ¢¯åº¦ä¸‹é™å…¬å¼ï¼š$\theta_i+1=\theta_i-\alpha\cdot2X^T(X\beta-Y)$å¾—åˆ°ä¸‹ä¸€æ­¥çš„ç‚¹åæ ‡</p><h2 id="ä¸€äº›æ¦‚å¿µè®°å½•"><a href="#ä¸€äº›æ¦‚å¿µè®°å½•" class="headerlink" title="ä¸€äº›æ¦‚å¿µè®°å½•"></a>ä¸€äº›æ¦‚å¿µè®°å½•</h2><p>**epoch(æ—¶æœŸ):**ä¸€ä¸ªå®Œæ•´çš„æ•°æ®é›†é€šè¿‡äº†ç¥ç»ç½‘ç»œä¸€æ¬¡å¹¶ä¸”è¿”å›äº†ä¸€æ¬¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¸€ä¸ªepochã€‚</p><p>**batch(æ‰¹):**å°†è®­ç»ƒæ ·æœ¬åˆ†æˆå¤šä¸ªbatchï¼Œä¸€æ¬¡åªé€‰ä¸€ä¸ªéƒ¨åˆ†ã€‚</p><p>**éšæœºæ¢¯åº¦ä¸‹é™:**æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„æ¯ä¸€æ­¥éƒ½æŠŠæ•´ä¸ªæ•°æ®é›†è½½å…¥è¿›æ¥è¿ç®—ï¼Œæ¯”è¾ƒå°å·æ—¶é—´å’Œå†…å­˜ï¼Œéšæœºæ¢¯åº¦ä¸‹é™æ¯æ¬¡éšæœºé‡‡æ ·ä¸€æ‰¹æ ·æœ¬æ¥ä¼°è®¡å½“å‰æ¢¯åº¦ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>ä»£ç éƒ¨åˆ†çœ‹çš„è¿™ä¸ªè§†é¢‘ <a href="https://www.bilibili.com/video/BV1iJ41127cw">https://www.bilibili.com/video/BV1iJ41127cw</a></p><h3 id="å¯¼å…¥æ•°æ®é›†"><a href="#å¯¼å…¥æ•°æ®é›†" class="headerlink" title="å¯¼å…¥æ•°æ®é›†"></a>å¯¼å…¥æ•°æ®é›†</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_bostonBoston <span class="token operator">=</span> load_boston<span class="token punctuation">(</span><span class="token punctuation">)</span>X <span class="token operator">=</span> Boston<span class="token punctuation">.</span>dataY <span class="token operator">=</span> Boston<span class="token punctuation">.</span>target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä»sklearné‡Œé¢å¯¼å…¥æ³¢å£«é¡¿æˆ¿ä»·çš„æ•°æ®é›†ã€‚</p><h3 id="åˆ’åˆ†æ ·æœ¬æ•°æ®"><a href="#åˆ’åˆ†æ ·æœ¬æ•°æ®" class="headerlink" title="åˆ’åˆ†æ ·æœ¬æ•°æ®"></a>åˆ’åˆ†æ ·æœ¬æ•°æ®</h3><h4 id="train-test-splitå‡½æ•°"><a href="#train-test-splitå‡½æ•°" class="headerlink" title="train_test_splitå‡½æ•°"></a>train_test_splitå‡½æ•°</h4><p>å‚è€ƒè¿™ä¸ªæ–‡ç« <a href="https://zhuanlan.zhihu.com/p/248634166">https://zhuanlan.zhihu.com/p/248634166</a></p><p><strong>å®Œæ•´æ¨¡æ¿ï¼š</strong></p><p>train_X,test_X,train_y,test_y = train_test_split(train_data,train_target,test_size=0.3,random_state=5)</p><p><strong>å‚æ•°è§£é‡Šï¼š</strong></p><p>train_dataï¼šæ ·æœ¬ç‰¹å¾é›†</p><p>train_targetï¼šæ ·æœ¬æ ‡ç­¾</p><p>test_sizeï¼š0.1ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºæµ‹è¯•é›†å æ€»æ ·æœ¬çš„å æ¯”ï¼Œå¦‚æœæ˜¯æ•´æ•°å°±æ˜¯æ ·æœ¬æ•°é‡</p><p>random_stateï¼šéšæœºæ•°ç§å­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LinearRegressionX_train<span class="token punctuation">,</span>X_test<span class="token punctuation">,</span>Y_train<span class="token punctuation">,</span>Y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">,</span>test_size<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span>random_state<span class="token operator">=</span><span class="token number">865</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a>çº¿æ€§å›å½’</h3><p>å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/71196742">https://zhuanlan.zhihu.com/p/71196742</a></p><p>æˆ‘å…¶å®æ¯”è¾ƒéœ‡æƒŠï¼Œçº¿æ€§å›å½’å±…ç„¶ç›´æ¥è°ƒç”¨åº“å‡½æ•°å°±å¯ä»¥ç”¨äº†ã€‚</p><h4 id="LinearRegressionå‡½æ•°"><a href="#LinearRegressionå‡½æ•°" class="headerlink" title="LinearRegressionå‡½æ•°"></a>LinearRegressionå‡½æ•°</h4><p><strong>å®Œæ•´æ¨¡æ¿:</strong></p><p>LinearRegression(fit_intercept=True,normalize=False,copy_X=True,n_jobs=1)</p><p><strong>å‚æ•°è§£é‡Šï¼š</strong></p><p>fit_interceptï¼šæ˜¯å¦å¯¹è®­ç»ƒæ•°æ®è¿›è¡Œä¸­å¿ƒåŒ–ï¼Œé»˜è®¤ä¸ºtrue(ä¸­å¿ƒåŒ–ï¼šä½¿å¾—å¹³å‡å€¼ä¸º0)</p><p>normalizeï¼šæ˜¯å¦å¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œé»˜è®¤ä¸ºtrue(æ ‡å‡†åŒ–ï¼šå°†æ•°æ®æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼Œä½¿ä¹‹è½å…¥ä¸€ä¸ªå°çš„ç‰¹å®šåŒºé—´)</p><p>copy_Xï¼šä¸­å¿ƒåŒ–ï¼Œæ ‡å‡†åŒ–åï¼Œæ˜¯å¦æŠŠæ–°æ•°æ®è¦†ç›–åˆ°åŸæ•°æ®ä¸Šï¼Œé»˜è®¤ä¸ºtrue</p><p>n_jobsï¼šæ•´å‹ï¼Œé»˜è®¤ä¸º1</p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><pre class="line-numbers language-python" data-language="python"><code class="language-python">lin_reg <span class="token operator">=</span> LinearRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>lin_reg<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span>Y_train<span class="token punctuation">)</span><span class="token comment">#è®­ç»ƒè¿‡ç¨‹</span>lin_reg<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>deviation <span class="token operator">=</span> lin_reg<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span> <span class="token operator">-</span> Y_testdeviation<span class="token comment">#æ‰“å°é¢„æµ‹ç»“æœå’ŒçœŸå®å€¼çš„å·®</span>RMSE <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>deviation<span class="token operator">*</span>deviation<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">102</span><span class="token comment">#å‡æ–¹æ ¹è¯¯å·®ï¼Œè¶Šå°è¡¨ç¤ºé¢„æµ‹ç»“æœè¶Šå‡†ç¡®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h2><p>ä»¥å‰æ²¡æ¥è§¦è¿‡pythonï¼Œä¹‹å‰è¿˜çœ‹äº†å¦å¤–ä¸€ä¸ªæ²¡ç”¨åº“çš„æ•™ç¨‹ï¼Œé‡Œé¢è¿˜æ¶‰åŠæ ‡å‡†åŒ–ä¹‹ç±»çš„å¥½å¤šç»†èŠ‚ï¼Œå› ä¸ºè¯­è¨€ä¹‹ç±»çš„éƒ½ä¸ç†Ÿæ‚‰æ•…æ”¾å¼ƒäº†ã€‚è·Ÿç€è§†é¢‘çš„è®²è§£å†™å®Œä»£ç ä¹‹åæ„Ÿè§‰åˆ°pythonæœ‰å¥½å¤šçš„åº“ï¼Œä¼¼ä¹éƒ½ä¸ç”¨äº†è§£å†…éƒ¨çš„åŸç†å°±å¯ä»¥æ‹¿è¿‡æ¥ç”¨ï¼Œè€Œä¸”å¾ˆå¤šè¯­æ³•éƒ½æ¯”è¾ƒç®€çŸ­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CNN </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> çº¿æ€§å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#712 (Div. 2) E. Travelling Salesman Problem</title>
      <link href="2021/04/06/cf-712/"/>
      <url>2021/04/06/cf-712/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/contest/1504/problem/E">https://codeforces.com/contest/1504/problem/E</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>æœ‰n(1e5)ä¸ªåŸå¸‚ï¼Œæ¯ä¸ªåŸå¸‚æœ‰aiå’Œciä¸¤ä¸ªå±æ€§ï¼Œä»åŸå¸‚iåˆ°åŸå¸‚jçš„è´¹ç”¨ä¸º$max(c_i,a_j-c_i)$,é—®ä»ä»»ä¸€åŸå¸‚å¼€å§‹ç»è¿‡æ‰€æœ‰åŸå¸‚å†å›åˆ°è¯¥åŸå¸‚æ‰€éœ€è¦çš„æœ€å°è´¹ç”¨ã€‚</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æˆ‘ä»¬è§‚å¯Ÿè¿™æ¡å¼å­ï¼š$cost(i,j)=max(c_i,a_j-c_i)$,å¯ä»¥çŸ¥é“$c_i$æ˜¯é€ƒä¸æ‰çš„ï¼Œå› æ­¤æˆ‘ä»¬æŠŠcå…¨éƒ¨éƒ½å…ˆåŠ åˆ°ç»“æœ$res$ä¸Šï¼Œè¿™æ ·æ¯æ¡è¾¹çš„è´¹ç”¨å°±å˜æˆäº†$cost(i,j)=max(0,a_j-(a_i+c_i))$ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å½¢è±¡åœ°æŠŠaiç†è§£æˆæ¥¼æˆ¿çš„é«˜åº¦ï¼Œciç†è§£æˆè¿™ä¸ªæ¥¼æˆ¿çš„æ¢¯å­é«˜åº¦ï¼Œæˆ‘ä»¬åœ¨æ¥¼æˆ¿iä¸Šæ—¶ï¼Œå¦‚æœæ¥¼æˆ¿é«˜åº¦å’Œæ¢¯å­é«˜åº¦ä¹‹å’Œé«˜äºæ¥¼æˆ¿jçš„é«˜åº¦ï¼Œåˆ™å¯ä»¥å…è´¹ä»içˆ¬åˆ°jï¼Œå¦åˆ™åˆ™éœ€è¦è¡¥ä¸Šè¿™äº›é«˜åº¦çš„å·®ã€‚å³ä»æ¥¼é«˜+æ¢¯å­è¾ƒé«˜çš„æ¥¼æˆ¿çˆ¬åˆ°ä½çš„æ˜¯ä¸éœ€è¦è´¹ç”¨çš„ã€‚</p><h2 id="è§£"><a href="#è§£" class="headerlink" title="è§£"></a>è§£</h2><p>ä»¥aä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œcä¸ºç¬¬äºŒå…³é”®å­—å¯¹æˆ¿å­æ’åºã€‚</p><p>å› æ­¤æˆ‘ä»¬åˆ†ä¸¤éƒ¨åˆ†ï¼š</p><p>ç¬¬ä¸€éƒ¨åˆ†å…ˆä»æœ€ä½çš„æ¥¼å±‚çˆ¬åˆ°æœ€é«˜çš„æ¥¼å±‚ï¼ˆä¸­é—´ä½¿è´¹ç”¨å°½é‡å°ï¼‰ã€‚</p><p>ç¬¬äºŒéƒ¨åˆ†åªéœ€è¦æŠŠæ²¡çˆ¬è¿‡çš„æ¥¼æˆ¿ä»é«˜å¾€ä½æ’åˆ—ï¼Œæœ€åèµ°å›æœ€ä½çš„æ¥¼æˆ¿å³å¯ï¼ˆè¿™éƒ¨åˆ†ä¸éœ€è¦ä»»ä½•è´¹ç”¨ï¼‰ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int now = ac[1].ft+ac[1].sd;//nowæ˜¯å½“å‰æˆ¿å­+æ¢¯å­çš„é«˜åº¦   //ä¹‹åæ¯æ­¥çš„æ¶ˆè€—çœ‹ä½œmax(0,aj-(ai+ci))   rep(i,2,n){       if(ac[i].ft&gt;=now)//é€šè¿‡æ¢¯å­ä¸Šå»çš„æƒ…å†µ           res += ac[i].ft-now;       //ä¸åŠ çš„è¿™äº›æ˜¯è¾¾åˆ°æœ€é«˜ä¹‹åè®¿é—®çš„       //å¦‚æœè¿™ä¸ªæ¥¼å¯ä»¥ä½¿nowæ›´é«˜ï¼Œä¹Ÿåº”è¯¥åœ¨ä¸­é—´å…è´¹ç»è¿‡       now = max(now,ac[i].ft+ac[i].sd);   }   //ç¬¬äºŒéƒ¨åˆ†ç»è¿‡çš„æ¥¼å…¨éƒ¨å…è´¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a; }int n;typedef pair&lt;int,int&gt; pii;#define mkp make_pair#define ft first#define sd secondconst int MAXN = 114514;pii ac[MAXN];ll res;void solve(){    res = 0;    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;ac[i].ft&gt;&gt;ac[i].sd,res+=ac[i].sd;    sort(ac+1,ac+1+n);    int now = ac[1].ft+ac[1].sd;//nowæ˜¯å½“å‰æˆ¿å­+æ¢¯å­çš„é«˜åº¦    //ä¹‹åæ¯æ­¥çš„æ¶ˆè€—çœ‹ä½œmax(0,aj-(ai+ci))    rep(i,2,n){        if(ac[i].ft&gt;=now)//é€šè¿‡æ¢¯å­ä¸Šå»çš„æƒ…å†µ            res += ac[i].ft-now;        //ä¸åŠ çš„è¿™äº›æ˜¯è¾¾åˆ°æœ€é«˜ä¹‹åè®¿é—®çš„        //å¦‚æœè¿™ä¸ªæ¥¼å¯ä»¥ä½¿nowæ›´é«˜ï¼Œä¹Ÿåº”è¯¥åœ¨ä¸­é—´å…è´¹ç»è¿‡        now = max(now,ac[i].ft+ac[i].sd);    }    //ç¬¬äºŒéƒ¨åˆ†ç»è¿‡çš„æ¥¼å…¨éƒ¨å…è´¹    cout&lt;&lt;res&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#700 D1. Painting the Array I</title>
      <link href="2021/02/16/cf-700d/"/>
      <url>2021/02/16/cf-700d/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h1><p>å¿ƒç¢çš„ä¸€åœºï¼Œä¸€å¼€å§‹40åˆ†é’Ÿç§’æ‰ä¸‰é¢˜ï¼Œç»“æœåæ¥fstæ‰ä¸¤é¢˜ï¼ˆä¸€é¢˜æ˜¯å¿˜äº†èµ‹INFï¼Œå¦ä¸€é¢˜æ˜¯&gt;0å†™æˆ&gt;=0ï¼Œè¿™æ¬¡pretestæ•°æ®çœŸçš„æ¯”ä»¥å¾€å¼±å¤ªå¤šï¼ï¼‰ï¼Œæ‰äº†ä¸€ç™¾äºŒååˆ†å·®ç‚¹ä¸‹è“ï¼Œä¸€æœå›åˆ°è§£æ”¾å‰ï¼Œå¿ƒæ€éƒ½å´©äº†ã€‚å“­å“­ï¼Œè¿‘æœŸéƒ½æ²¡å¿ƒæƒ…æ‰“äº†</p><h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/contest/1480/problem/D1">https://codeforces.com/contest/1480/problem/D1</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>ç»™ä¸€ä¸ªé•¿nçš„åºåˆ—ï¼Œå¯ä»¥æŒ‰é¡ºåºåˆ†æˆä¸¤ç»„ï¼ˆè¦ä¿ç•™å…ˆåé¡ºåºçš„ï¼‰ï¼Œæ±‚æ€ä¹ˆæ ·ä½¿ä¸¤ä¸ªåºåˆ—çš„æ®µæ•°å’Œæœ€å¤§ï¼Ÿ</p><p>è¯´æ˜ï¼šè¿ç»­çš„åŒç§æ•°å­—ç®—åŒä¸€æ®µï¼Œæ¯”å¦‚$[1,2,3]$æœ‰3æ®µï¼Œ$[1,1,2,2,3,3,3,3]$åŒæ ·ä¹Ÿæ˜¯3æ®µã€‚</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æˆ‘ä¸€å¼€å§‹ä¹Ÿæƒ³åˆ°äº†ç”¨è´ªå¿ƒï¼Œä½†æ˜¯å…¶å®å¯ä»¥å‘ç°è¿™é¢˜æœ‰å¾ˆå¤šéœ€è¦è®¨è®ºçš„åœ°æ–¹ã€‚</p><ul><li>é¦–å…ˆï¼Œå½“å‰æ•°å­—æ”¾åœ¨ç‰¹å®šçš„ä¸€ç»„ä¸­ï¼Œå¯ä»¥<strong>éš”å¼€</strong>ä¹‹åæ¥çš„æ•°å­—ä½¿å¾—æ®µæ•°å¢åŠ ï¼Œæ¯”å¦‚å¯¹åºåˆ—$[1,2,3,2,2]$</li></ul><p>å½“å‰$A:[1]$å’Œ$B:[2]$ï¼Œä¸‹ä¸€ä¸ªæ¥çš„ä¸º$3$ã€‚è¿™ä¸ª$3$ä¸€å®šè¦æ”¾åœ¨ç¬¬äºŒç»„æ‰èƒ½ä½¿ç»“æœæœ€å¤§åŒ–å³$A:[1,2]$å’Œ$B:[2,3,2]$</p><p>è¿™é‡Œçš„é‡ç‚¹åœ¨äºï¼šä¹‹åå‡ºç°äº†è¿ç»­çš„ä¸€æ®µ$[2,2]$å¯¹äºè¿ç»­çš„ä¸€æ®µæˆ‘ä»¬<strong>æ²¡å¾—é€‰</strong>,å¦‚æœAæˆ–è€…Bçš„å°¾éƒ¨åŒæ ·ä¹Ÿæœ‰2ï¼Œé‚£ä¹ˆå°±<strong>ä¼šä½¿ç­”æ¡ˆæŸå¤±1</strong>ã€‚</p><ul><li>å› æ­¤ï¼Œå¦‚æœç°åœ¨æœ‰ä¸€ä¸ªæ•°å­—è¦é€‰æ‹©æ’å…¥Aè¿˜æ˜¯Bï¼Œæˆ‘ä»¬éœ€è¦ä¾æ®Aå’ŒBå°¾ç«¯çš„æ•°å­—ä»¥åŠä¹‹å<strong>â€œè¿ç€çš„ä¸¤ä¸ªç›¸åŒæ•°å­—â€</strong>è¿›è¡Œè®¨è®º</li></ul><h2 id="è§£"><a href="#è§£" class="headerlink" title="è§£"></a>è§£</h2><p>é¢„å¤„ç†ä¸€ä¸ªnxtæ•°ç»„,è¡¨ç¤ºç¦»å½“å‰ä½ç½®iæœ€è¿‘çš„**â€œè¿ç»­ä¸¤ä¸ªç›¸åŒæ•°å­—â€**æ˜¯ä»€ä¹ˆã€‚</p><ul><li><p>å¦‚æœä¸¤ä¸ªåºåˆ—å…¶ä¸­ä¸€ä¸ªçš„å°¾éƒ¨å’Œa[i]ç›¸åŒï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯è¦æ”¾åˆ°å¦ä¸€ä¸ªåºåˆ—ä¸­å»çš„ã€‚</p></li><li><p>å¦‚æœä¸¤ä¸ªåºåˆ—çš„å°¾éƒ¨éƒ½ä¸åŒäºå½“å‰a[i]ï¼Œé‚£ä¹ˆå°±è¦ä¾æ®nxt[i]å’Œä¸¤ä¸ªå°¾éƒ¨è¿›è¡Œè®¨è®ºï¼Œå¦‚æœåºåˆ—Açš„å°¾éƒ¨å’Œnxt[i]ç›¸åŒï¼Œé‚£ä¹ˆå°±æ”¾åœ¨åºåˆ—Aä¸Šï¼Œåä¹‹åˆ™æ”¾åœ¨Bä¸Šã€‚</p></li></ul><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p>æœ‰äº›ç»†èŠ‚ä¸Šè¿˜éœ€è¦è®¨è®ºä»¥ä¸‹ï¼Œæ¯”å¦‚aä¸­ä¸€æ®µé•¿æ®µçš„æœ«å°¾å’Œå•ä¸ªæ•°å­—æ˜¯ä¸€æ ·è®¨è®ºçš„ç­‰ç­‰ã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fint n;const int MAXN = 114514;int a[MAXN],nxt[MAXN];void solve(){    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;a[i];    nxt[n]=-1;//è®°å½•ä¹‹åæœ€è¿‘ä¸€æ¬¡å‡ºç°ä¸¤æ¬¡ä»¥ä¸Šçš„æ•°å­—    repb(i,n-1,1){        if(a[i]==a[i+1]) nxt[i]=a[i];        else nxt[i]=nxt[i+1];    }    int top[2];//ä¸¤ä¸ªæ ˆçš„æ ˆé¡¶å…ƒç´     top[0]=top[1]=-1;    int res=0;    rep(i,1,n){        if(a[i]==a[i+1]){//é‡å¤é•¿æ®µ,æ”¾å“ªå„¿éƒ½ä¸€æ ·            if(top[0]!=a[i]) res++;            top[0]=a[i];        }        else{//é‡å¤é•¿æ®µæœ«å°¾æˆ–å•ä¸ªå­—ç¬¦            if(top[0]==a[i]) res+=(top[1]!=a[i]),top[1]=a[i];            else if(top[1]==a[i]) res+=(top[0]!=a[i]),top[0]=a[i];            else{                if(top[0]==nxt[i]) res++,top[0]=a[i];                else res++,top[1]=a[i];            }        }    }    cout&lt;&lt;res&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#580 (Div. 2) D. Shortest Cycle(Floydæ±‚æœ€å°ç¯)</title>
      <link href="2021/02/09/cf-580/"/>
      <url>2021/02/09/cf-580/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/contest/1206/problem/D">https://codeforces.com/contest/1206/problem/D</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>ç»™nä¸ªæ•°å­—(næ˜¯1e5çº§),å¦‚æœa[i]&amp;a[j]!=0ï¼Œåˆ™iç‚¹åˆ°jç‚¹æœ‰è¿è¾¹ï¼Œé—®æœ€çŸ­çš„ç¯é•¿åº¦æ˜¯å¤šå°‘ã€‚</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><p>å…ˆæŒ‰ä½æ‰«æ•°ç»„ï¼Œå¦‚æœä¸€ä¸ªä½åœ¨æ•°å­—ä¸Šå‡ºç°çš„æ¬¡æ•°è¶…è¿‡äº†ä¸‰æ¬¡ï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªæ•°å­—å¯ä»¥ç›´æ¥æˆç¯ï¼Œè¾“å‡ºç­”æ¡ˆ3.</p><p>æ¥ä¸‹æ¥è®¨è®ºæ¯ä¸ªä½æœ€å¤šä¸¤ä¸ªæ•°å­—çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µæœ€å¤šåªæœ‰2*64ä¸ªæ•°å­—ï¼Œå› æ­¤ç®—æ³•çš„å¤æ‚åº¦å¯ä»¥æ¯”è¾ƒå¤§ã€‚ä½†è¦è®°å¾—ç­›é™¤a[i]=0çš„æƒ…å†µã€‚</p><p>é‚£ä¹ˆfloydæ˜¯æ€ä¹ˆæ±‚æœ€å°ç¯çš„å‘¢ï¼Ÿ</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">rep(i,1,n)    rep(j,1,n)        mp[i][j]=e[i][j];//æŠŠä¸€å¼€å§‹çš„eå¤åˆ¶ä¸€éç»™mprep(k,1,n){    //å½“å¾ªç¯åˆ°kçš„æ—¶å€™,å¯ä»¥ä¿è¯ä¹‹å‰çš„e[i][j]è·¯å¾„ä¸­éƒ½ä¸ä¼šåŒ…å«k    rep(i,1,k-1){        rep(j,i+1,k-1){            minn = min(minn,e[i][j]+mp[i][k]+mp[j][k]);//i-&gt;j-&gt;k-&gt;iè¿™ä¸ªç¯é•¿åº¦            //è¿™å¥åé¢ä¸¤ä¸ªä¸€å®šè¦æ˜¯mpï¼ä¸€å¼€å§‹é”™åœ¨è¿™é‡Œ            //æƒ³æ˜ç™½äº†æ˜¯å› ä¸ºåœˆä¸Šä¼šæœ‰è¾¹è¢«ç»è¿‡ä¸¤æ¬¡,ç±»ä¼¼ä¸«å­—å‹,åŸæœ¬ä¸èƒ½æˆç¯,ä½†å¦‚æœä¸æ˜¯mpä¼šè¢«è¯¯åˆ¤æˆç¯        }    }    rep(i,1,n){        rep(j,1,n){            e[i][j]=min(e[i][j],e[i][k]+e[k][j]);//è¿™æ ·å¤„ç†ä¹‹å,è·¯å¾„å¯ä»¥åŒ…å«k        }    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥æ¯”è¾ƒç›´è§‚åœ°çœ‹åˆ°ï¼Œç¬¬ä¸€å±‚æšä¸¾kï¼Œå†…å±‚çš„iå’Œjéƒ½ä¸ä¼šå¤§äºkï¼Œè¿™æ ·å°±ä¿è¯äº†æ–°åŠ å…¥çš„ç‚¹kä¸åœ¨ä»»ä½•çš„eijè·¯å¾„ä¸­ã€‚é‚£ä¹ˆè¿™æ ·ä¸€æ¥ï¼Œi-&gt;jæ˜¯iåˆ°jçš„ä¸€æ¡è·¯å¾„,i-&gt;k-&gt;jæ˜¯ç¬¬äºŒæ¡è·¯å¾„ï¼Œè¿™æ ·ä¸€æ¥å°±æ˜¯ä¸€ä¸ªç¯ã€‚åœ¨è¿™äº›è§£é‡Œé¢æ‰¾æœ€å°å€¼å³å¯ã€‚</p><p>ï¼ä¹‹å‰æ¯”è¾ƒç–‘æƒ‘çš„ç‚¹å°±æ˜¯ï¼Œä¸ºä»€ä¹ˆè¦ä¿ç•™æœ€åˆçš„é‚»æ¥çŸ©é˜µeåœ¨mpä¸­å‘¢ï¼Ÿ</p><p>å› ä¸ºå¦‚æœéƒ½ä½¿ç”¨æ•°ç»„eï¼Œå³<code>minn = min(minn,e[i][j]+mp[i][k]+mp[j][k])</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¼šå‡ºé”™ï¼š</p><p><img src="%5Cimg%5Ccf-580%5Ctu1.png" alt="tu1"></p><p>æ˜¾ç„¶åŸæœ¬æ˜¯ä¸èƒ½æˆç¯çš„ï¼Œä½†æ˜¯$e_{i,k}$å’Œ$e_{j,k}$éƒ½æœ‰å€¼ï¼Œè¿™æ ·åœ¨<code>minn = min(minn,e[i][j]+mp[i][k]+mp[j][k])</code>ä¸‹æ˜¯æœ‰è§£çš„ï¼Œå®é™…ä¸Šè¿™æ¡è·¯å¾„ç”¨äº†é‡å¤çš„è·¯ï¼Œæ‰€ä»¥æ²¡ç¯ï¼Œå°±å‡ºé”™äº†ã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fconst int MAXN = 114514;ll a[MAXN];int e[666][666],mp[666][666];int n;vector&lt;ll&gt; vec;void solve(){    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;a[i];    ll tmp;    rep(i,0,63){        tmp = 1ll&lt;&lt;i;        int cnt = 0;        rep(i,1,n)            if(a[i]&amp;tmp) cnt++;        if(cnt&gt;=3){            cout&lt;&lt;3&lt;&lt;endl;            return;        }    }    vec.push_back(-1);//å¡«ä¸ªç©º    rep(i,1,n)        if(a[i]!=0) vec.push_back(a[i]);//é˜²æ­¢0çš„æƒ…å†µ    n = vec.size()-1;    //æœ€å¤š2*64ä¸ªæ•°ï¼Œfloydæ‰¾æœ€å°ç¯    int minn = INF;    rep(i,1,n){        rep(j,1,n){            e[i][j] = INF/3;//INFçš„è¯ä¼šè¶Šç•Œ            if(i==j) e[i][j]=0;            else if(vec[i]&amp;vec[j]) e[i][j]=1;        }    }    //floyd    rep(i,1,n)        rep(j,1,n)            mp[i][j]=e[i][j];//æŠŠä¸€å¼€å§‹çš„eå¤åˆ¶ä¸€éç»™mp    rep(k,1,n){        //å½“å¾ªç¯åˆ°kçš„æ—¶å€™,å¯ä»¥ä¿è¯ä¹‹å‰çš„e[i][j]è·¯å¾„ä¸­éƒ½ä¸ä¼šåŒ…å«k        rep(i,1,k-1){            rep(j,i+1,k-1){                minn = min(minn,e[i][j]+mp[i][k]+mp[j][k]);//i-&gt;j-&gt;k-&gt;iè¿™ä¸ªç¯é•¿åº¦                //è¿™å¥åé¢ä¸¤ä¸ªä¸€å®šè¦æ˜¯mpï¼ä¸€å¼€å§‹é”™åœ¨è¿™é‡Œ                //æƒ³æ˜ç™½äº†æ˜¯å› ä¸ºåœˆä¸Šä¼šæœ‰è¾¹è¢«ç»è¿‡ä¸¤æ¬¡,ç±»ä¼¼ä¸«å­—å‹,åŸæœ¬ä¸èƒ½æˆç¯,ä½†å¦‚æœä¸æ˜¯mpä¼šè¢«è¯¯åˆ¤æˆç¯            }        }        rep(i,1,n){            rep(j,1,n){                e[i][j]=min(e[i][j],e[i][k]+e[k][j]);//è¿™æ ·å¤„ç†ä¹‹å,è·¯å¾„å¯ä»¥åŒ…å«k            }        }    }    if(minn&gt;n) cout&lt;&lt;-1&lt;&lt;endl;    else cout&lt;&lt;minn&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> å›¾è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#697(Div-3)å…¨é¢˜è§£</title>
      <link href="2021/01/26/cf-697/"/>
      <url>2021/01/26/cf-697/</url>
      
        <content type="html"><![CDATA[<h1 id="A-Odd-Divisor"><a href="#A-Odd-Divisor" class="headerlink" title="A. Odd Divisor"></a>A. Odd Divisor</h1><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>è¯»é¢˜å¯çŸ¥ï¼Œåªæœ‰è¿™ä¸ªæ•°å­—å¯ç”¨$2^x$è¡¨ç¤ºæ—¶ä¸å­˜åœ¨å¥‡æ•°é™¤æ•°ã€‚</p><p>è¿™é¢˜æ¯”èµ›çš„æ—¶å€™æ²¡æ€ä¹ˆæƒ³å°±å¼€å§‹å†™äº†ï¼Œèµ›åæ‰æƒ³åˆ°å¯ä»¥ç”¨lowbitåˆ¤æ–­æ˜¯å¦æ˜¯å½¢å¦‚$2^x$çš„æ•°ï¼Œå¦‚æœlowbit(x)==xï¼Œåˆ™è¿™ä¸ªæ•°å­—å¯ä»¥ç”¨$2^x$è¡¨ç¤ºã€‚</p><p>æˆ‘çš„æ–¹æ³•æ˜¯é¢„å¤„ç†å‡º$2^x(x\in[0,60])$è¿™æ ·çš„ä¸€ä¸ªæ•°ç»„ï¼Œä¹‹åé‡åˆ°ä¸€ä¸ªæ•°å­—ï¼Œä½¿ç”¨lowerboundè¿›è¡ŒäºŒåˆ†ï¼Œæ‰¾åˆ°å¯¹åº”çš„ä½ç½®ä¹‹åï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°å­—æ˜¯å¦ç›¸åŒå³å¯ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fll p[114514];void init(){    p[0] = 1;    rep(i,1,60){        p[i] = p[i-1]*2;    }}void solve(){    ll n;      cin&gt;&gt;n;    if(*lower_bound(p+1,p+1+60,n)==n||n==1){        cout&lt;&lt;"NO"&lt;&lt;endl;    }    else cout&lt;&lt;"YES"&lt;&lt;endl;}int main(){    init();    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="B-New-Yearâ€™s-Number"><a href="#B-New-Yearâ€™s-Number" class="headerlink" title="B. New Yearâ€™s Number"></a>B. New Yearâ€™s Number</h1><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å·²çŸ¥2021æ¯”2020å¤š1ï¼Œå¦‚æœä¸€å…±æœ‰nä¸ªæ•°ä¾›æˆ‘ä»¬é€‰æ‹©æ±‚å’Œï¼Œå…¨é€‰2020ä¼šæ¯”å…¨é€‰2021å°‘nã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¦‚æœè¦åˆ¤æ–­ä¸€ä¸ªæ•°èƒ½ä¸èƒ½è¢«2020å’Œ2021è¡¨ç¤ºï¼Œç›´æ¥å…ˆæŠŠè¿™ä¸ªæ•°æ•´é™¤2020å¾—åˆ°t,çŸ¥é“è¿™ä¸ªæ•°æœ€å¤šå¯ä»¥è¢«tä¸ªæ•°æ±‚å’Œæ¥è¡¨ç¤ºã€‚å†æŠŠè¿™ä¸ªæ•°å¯¹2020å–ä½™å¾—åˆ°yï¼Œå¾—çŸ¥æˆ‘ä»¬è‡³å°‘éœ€è¦æŠŠyä¸ª2020æ”¹æˆ2021æ¥å¼¥è¡¥è¿™äº›å·®è·ã€‚</p><p>ä¹‹ååªè¦æ£€æŸ¥tæ˜¯å¦æ¯”yå°ï¼Œå³æ˜¯å¦æœ‰è‡³å°‘yä¸ª2020å¯ä»¥è¢«æ”¹æˆ2021çš„ã€‚</p><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fint n;void solve(){    cin&gt;&gt;n;    int t = n/2020;    int y = n%2020;    //cout&lt;&lt;t&lt;&lt;' '&lt;&lt;y&lt;&lt;endl;    if(y&lt;=t) cout&lt;&lt;"YES"&lt;&lt;endl;    else cout&lt;&lt;"NO"&lt;&lt;endl;}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="C-Ball-in-Berland"><a href="#C-Ball-in-Berland" class="headerlink" title="C. Ball in Berland"></a>C. Ball in Berland</h1><h2 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>é¦–å…ˆä»æœ€æš´åŠ›çš„æ–¹æ³•æƒ³ï¼Œæˆ‘ä»¬æšä¸¾ç¬¬ä¸€ä¸ªç»„åˆ$(x,y)$,é‚£ä¹ˆç»„åˆ$(x,i)ï¼Œi\in[1,a]$æ˜¯ä¸èƒ½è¢«é€‰æ‹©çš„ï¼Œç»„åˆ$(x,j)ï¼Œj\in[1,b]$ä¹Ÿæ˜¯ä¸èƒ½è¢«é€‰æ‹©çš„ã€‚</p><p>æˆ‘ä»¬å¦‚æœæŠŠ$(x,y)$æ”¾åœ¨åæ ‡è½´ä¸Šçœ‹ï¼Œå¯ä»¥å‘ç°ä¸Šé¢ä¸èƒ½è¢«é€‰æ‹©çš„é‚£äº›ç»„åˆï¼Œå°±æ˜¯xè¡Œå’Œjåˆ—çš„è¿™äº›æ•°å­—ã€‚</p><p>å¦‚è¿™å¼ å›¾ä¸­ï¼Œæˆ‘ä»¬é€‰ä¸­äº†(4,6)åˆ™ç›´æ¥ä»æ€»æ•°kä¸Šå‡å»ç¬¬å››è¡Œçš„æ€»å’Œä»¥åŠç¬¬å…­åˆ—çš„æ€»å’Œï¼Œåˆå› ä¸º(4,6)è¢«å‡å»äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥è¦+1.</p><p><img src="%5Cimg%5Ccf-697%5Cbg.png" alt="bg"></p><h2 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fint a,b,k;const int MAXN = 114514*2;int aa[MAXN],bb[MAXN];//è¯»å…¥a,bint cnta[MAXN],cntb[MAXN];//è®°å½•è¡Œåˆ—çš„å’Œll res;void solve(){    res = 0;    cin&gt;&gt;a&gt;&gt;b&gt;&gt;k;    rep(i,1,a) cnta[i] = 0;//è®¡æ•°çš„æ¸…ç©º    rep(i,1,b) cntb[i] = 0;    rep(i,1,k){        cin&gt;&gt;aa[i];        cnta[aa[i]]++;//aa[i]è¡Œçš„æ€»å’Œå¢åŠ     }    rep(i,1,k){        cin&gt;&gt;bb[i];        cntb[bb[i]]++;//bb[i]åˆ—çš„æ€»å’Œå¢åŠ     }    rep(i,1,k){        res += k-cnta[aa[i]]-cntb[bb[i]]+1;    }    cout&lt;&lt;res/2&lt;&lt;endl;//å› ä¸ºä¸¤ä¸ªç»„åˆå‰åé¡ºåºæ— å…³,æ‰€ä»¥è¦é™¤2}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="D-Cleaning-the-Phone"><a href="#D-Cleaning-the-Phone" class="headerlink" title="D. Cleaning the Phone"></a>D. Cleaning the Phone</h1><h2 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å…ˆæŒ‰ç…§â€æ€§ä»·æ¯”â€œ(å³ $\frac{a[i]}{b[i]}$ )å¯¹æ‰€æœ‰appè¿›è¡Œæ’åº.</p><p>ä»å¼€å¤´å¾€åéå†æ•°ç»„ï¼Œä¼˜å…ˆå–æ€§ä»·æ¯”é«˜çš„æ”¾å…¥è¦åˆ æ‰çš„é›†åˆä¸­ã€‚</p><p>æˆ‘ä»¬ç»´æŠ¤pre1(ä¸Šä¸€ä¸ªå–å¾—æ¶ˆè€—ä¸º1çš„app)å’Œpre2(ä¸Šä¸€ä¸ªå–å¾—æ¶ˆè€—ä¸º1çš„app)æœ‰ä¸¤ç§æƒ…å†µéœ€è¦è®¨è®ºã€‚</p><ul><li>å¦‚æœæ­¤æ—¶åˆ æ‰çš„é›†åˆçš„å†…å­˜æ€»å’Œ$nowm&lt;m$,ä¸”$b[i]=2$,æŠŠå½“å‰appåŠ è¿›æ¥èƒ½æ»¡è¶³$nowm\geq m$ï¼Œè¿™æ—¶å€™pre1å¯èƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œæˆ‘ä»¬è¦è®¨è®ºpre1ç§»é™¤åæ˜¯å¦èƒ½æ»¡è¶³æ¡ä»¶ã€‚</li><li>å¦‚æœæ­¤æ—¶åˆ æ‰çš„é›†åˆå†…å­˜æ€»å’Œ$nowm\geq m$,ä¸”$b[i]=1$,è¿™æ—¶å€™pre2å¯èƒ½æ˜¯ä¸å¿…è¦çš„ï¼Œå³ç”¨å½“å‰ç¬¬iä¸ªappä»£æ›¿ä¹‹å‰çš„pre2å¯èƒ½ä»æ—§èƒ½æ»¡è¶³$nowm\geq m$çš„æ¡ä»¶ã€‚</li></ul><p>æˆ‘ä»¬åªéœ€è¦è´ªå¿ƒåœ°å…ˆæŠŠnowmè¡¥è¶³ï¼Œå¹¶ä¸”ç”¨ä¸Šé¢ä¸¤æ¡åˆ¤æ–­ç‰¹æ®Šæƒ…å†µå³å¯ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«å­˜æ”¾æ¶ˆè€—ä¸º1å’Œæ¶ˆè€—ä¸º2çš„appï¼Œç”¨ä¸¤ä¸ªæŒ‡é’ˆè¡¨ç¤ºæ¯è¾¹çš„è¿›åº¦ã€‚</p><h2 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3ftypedef pair&lt;int,int&gt; pii;//ç”¨pairæ¥å­˜appçš„ä¿¡æ¯,firstå­˜a,secondå­˜b#define ft first#define sd secondconst int MAXN = 114514*2;pii a[MAXN];bool cmp(pii a,pii b){//è‡ªå®šä¹‰åœ°æ¯”è¾ƒå‡½æ•°ï¼Œæ€§ä»·æ¯”é«˜åœ°æ’åœ¨å‰é¢    if((double)a.ft/a.sd&gt;(double)b.ft/b.sd) return 1;    else if((double)a.ft/a.sd==(double)b.ft/b.sd)        return a.sd&lt;b.sd;    return 0;}int n,m;void solve(){    cin&gt;&gt;n&gt;&gt;m;    rep(i,1,n)        cin&gt;&gt;a[i].ft;    rep(i,1,n)        cin&gt;&gt;a[i].sd;    sort(a+1,a+1+n,cmp);    int nowm = 0;    int cost = 0;    int pre1=0,pre2=0;//ä¸Šæ¬¡é€‰æ‹©çš„    rep(i,1,n){        if(nowm&gt;=m&amp;&amp;pre2&amp;&amp;nowm-a[pre2].ft+a[i].ft&gt;=m&amp;&amp;a[i].sd==1){            cost--;            nowm=INF;            break;//å¤„ç†å®Œè¿™ç§ç‰¹æ®Šæƒ…å†µåå¯ä»¥ç›´æ¥é€€å‡ºäº†,å› ä¸ºæ¶ˆè€—ä¸å¯èƒ½æ›´å°äº†        }//ç¬¬äºŒç§ç‰¹æ®Šæƒ…å†µ        else if(nowm&lt;m&amp;&amp;pre1&amp;&amp;nowm-a[pre1].ft+a[i].ft&gt;=m){            cost++;            nowm=INF;            break;        }//ç¬¬ä¸€ç§ç‰¹æ®Šæƒ…å†µ        else if(nowm&lt;m){            if(a[i].sd==1)pre1 = i;            else if(a[i].sd==2) pre2 = i;            cost+=a[i].sd;            nowm+=a[i].ft;        }    }    if(nowm&lt;m) cout&lt;&lt;-1&lt;&lt;endl;    else cout&lt;&lt;cost&lt;&lt;endl;}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="E-Advertising-Agency"><a href="#E-Advertising-Agency" class="headerlink" title="E. Advertising Agency"></a>E. Advertising Agency</h1><h2 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>è¿™é¢˜å…¶å®æ¯”è¾ƒç®€å•ã€‚</p><p>ä¸¾ä¸€ç»„ä¾‹å­æ¥è¯´æ˜ï¼šå‡å¦‚$k=7,n=12,$ä¸»æ’­æ•°ç»„æœ‰$[5,5,4,4,4,3,3,3,3,3,2,1]$</p><p>å¦‚æœè¦ä½¿ç²‰ä¸æ•°æ€»å’Œæœ€å¤§ï¼Œé€‰å‡º7äººï¼Œé‚£ä¹ˆ5å’Œ4ç²‰ä¸çš„å¿…é¡»å…¨éƒ¨é€‰æ‹©ï¼Œä¸ç„¶ä¸å¯èƒ½è¾¾åˆ°æœ€å¤§ï¼Œä¸”1å’Œ2çš„ä¹Ÿå¿…ä¸å¯èƒ½å–ã€‚åªéœ€è¦è®¨è®º3æœ‰å‡ ç§æƒ…å†µå³å¯ã€‚</p><p>é€‰å®Œ5å’Œ4åè¿˜æœ‰$7-2-3=2$ä¸ªåé¢ï¼Œä¸€å…±æœ‰5ä¸ª3ç²‰ä¸çš„ä¸»æ’­ï¼Œæ‰€ä»¥æ–¹æ•°ä¸º$C^2_5$.</p><p>æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªcnt[1001]çš„æ•°ç»„ç»Ÿè®¡æ¯ä¸ªæ•°å­—ä¸€å…±å‡ºç°å‡ æ¬¡ã€‚å†ä»1000å¾€1å¾ªç¯ï¼Œæ‰¾åˆ°éœ€è¦åœ¨å“ªä¸ªæ•°å­—ä¸Šè®¨è®º(ä¾‹å­ä¸­æ˜¯å¯¹3è¿›è¡Œè®¨è®º)ï¼Œnowæ¥ç»Ÿè®¡å½“å‰æ¶ˆè€—äº†å‡ ä¸ªåé¢ï¼Œå½“$k-now\leq cnt[x]$æ—¶ï¼Œè¯´æ˜éœ€è¦å¯¹å½“å‰æ•°å­—è¿›è¡Œè®¨è®ºã€‚</p><h2 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3f//ç»„åˆæ•°æ¿å­const int MAXN = 3e5+5;const int med = 1e9+7;ll jc[MAXN];ll qpow(ll d,ll c){//å¿«é€Ÿå¹‚    ll res = 1;    while(c){        if(c&amp;1) res=res*d%med;        d=d*d%med;c&gt;&gt;=1;    }return res;}inline ll niyuan(ll x){return qpow(x,med-2);}void initjc(){//è®°å¾—è¦åˆå§‹åŒ–é˜¶ä¹˜    jc[0] = 1;    rep(i,1,MAXN-1) jc[i] = jc[i-1]*i%med;}inline int C(int n,int m){//næ˜¯ä¸‹é¢çš„    if(n&lt;m) return 0;    return jc[n]*niyuan(jc[n-m])%med*niyuan(jc[m])%med;}//ç»„åˆæ•°æ¿å­const int MAXX = 114514;int a[MAXX],cnt[MAXX];int n,k;//é€‰kä¸ªäººvoid solve(){    cin&gt;&gt;n&gt;&gt;k;    rep(i,1,1000) cnt[i]=0;    int hc;    rep(i,1,n){        cin&gt;&gt;hc;        cnt[hc]++;//ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°å‡ æ¬¡    }    int now=0;    repb(i,1000,1){//æ‰¾åˆ°éœ€è¦å¯¹å“ªä¸ªæ•°å­—è¿›è¡Œè®¨è®º        if(now+cnt[i]&gt;=k){            cout&lt;&lt;C(cnt[i],cnt[i]+now-k)&lt;&lt;endl;//è®¡ç®—æ’åˆ—ç»„åˆ            return;        }        now+=cnt[i];    }}int main(){    initjc();    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="F-Unusual-Matrix"><a href="#F-Unusual-Matrix" class="headerlink" title="F. Unusual Matrix"></a>F. Unusual Matrix</h1><h2 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ¯æ¬¡æ“ä½œå½±å“äº†ä¸€æ•´è¡Œ/ä¸€æ•´åˆ—ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾æ¯è¡Œå’Œæ¯åˆ—æ“ä½œäº†å‡ æ¬¡(åªéœ€è¦è€ƒè™‘æ˜¯å¥‡æ•°æ¬¡è¿˜æ˜¯å¶æ•°æ¬¡)ï¼Œä¹‹åæ£€éªŒæ¯ä¸ªæ ¼å­æ“ä½œäº†å‡ æ¬¡(ä¹Ÿåªéœ€è¦è€ƒè™‘å¥‡æ•°æ¬¡è¿˜æ˜¯å¶æ•°æ¬¡å³å¯)æ˜¯å¦å’Œä¹‹å‰æ‰€è®¾çš„è¡Œå’Œåˆ—çš„æ“ä½œæ•°åŒ¹é…å³å¯ã€‚</p><p>$jiou[i][j]$å³$(i,j)$ä¸Šçš„æ“ä½œæ•°å³$(a[i][j])xor(b[i][j])$,ä»$a[i][j]$å˜æˆ$b[i][j]$è¿›è¡Œäº†å¥‡æ•°æ¬¡è¿˜æ˜¯å¶æ•°æ¬¡æ“ä½œã€‚</p><p>$x[i]$è¡¨ç¤ºç¬¬iè¡Œè¿›è¡Œäº†å‡ æ¬¡æ“ä½œï¼Œ$y[i]$è¡¨ç¤ºç¬¬yåˆ—è¿›è¡Œäº†å‡ æ¬¡æ“ä½œã€‚</p><ul><li><p>æˆ‘ä»¬å…ˆè®¾$x[1]=0$å³ç¬¬ä¸€è¡Œè¿›è¡Œå¶æ•°æ¬¡æ“ä½œï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡$x[1]$å’Œ$jiou[1][i]$æ¨å¾—ç¬¬iåˆ—($i\in[1,n]$)çš„æ“ä½œæ•°.</p></li><li><p>ç„¶åé€šè¿‡$y[1]$å’Œ$jiou[i][1]$ï¼Œå¯ä»¥æ¨å¾—ç¬¬iè¡Œ($i\in[2,n]$)çš„æ“ä½œæ•°.</p></li></ul><p>å½“å¾—åˆ°äº†æ¯è¡Œæ¯åˆ—çš„æ“ä½œæ•°åï¼Œæˆ‘ä»¬é€šè¿‡judge()å‡½æ•°å¯¹æ¯ä¸ªæ ¼å­è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¯å¦ç¬¦åˆ<strong>â€œæ¯ä¸ªæ ¼å­çš„æ“ä½œæ•°æ˜¯æ‰€å¤„è¡Œå’Œæ‰€å¤„åˆ—çš„æ“ä½œæ•°æ€»å’Œâ€</strong>è¿™ä¸€æ¡ä»¶ï¼Œå³<code>jiou[i][j] = b[i][j]^a[i][j]</code>;ã€‚</p><p>ä¹‹åå†è®¾$x[1]=1$ï¼Œé‡å¤ä¸Šè¿°æ“ä½œå³å¯ã€‚</p><h2 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fconst int MAXN = 1145;int a[MAXN][MAXN],b[MAXN][MAXN];int jiou[MAXN][MAXN];//è®°å½•æ¯ä¸ªæ ¼å­ä¸Šæ“ä½œäº†å‡ æ¬¡int x[MAXN],y[MAXN];//åˆ†åˆ«è®°å½•è¡Œå’Œåˆ—ä¸Šæ“ä½œäº†å‡ æ¬¡int n;bool judge(){//åˆ¤æ–­è¡Œåˆ—æ“ä½œæ•°å’Œæ ¼å­æ“ä½œæ•°æ˜¯å¦åŒ¹é…    rep(i,1,n)        rep(j,1,n)            if(jiou[i][j]!=(x[i]^y[j])) return 0;    return 1;}void solve(){    cin&gt;&gt;n;    char hc;    rep(i,1,n){        rep(j,1,n){            cin&gt;&gt;hc;            a[i][j]=hc-'0';        }    }    rep(i,1,n){        rep(j,1,n){            cin&gt;&gt;hc;            b[i][j]=hc-'0';            jiou[i][j] = b[i][j]^a[i][j];        }    }    bool flag = 0;    x[1] = 0;//å…ˆå‡è®¾ç¬¬ä¸€è¡Œæ˜¯å¶æ•°    rep(j,1,n) y[j] = jiou[1][j];    rep(i,2,n) x[i] = jiou[i][1]^y[1];    if(judge()) flag = 1;    x[1] = 1;//å†è®¾ç¬¬ä¸€è¡Œæ˜¯å¥‡æ•°    rep(j,1,n) y[j] = jiou[1][j]^1;    rep(i,2,n) x[i] = jiou[i][1]^y[1];    if(judge()) flag = 1;    if(flag) cout&lt;&lt;"YES"&lt;&lt;endl;    else cout&lt;&lt;"NO"&lt;&lt;endl;}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="G-Strange-Beauty"><a href="#G-Strange-Beauty" class="headerlink" title="G. Strange Beauty"></a>G. Strange Beauty</h1><h2 id="æ€è·¯-6"><a href="#æ€è·¯-6" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å·²çŸ¥å¦‚æœè¦æ»¡è¶³$a[i]\mod a[j]=0$å³ajä¸ºaiçš„é™¤æ•°ï¼Œé‚£ä¹ˆè‚¯å®šæ»¡è¶³$a[i]\leq a[j]$ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬å¯¹æ•°ç»„ä»å°åˆ°å¤§æ’åºï¼Œåˆ™ä¸€å®šæ»¡è¶³$a[i-1]\leq a[i]$,åªéœ€è¦è€ƒè™‘å‰é¢çš„æ•°å­—æ˜¯å¦æ˜¯åé¢çš„æ•°å­—å³å¯ã€‚</p><p>ç”¨åŠ¨æ€è§„åˆ’å†™ï¼Œå¦‚æœæ˜¯æœ€æš´åŠ›çš„æ–¹æ³•ï¼š</p><ul><li>dp[i]ç»Ÿè®¡åˆ°ç¬¬iä¸ªæ•°å­—æœ€å¤šå¯ä»¥ä¿ç•™å‡ ä¸ªã€‚</li><li>ç»Ÿè®¡åˆ°ç¬¬iä¸ªæ•°å­—æ—¶ï¼Œjä»å¤´1åˆ°i-1æ‰«ä¸€éï¼Œå¦‚æœa[i]%a[j]==0,é‚£ä¹ˆdp[i]å°±å¯ä»¥æ˜¯dp[j]+1</li><li>åœ¨è¿™äº›dp[j]+1ä¸­å–æœ€å¤§å€¼èµ‹ç»™dp[i]å³å¯ã€‚</li></ul><p>è¿™æ ·çš„å¤æ‚åº¦æ˜¯$O(n^2)$çš„</p><p>ä¹‹åè€ƒè™‘æ€ä¹ˆä¼˜åŒ–ï¼š</p><p>å› ä¸ºè¦æ±‚a[i]%a[j]==0ï¼Œæ‰€ä»¥åªéœ€è¦è€ƒè™‘a[j]ä¸ºa[i]å› å­çš„æƒ…å†µï¼Œæˆ‘ä»¬æšä¸¾a[i]çš„å› å­ï¼Œå†æ£€æŸ¥ä¹‹å‰æ˜¯å¦æœ‰ç¬¦åˆæ¡ä»¶çš„a[j]å³å¯ã€‚</p><ul><li>ç”¨ä¸€ä¸ªmap[x]æ¥å­˜å½“å‰ç­‰äºxçš„æœ€å¤§ä¸‹æ ‡ï¼Œå³ä¸Šä¸€ä¸ªxå‡ºç°åœ¨å“ªä¸€ä½ç½®ã€‚</li><li>å¤„ç†a[i]æ—¶ï¼Œåªéœ€è¦æšä¸¾a[i]çš„æ‰€æœ‰å› å­yï¼Œæ£€æŸ¥map[y]ï¼Œé‚£ä¹ˆdp[i]å°±å¯ä»¥æ˜¯dp[map[y]]+1</li><li>è¿™äº›dp[map[y]]+1ä¸­å–æœ€å¤§å€¼èµ‹ç»™dp[i]å³å¯ã€‚</li></ul><p>å› ä¸ºæ•°å­—xèŒƒå›´æ¯”è¾ƒå°ï¼Œè¿™ä¸ªmapå¯ä»¥ç”¨æ•°ç»„å®ç°ï¼Œè€Œä¸”ä¼šæ¯”stlçš„mapæ›´å¿«,å¤æ‚åº¦ä¸º$O(n\cdot sqrt(n))$ã€‚æˆ‘å›¾æ–¹ä¾¿ç”¨stlçš„mapå†™çš„ï¼Œå› æ­¤å¤æ‚åº¦ä¸º$O(n\cdot sqrt(n)\cdot logn)$</p><h2 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cmath&gt;#include&lt;map&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define INF 0x3f3f3f3fconst int MAXN = 114514*2;int a[MAXN];int dp[MAXN];//å­˜æœ€å¤§é•¿åº¦map&lt;int,int&gt; mp;//ä»æ•°å­—åˆ°ä¸‹æ ‡çš„æ˜ å°„int n;void solve(){    mp.clear();    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;a[i];    sort(a+1,a+1+n);//å°çš„æ’åœ¨å‰é¢    dp[0]=0;    int res=0;    rep(i,1,n){        dp[i] = 0;        int sqr = sqrt(a[i]);        rep(k,1,sqr){//ç»†èŠ‚æ˜¯1å’Œa[i]ä¹Ÿéœ€è¦å»mapæ‰¾,å› ä¸ºå¯èƒ½æœ‰é‡å¤æ•°å­—            if(a[i]%k==0){                dp[i]=max(dp[i],dp[mp[k]]+1);//dp[i]è¦å–æœ€å¤§å€¼ï¼                dp[i]=max(dp[i],dp[mp[a[i]/k]]+1);            }        }        mp[a[i]]=i;//æ›´æ–°map        res = max(res,dp[i]);    }    cout&lt;&lt;n-res&lt;&lt;endl;}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h1><p>ä»¥åæƒ³å°½é‡æ¯æ¬¡éƒ½å†™ä¸ªé¢˜è§£å‡ºæ¥ï¼Œæˆ‘æ°´å¹³æ¯”è¾ƒèœï¼Œæ‰€ä»¥ä¸»è¦è¿˜æ˜¯ç»™é›¶åŸºç¡€å­¦å¼Ÿå­¦å¦¹çœ‹çš„QAQ</p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#691 (Div. 2) D. Glass Half Spilled(DP,èƒŒåŒ…) å«ä¸¤ç§å†™æ³•</title>
      <link href="2020/12/21/cf-691-d/"/>
      <url>2020/12/21/cf-691-d/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/contest/1459/problem/D">https://codeforces.com/contest/1459/problem/D</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>$n\leq 100$</p><p>æœ‰$n$ä¸ªç»ç’ƒæ¯ï¼Œæœ‰$a[i]$å’Œ$b[i]$ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä»£è¡¨å®¹é‡å’Œé‡Œé¢å·²ç»æœ‰çš„æ°´ï¼Œè½¬ç§»æ°´çš„æ—¶å€™ä¼šæŸå¤±ä¸€åŠçš„æ°´è¢«æ’’åˆ°åœ°ä¸Šã€‚</p><p>é—®æŠŠæ°´é›†ä¸­åˆ°$k$ä¸ªæ¯å­é‡Œçš„æ—¶å€™ï¼Œæœ€å¤šæ€»å…±å¯ä»¥æœ‰å¤šå°‘æ°´ï¼Ÿ$k=1,2,3,4\dots n$</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><p>è¿™é¢˜å±…ç„¶æ˜¯ä¸€ä¸ªå‡ ä¹æ˜¯è£¸çš„<strong>01èƒŒåŒ…</strong>ï¼</p><p>æœ‰ä¸¤ç§å†™æ³•ï¼Œå…ˆè®²æˆ‘ä¸€å¼€å§‹å†™çš„ä¸€ç§ï¼š</p><p>æ˜¯ä¸¤ä¸ªé™åˆ¶æ¡ä»¶çš„01èƒŒåŒ…$dp[i][j][k]$,ç¬¬ä¸€ç»´æ˜¯â€œå½“åªè€ƒè™‘å‰iä¸ªæ¯å­æ—¶â€ï¼Œç¬¬äºŒç»´æ˜¯â€œå–äº†å‡ ä¸ªæ¯å­â€ï¼Œç¬¬ä¸‰ç»´æ˜¯è¿™äº›æ¯å­é‡Œçš„åˆå§‹æ°´é‡$b[i]$ä¹‹å’Œã€‚</p><p>è¿™æ—¶å€™å°±å¯ä»¥å¼€å§‹æŒ‰ç…§è£¸01èƒŒåŒ…å†™äº†ï¼Œ$dp[i][j][k]$ç»´æŠ¤è¿™ä¸ªæ¡ä»¶ä¸‹æœ€å¤§çš„å®¹é‡ï¼ä¸ºä»€ä¹ˆæ˜¯æœ€å¤§çš„å®¹é‡å‘¢ï¼Ÿå› ä¸ºé€‰ä¸­çš„$k$ä¸ªæ¯å­ä¸­åˆå§‹æ°´é‡å’Œç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œè‚¯å®šæ˜¯å®¹é‡è¶Šå¤§æœ€åçš„ç»“æœä¹Ÿä¼šè¶Šå¤§(æˆ–è€…ç›¸ç­‰ï¼Œä½†è‚¯å®šä¸ä¼šå°)ã€‚</p><p>è€ƒè™‘åˆ°ç©ºé—´å¤æ‚åº¦ï¼Œ$dp$æ•°ç»„éœ€è¦æŠŠç¬¬ä¸€ç»´å˜æˆæ»šåŠ¨çš„æ¥èŠ‚çœç©ºé—´ã€‚</p><p>åœ¨å¤„ç†å®Œ$dp[j][k]$æ•°ç»„ä¹‹åï¼Œåªéœ€è¦æŒ‰ç…§é¢˜æ„åˆ—å‡ºå®é™…å€¼ï¼Œæ¯”è¾ƒåå¾—å‡ºç»“æœå³å¯</p><p>å®é™…å€¼ä¹Ÿå°±æ˜¯ é™¤å»kä¸ªæ¯å­å¤–çš„æ€»æ°´é‡$\sum_{i=1}^{n} b[i]-k$é™¤ä»¥2ä¹‹åå†åŠ ä¸Škï¼Œå³$k+(sum-k)/2$,è¿™ä¸ªå€¼è¿˜è¦è·Ÿ$dp[j][k]$å–$min$,å› ä¸ºæ¯å­çš„å®¹é‡æœ‰é™ï¼Œæœ€åå°±æ˜¯$max(min(dp[j][k],k+(sum-k)/2))$ã€‚</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p><p>ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯kæ”¹æˆkä¸ªæ¯å­çš„æ€»å®¹é‡</p><p>è¿™ä¸ªæ—¶å€™çš„ç»“æœå°±æ˜¯$max(res,min(k,dp[j][k]+(sum-dp[j][k])/2))$</p><h1 id="ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹"><a href="#ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹" class="headerlink" title="ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹"></a>ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹</h1><p>1.å› ä¸ºæœ‰çš„æ¯å­çš„åˆå§‹æ°´é‡ä¸º0ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å¼€å§‹$O(n^3)$æ±‚$dp[j][k]$çš„æ—¶å€™$k$ä¹Ÿè¦ä»0å¼€å§‹ã€‚</p><p>2.å› ä¸ºæœ‰çš„æ¯å­çš„åˆå§‹æ°´é‡ä¸º0ï¼Œæ‰€ä»¥æœ€åç»“æœçš„å¾ªç¯è¦ä»0å¼€å§‹ã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><h2 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;algorithm&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)const int MAXN = 114;#define INF 0x3f3f3f3fint cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);int dp[MAXN][10010];int a[MAXN],b[MAXN];int n,tot;void solve(){    cin&gt;&gt;n;    tot = 0;    rep(i,1,n){        cin&gt;&gt;a[i]&gt;&gt;b[i];        tot+=b[i];    }    memset(dp,-INF,sizeof(dp));    dp[0][0]=0;    rep(i,1,n){        repb(j,i,1){            repb(k,tot,0){//é”™åœ¨è¿™é‡Œï¼Œå› ä¸ºå¯èƒ½æœ‰bi=0çš„æƒ…å†µ                if(k&gt;=b[i]&amp;&amp;j) dp[j][k] = max(dp[j][k],dp[j-1][k-b[i]]+a[i]);            }        }    }    rep(j,1,n){        double res = 0;        rep(k,0,tot){//ç¬¬äºŒå¤„é”™åœ¨è¿™é‡Œï¼Œåº”è¯¥ä»0å¼€å§‹ï¼Œå› ä¸ºkæ˜¯æ°´é‡ä¸æ˜¯å®¹é‡ï¼Œæ‰€ä»¥ä¹Ÿå¯èƒ½ä¸º0            res = max(res,min((double)dp[j][k],k+(double)(tot-k)/2));        }        cout&lt;&lt;res&lt;&lt;' ';    }    cout&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;algorithm&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)const int MAXN = 114;#define INF 0x3f3f3f3fint cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);int dp[MAXN][10010];int a[MAXN],b[MAXN];int n,tota,totb;void solve(){    cin&gt;&gt;n;    tota = totb = 0;    rep(i,1,n){        cin&gt;&gt;a[i]&gt;&gt;b[i];        tota+=a[i];        totb+=b[i];    }    memset(dp,-INF,sizeof(dp));    dp[0][0]=0;    rep(i,1,n){        repb(j,i,1){            repb(k,tota,0){                if(k&gt;=a[i]&amp;&amp;j) dp[j][k] = max(dp[j][k],dp[j-1][k-a[i]]+b[i]);            }        }    }    rep(j,1,n){        double res = 0;        rep(k,0,tota){            if(dp[j][k]&gt;=0){                res = max(res,min((double)k,(double)dp[j][k]+(double)(totb-dp[j][k])/2));            }        }        cout&lt;&lt;res&lt;&lt;' ';    }    cout&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> DP </tag>
            
            <tag> èƒŒåŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#688 (Div. 2) D. Checkpoints(æœŸæœ›,æ¦‚ç‡,è´ªå¿ƒ)</title>
      <link href="2020/12/14/cf-688-d/"/>
      <url>2020/12/14/cf-688-d/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/contest/1453/problem/D">https://codeforces.com/contest/1453/problem/D</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>æ¸¸æˆæœ‰è‹¥å¹²ä¸ªå…³å¡ï¼Œæœ‰äº›å…³å¡å‰é¢æœ‰å­˜æ¡£ç‚¹ï¼Œæœ‰äº›å…³å¡æ²¡æœ‰ã€‚</p><p>é€šè¿‡æ¯ä¸ªå…³å¡çš„æ¦‚ç‡éƒ½æ˜¯$\frac{1}{2}$ï¼Œå¦‚æœå¤±è´¥åä»ä¸Šä¸€æ¬¡å­˜æ¡£çš„å­˜æ¡£ç‚¹å¤„å¼€å§‹ã€‚</p><p>è¾“å…¥ä¸€ä¸ª$k$ã€‚</p><p>è¾“å‡ºä¸€ä¸ªåºåˆ—ï¼Œ0ä»£è¡¨å…³å¡å¼€å¤´æ²¡æœ‰å­˜æ¡£ç‚¹ï¼Œ1åˆ™æœ‰ã€‚ç¬¬ä¸€ä¸ªå…³å¡å‰é¢è‚¯å®šæ˜¯æœ‰å­˜æ¡£ç‚¹çš„ã€‚</p><p>æ±‚ä¸€ç§å®‰æ’ä½¿å¾—æ‰“é€šæ‰€æœ‰å…³å¡çš„æ—¶é—´æœŸæœ›ä¸º$k$ã€‚</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><p>ä»¥å‰ä»æ¥æ²¡å†™è¿‡æœŸæœ›ç›¸å…³çš„é¢˜ï¼Œè¿™æ¬¡ç›´æ¥æ‡µé€¼ã€‚</p><p>æˆ‘ä»¬è®¾å½“å‰ç«™åœ¨å…³å¡$x$ï¼Œé€šè¿‡$x$è¿™ä¸€å…³éœ€è¦çš„æ—¶é—´æœŸæœ›ä¸º$f_x$ã€‚</p><ul><li>å…ˆè®¨è®ºåªæœ‰1çš„æƒ…å†µï¼š</li></ul><p>å¯¹$[1,1]$è¿™ä¸ªåºåˆ—:å¯ä»¥åˆ—å‡º</p><p>$f_1=1\cdot\frac{1}{2}+\frac{1}{2}\cdot(f_1+1)$</p><p>$f_2=1\cdot\frac{1}{2}+\frac{1}{2}\cdot(f_2+1)$</p><p>ä¸éš¾ç†è§£ï¼Œå‰åŠéƒ¨åˆ†æ˜¯ä¸€æ¬¡é€šè¿‡ï¼ŒååŠéƒ¨åˆ†æ˜¯è¿™æ¬¡æ²¡é€šè¿‡ï¼Œé‚£ä¹ˆä¸‹æ¬¡çš„å°è¯•çš„æœŸæœ›å°±æ˜¯$f_1+1$ï¼Œ$+1$æ˜¯å› ä¸ºè¿™æ¬¡å¤±è´¥äº†ï¼Œä¸‹æ¬¡çš„æ—¶å€™å°±è¦å¤šèŠ±ä¸€ä¸ªæ—¶é—´ã€‚</p><p>æ‰€ä»¥å¦‚æœå¯¹äºä¸€æ®µé•¿åº¦ä¸ºnå…¨æ˜¯1çš„åºåˆ—ï¼Œé€šå…³çš„æœŸæœ›å°±æ˜¯$2\cdot n$</p><ul><li>æ¥ä¸‹æ¥è®¨è®ºæœ‰0çš„æƒ…å†µï¼š</li></ul><p>å¯¹$[1,0,0]$è¿™ä¸ªåºåˆ—:å¯ä»¥åˆ—å‡ºf_1</p><p>$f_1=1\cdot\frac{1}{2}+\frac{1}{2}\cdot(f_1+1)$</p><p>$f_2=1\cdot\frac{1}{2}+\frac{1}{2}\cdot(f_2+f_1+1)$ï¼Œå› ä¸º2æ²¡æœ‰å­˜æ¡£ç‚¹ï¼Œæ‰€ä»¥è¦é‡æ–°æ‰“ç¬¬ä¸€å…³ï¼ŒåŠ ä¸Š$f_1$</p><p>åŒ–ç®€å‡º$f_2=f_1+2=4$</p><p>$f_3=1\cdot\frac{1}{2}+\frac{1}{2}\cdot(f_1+f_2+f_3+1)$</p><p>åŒ–ç®€å‡º$f_3=f_1+f_2+2=2\cdot f_1+4=8$</p><p>å¯¹äºä¸€æ®µè¿ç»­çš„0ï¼Œç¬¬$i$ä¸ª0çš„æ—¶é—´æœŸæœ›å°±æ˜¯$2^i$ã€‚</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p><p>å¦‚æœå…¨æ”¾1çš„è¯ï¼Œé•¿åº¦åªèƒ½æ”¾åˆ°2000ï¼Œä½†æ˜¯kå¯ä»¥åˆ°1e18è¿™ä¹ˆå¤§ï¼Œæ‰€ä»¥ä¸è¡Œ</p><p>æˆ‘ä»¬å°±å°½é‡æ”¾0ï¼Œç„¶åè¿™æ®µ0å¤ªå¤§äº†å°±æ”¾ä¸ª1é‡æ–°ä»2å¼€å§‹ã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define INF 0x3f3f3f3fint a[2077];ll f[2020];ll k;void solve(){    cin&gt;&gt;k;    if(k%2){cout&lt;&lt;-1&lt;&lt;endl;return;}    ll now = 0;    a[1] = 1;    f[1] = 2;    now+=2;//a1    int i;    for(i=2;now&lt;k;i++){        if(now+f[i-1]*2&lt;=k){            a[i] = 0;            f[i] = f[i-1]*2;        }        else{            a[i] = 1;            f[i] = 2;        }        now+=f[i];    }    i--;    cout&lt;&lt;i&lt;&lt;endl;    rep(j,1,i){        cout&lt;&lt;a[j]&lt;&lt;' ';    }    cout&lt;&lt;endl;}int main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> æœŸæœ› </tag>
            
            <tag> æ¦‚ç‡ </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#686 (Div. 3) F. Array Partition(ST,äºŒåˆ†)</title>
      <link href="2020/12/14/cf-686-f/"/>
      <url>2020/12/14/cf-686-f/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/contest/1454/problem/F">https://codeforces.com/contest/1454/problem/F</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>ç»™ä¸€ä¸²åºåˆ—ï¼Œæ˜¯å¦èƒ½æœ‰ä¸€ç§æ–¹æ¡ˆæŠŠåºåˆ—åˆ’åˆ†æˆè¿ç»­çš„ä¸‰æ®µ$d1,d2,d3$ï¼Œä½¿å¾—$max(d1)=min(d2)=max(d3)$ã€‚</p><p>æ¯”å¦‚åºåˆ—$[1,2,3,3,3,4,4,3,4,2,1]$å¯ä»¥åˆ’åˆ†æˆ$[1,2,3,3,3,4],[4],[3,4,2,1]$</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><p>è¿™é¢˜æˆ‘æ˜¯æ ¹æœ¬æƒ³ä¸åˆ°è¦äºŒåˆ†ã€‚è¿™é¢˜çš„äºŒåˆ†æ¯”è¾ƒå¥‡å¦™ã€‚</p><p>é¦–å…ˆé¢„å¤„ç†ä¸¤ä¸ª$max$,ä»å¤´å¼€å§‹çš„$max$å€¼ä»ç»“å°¾å¼€å§‹çš„$max$å€¼ï¼ˆç”¨äºå¿«é€ŸæŸ¥è¯¢$d1$å’Œ$d3$)ã€‚å†<strong>ç»´æŠ¤ä¸€ä¸ªstè¡¨</strong>æŸ¥è¯¢åŒºé—´æœ€å°å€¼$min$ï¼ˆç”¨äºå¿«é€ŸæŸ¥è¯¢$d2$ï¼‰</p><p>è®¾$d2$å·¦å³ç«¯ç‚¹åˆ†åˆ«ä¸º$l,r$ã€‚</p><p>æˆ‘ä»¬<strong>æšä¸¾</strong>$l$å†<strong>äºŒåˆ†</strong>å¯»æ‰¾$r$,å¤æ‚åº¦$O(n^2)$</p><ul><li><p>å¦‚æœ$min(d2)&gt;max(d1)$ï¼Œè¯´æ˜<strong>d2å¤ªé•¿</strong>æˆ–è€…d1å¤ªçŸ­ï¼Œè¿™æ—¶å€™<strong>lå·²ç»å›ºå®š</strong>ï¼Œæ‰€ä»¥åªèƒ½<strong>è®©d2å˜çŸ­</strong>ï¼Œå³midå‘å·¦ç§»åŠ¨ã€‚</p></li><li><p>å¦‚æœ$max(d1)&gt;max(d3)$ï¼Œè¯´æ˜<strong>d1å¤ªé•¿</strong>æˆ–è€…d3å¤ªçŸ­ï¼Œè¿™æ—¶å€™<strong>lå·²ç»å›ºå®š</strong>ï¼Œæ‰€ä»¥åªèƒ½<strong>è®©d3å˜é•¿</strong>ï¼Œå³$mid$å‘å·¦ç§»åŠ¨ã€‚</p></li></ul><p>å†çœ‹çœ‹è¿™å¥å¯¹ä¸å¯¹ï¼Ÿ</p><ul><li>å¦‚æœ$min(d2)&gt;max(d3)$ï¼Œè¯´æ˜$d2$å¤ªé•¿æˆ–è€…$d3$å¤ªçŸ­ï¼Œæ‰€ä»¥åº”è¯¥å‘å·¦ç§»åŠ¨$mid$?</li></ul><p>ä¸å¯¹ï¼Œå› ä¸ºåœ¨å‘å·¦ç§»åŠ¨$mid$çš„æ—¶å€™ï¼Œ$max(d3)$å¢å¤§çš„åŒæ—¶$min(d2)$ä¹Ÿåœ¨å¢å¤§ï¼Œå¹¶ä¸æ˜¯åœ¨å‘æ›´æ¥è¿‘çš„åœ°æ–¹è¡Œè¿›ï¼Œæ‰€ä»¥ä¸è¡Œï¼</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">while(l&lt;r){mid = (l+r)&gt;&gt;1;tmp = qry(i,mid);//è¿™é‡Œæˆ‘ä¸€å¼€å§‹å¤šå†™äº†ä¸ªæ¡ä»¶å°±æ˜¯max2å’Œtmpæ¯”è¾ƒçš„,è¿™ä¸ªä¸èƒ½æœ‰//å› ä¸ºæ‰©çš„æ—¶å€™max2å’Œtmpéƒ½å¯èƒ½ä¸‹é™ï¼Œå¹¶ä¸æ˜¯å¾€æ›´æ¥è¿‘çš„æ–¹å‘èµ°    if(tmp&gt;max1[i-1]||max1[i-1]&lt;max2[mid+1])l = mid+1;else if(tmp&lt;max1[i-1]||max1[i-1]&gt;max2[mid+1])r = mid-1;else break;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;algorithm&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;vector&gt;#include&lt;queue&gt;#include&lt;cmath&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)#define ll long long#define log(x) (31-__builtin_clz(x))//è°¢è°¢hjtconst int MAXN = 2e5+5;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);const int LOGN = log(MAXN)/log(2); int M[MAXN][LOGN+3]; int a[MAXN];int z,m,n;int max1[MAXN];int max2[MAXN];void init(){//åˆå§‹åŒ–ï¼Œå¤æ‚åº¦O(nlogn) for(int i=1;i&lt;=n;i++) M[i][0]=i;//é•¿åº¦ä¸º1çš„åŒºé—´æœ€å€¼æ˜¯è‡ªå·± for(int j=1;j&lt;=LOGN;j++){for(int i=1;i&lt;=n-(1&lt;&lt;j)+1;i++){if(a[M[i][j-1]]&lt;a[M[i+(1&lt;&lt;(j-1))][j-1]]) M[i][j] = M[i][j-1];//è¿™é‡Œä»¥æœ€å°å€¼ä¸ºä¾‹ else M[i][j] = M[i+(1&lt;&lt;j-1)][j-1];}} }inline int query(int l,int r){int k = log(r-l+1)/log(2);//å‘ä¸‹å–æ•´if(a[M[l][k]]&lt;a[M[r-(1&lt;&lt;k)+1][k]]) return M[l][k];else return M[r-(1&lt;&lt;k)+1][k];}inline int qry(int l,int r){    return a[query(l,r)];//ç›´æ¥è¿”å›æ•°å€¼}bool flag;void solve(){    int la,lb,lc;    flag = 0;    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;a[i];    init();    max1[0]=max2[n+1] = 0;    rep(i,1,n) max1[i] = max(max1[i-1],a[i]);//å‰ç¼€æœ€å¤§å€¼    repb(i,n,1) max2[i] = max(max2[i+1],a[i]);    int l,r,mid,tmp;    rep(i,2,n-1){//æšä¸¾ä¸­é—´æ®µçš„å¼€å¤´        l = i,r = n-1;//äºŒåˆ†        while(l&lt;r){            mid = (l+r)&gt;&gt;1;            tmp = qry(i,mid);            //è¿™é‡Œæˆ‘ä¸€å¼€å§‹å¤šå†™äº†ä¸ªæ¡ä»¶å°±æ˜¯max2å’Œtmpæ¯”è¾ƒçš„,è¿™ä¸ªä¸èƒ½æœ‰            //å› ä¸ºæ‰©çš„æ—¶å€™max2å’Œtmpéƒ½å¯èƒ½ä¸‹é™ï¼Œå¹¶ä¸æ˜¯å¾€æ›´æ¥è¿‘çš„æ–¹å‘èµ°            if(tmp&gt;max1[i-1]||max1[i-1]&lt;max2[mid+1])                l = mid+1;            else if(tmp&lt;max1[i-1]||max1[i-1]&gt;max2[mid+1])                r = mid-1;            else break;        }        mid = (l+r)&gt;&gt;1;        if(mid&gt;=i&amp;&amp;mid&lt;=n-1){            tmp = qry(i,mid);            if(tmp==max1[i-1]&amp;&amp;tmp==max2[mid+1]){                flag = 1;                la = i-1,lb = mid-i+1,lc = n-mid;                break;            }        }    }    if(!flag) cout&lt;&lt;"NO"&lt;&lt;endl;    else{        cout&lt;&lt;"YES"&lt;&lt;endl;        cout&lt;&lt;la&lt;&lt;' '&lt;&lt;lb&lt;&lt;' '&lt;&lt;lc&lt;&lt;endl;    }}signed main(){    int z;    cin&gt;&gt;z;    while(z--) solve();}//äºŒåˆ†yyds<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> ST </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ¿æ•´ç†--å›¾è®º(æŒç»­æ›´æ–°)</title>
      <link href="2020/12/13/graph/"/>
      <url>2020/12/13/graph/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç»œæµç›¸å…³"><a href="#ç½‘ç»œæµç›¸å…³" class="headerlink" title="ç½‘ç»œæµç›¸å…³"></a>ç½‘ç»œæµç›¸å…³</h2><h3 id="SFPA"><a href="#SFPA" class="headerlink" title="SFPA"></a>SFPA</h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;queue&gt;#include&lt;vector&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define ll long longconst int MAXN = 114514;const int MAXM = 514514;const ll LINF = 1ll&lt;&lt;61;//å‰å‘æ˜Ÿstruct Edge{    int to,w,nxt;}edges[MAXM];int head[MAXN];int n,m,s;int cnt;inline void add_edge(int u,int v,int w){    edges[cnt].to = v;    edges[cnt].w = w;    edges[cnt].nxt = head[u];    head[u] = cnt++;}//SPFAqueue&lt;int&gt; q;ll dis[MAXN];//æ¯ä¸ªç‚¹å½“å‰æœ€å°è·ç¦»bool vis[MAXN];//è®°å½•é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰è¯¥ç‚¹inline void init(){//åˆå§‹åŒ–å‰å‘æ˜Ÿå’ŒSPFAçš„disæ•°ç»„    rep(i,1,n) dis[i]=LINF,head[i]=-1;    cnt = 0;}inline void solve(){    cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;    init();//è®°å¾—è¦åˆå§‹åŒ–    int u,v,w;    rep(i,1,m){        cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;        add_edge(u,v,w);    }    dis[s] = 0;    q.push(s);    int now;    while(!q.empty()){        now = q.front();        q.pop();        vis[now] = 0;//visè¡¨ç¤ºé˜Ÿä¸­æœ‰æ— è¯¥ç‚¹        //æ¯æ¬¡å–å‡ºé˜Ÿé¦–,å¹¶æ£€æŸ¥å…³è”ç‚¹æ˜¯å¦å¯ä»¥è¿›è¡Œæ¾å¼›æ“ä½œ        for(int i=head[now];i!=-1;i=edges[i].nxt){            v = edges[i].to;            if(dis[v]&gt;dis[now]+edges[i].w){//æ¾å¼›æ“ä½œ                dis[v] = dis[now]+edges[i].w;                if(!vis[v]){//å¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰ç‚¹v,åˆ™å°†vå…¥é˜Ÿ                    vis[v] = 1;                    q.push(v);                }            }        }    }    rep(i,1,n) cout&lt;&lt;dis[i]&lt;&lt;' ';    //æˆ‘è¿™é‡Œè¿˜æ²¡æœ‰å¯¹åˆ°è¾¾ä¸äº†çš„ç‰¹æ®Šæƒ…å†µè¿›è¡Œå¤„ç†    cout&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è´¹ç”¨æµ-SPFAæ‰¾æœ€çŸ­å¢å¹¿è·¯"><a href="#è´¹ç”¨æµ-SPFAæ‰¾æœ€çŸ­å¢å¹¿è·¯" class="headerlink" title="è´¹ç”¨æµ-SPFAæ‰¾æœ€çŸ­å¢å¹¿è·¯"></a>è´¹ç”¨æµ-SPFAæ‰¾æœ€çŸ­å¢å¹¿è·¯</h3><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define INF 0x7fffffffconst int N = 5e3+5;const int M = 114514;//å› ä¸ºæ˜¯åŒå‘è¾¹,è¦è®°å¾—å¼€ä¸¤å€å¤§çš„æ•°ç»„!int n;//å‰å‘æ˜Ÿå­˜å›¾int t=1;//æ€»è¾¹æ•°int u[M],v[M],c[M],co[M],nxt[M],head[M];inline void add_edge(int x,int y,int z,int zo){//èµ·ç‚¹ç»ˆç‚¹æµé‡è´¹ç”¨    u[++t]=x;v[t]=y;//æ­£å‘è¾¹    c[t]=z;co[t]=zo;    nxt[t]=head[x];head[x]=t;    u[++t]=y;v[t]=x;//åå‘è¾¹    c[t]=0;co[t]=-zo;    nxt[t]=head[y];head[y]=t;}//SPFAint S,T;int q[M],l,r;//åŒç«¯é˜Ÿåˆ—int dis[N];bool in[N];//åœ¨ä¸åœ¨queueä¸­int f[N];//è®°å½•è·¯å¾„inline bool spfa(){    rep(i,1,n) in[i]=0,dis[i]=INF;//åˆå§‹åŒ–    dis[S]=0;in[S]=1;    l=r=M&gt;&gt;1;q[l]=S;//æ‰‹å†™é˜Ÿåˆ—    while(l&lt;=r){        int now=q[l++];//å–é˜Ÿé¦–        if(now==T) continue;        for(int i=head[now];i;i=nxt[i])            if(c[i]&amp;&amp;dis[now]+co[i]&lt;dis[v[i]]){//è´¹ç”¨æ›´å°çš„è·¯                dis[v[i]]=dis[now]+co[i];                f[v[i]]=i;//è®°å½•è·¯å¾„!å¢å¹¿è·¯ç»è¿‡å“ªäº›è¾¹                if(!in[v[i]]){//å¦‚æœé˜Ÿä¸­æ²¡æœ‰åˆ™å…¥é˜Ÿ                    in[v[i]]=1;                    if(dis[v[i]]&lt;dis[q[l]])q[--l]=v[i];else q[++r]=v[i];                    //åŒç«¯é˜Ÿåˆ—ä¼˜åŒ–spfa                }            }        in[now]=0;    }    return dis[T]&lt;INF;//æ˜¯å¦æ‰¾åˆ°å¢å¹¿è·¯}int i,tmp;inline void costflow(){    int ans=0,flow=0;//æœ€å°è´¹ç”¨,æœ€å¤§æµ    while(spfa()){        //ä»ç»ˆç‚¹æ ¹æ®è®°å½•çš„fæ‰¾åˆ°å¢å¹¿è·¯        for(tmp=INF,i=T;i!=S;i=u[f[i]]) if(tmp&gt;c[f[i]]) tmp=c[f[i]];        //æ±‚è¿™ä¸€æ¬¡æµå¤šå°‘(æ‰€æœ‰è¾¹å‰©ä½™æµé‡ä¸­æœ€å°å€¼)        for(ans+=dis[i=T]*tmp;i!=S;i=u[f[i]]) c[f[i]]-=tmp,c[f[i]^1]+=tmp;        //å‡å»æµé‡å¹¶åŠ åœ¨åå‘è¾¹ä¸Š,å¹¶ä¸”è®¡ç®—è´¹ç”¨        flow+=tmp;    }    printf("%d %d\n",flow,ans);}int main(){    int m;    scanf("%d%d%d%d",&amp;n,&amp;m,&amp;S,&amp;T);    int u,v,z,zo;    while(m--){        scanf("%d%d%d%d",&amp;u,&amp;v,&amp;z,&amp;zo);        add_edge(u,v,z,zo);    }    costflow();}//å‚è€ƒclarisè´¹ç”¨æµæ¿å­//æ´›è°·P3381//https://www.luogu.com.cn/problem/P3381<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿é€šæ€§ç›¸å…³"><a href="#è¿é€šæ€§ç›¸å…³" class="headerlink" title="è¿é€šæ€§ç›¸å…³"></a>è¿é€šæ€§ç›¸å…³</h2><h3 id="Tarjanæ±‚å¼ºè¿é€šåˆ†é‡"><a href="#Tarjanæ±‚å¼ºè¿é€šåˆ†é‡" class="headerlink" title="Tarjanæ±‚å¼ºè¿é€šåˆ†é‡"></a>Tarjanæ±‚å¼ºè¿é€šåˆ†é‡</h3><p>å¯ä»¥ç”¨äºæœ‰å‘å›¾é—®é¢˜çš„ç¼©ç‚¹ã€‚</p><p>$dfn[u]$è®°å½•å½“å‰èŠ‚ç‚¹uæ˜¯ç¬¬å‡ ä¸ªè®¿é—®åˆ°çš„ï¼›</p><p>$low[u]$å®šä¹‰ä¸º$Subtree(u)$ä¸­$dfn(u)$æœ€å°çš„ï¼Œæˆ–è€…$Subtree(u)$ä¸­çš„ç‚¹é€šè¿‡**éæ ‘è¾¹(ä¸åœ¨å­æ ‘ä¸Šçš„è¾¹)**ï¼ˆè¿”ç¥–è¾¹æˆ–è€…æ¯”$rt$è¿˜é«˜çš„è¾¹ï¼Ÿï¼‰$low[u]$åˆå§‹å€¼å®šuï¼Œå¦‚æœé€šè¿‡è¾¹è¿åˆ°$rt$ä¹‹ä¸Šçš„ç‚¹å¯æ›´æ–°ï¼Œåˆé€’å½’é€šè¿‡å„¿å­$low[v]$æ¥æ›´æ–°ã€‚</p><p>è¿é€šå›¾ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª$dfn[u]=low[u]$,è¿™ä¸ªç‚¹æ˜¯æ ¹èŠ‚ç‚¹ã€‚é€šè¿‡ä¸€ä¸ªæ ˆæŒ‰ç…§dfsçš„é¡ºåºå…¥æ ˆï¼Œå›æº¯çš„æ—¶å€™åˆ¤æ–­å¦‚æœä¸€ä¸ªç‚¹çš„$dfn[u]=low[u]$ï¼Œåˆ™ä»è¿™ä¸ªç‚¹åˆ°æ ˆé¡¶çš„æ‰€æœ‰èŠ‚ç‚¹å½’å…¥ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;#include&lt;map&gt;#include&lt;queue&gt;#include&lt;cmath&gt;using namespace std;template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=b;i--)#define INF 0x3f3f3f3f#define cendl printf("\n")ll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a; }//#define INF 0x7fffffffconst int MAXN = 2e6+5;int n;vector&lt;int&gt; e[MAXN];//å­˜å›¾ int dfn[MAXN],low[MAXN];int dfncnt;//dfnè‡ªå¢ä¸‹æ ‡ int s[MAXN],tp;//æ•°ç»„æ¨¡æ‹Ÿæ ˆ,tpè®°å½•å¤§å° bool in[MAXN];//è®°å½•è¯¥ç‚¹æ˜¯å¦åœ¨æ ˆä¸­ int scc[MAXN],sc;//èŠ‚ç‚¹iæ‰€åœ¨sccçš„ç¼–å·,scè®°å½•æœ‰å‡ ä¸ªå¼ºè¿é€š int sz[MAXN];//å¼ºè¿é€šiçš„å¤§å° int indg[MAXN];//è®°å½•ç¼©ç‚¹åçš„å…¥åº¦ï¼ˆè¿™é¢˜æ‰æœ‰çš„ void tarjan(int u){low[u]=dfn[u]=++dfncnt;//lowåˆå§‹å€¼ä¸ºè‡ªèº«dfns[++tp]=u;//æ¨uå…¥æ ˆï¼Œä»1å¼€å§‹ in[u]=1;//è®°å½•uç‚¹åœ¨æ ˆä¸­ for(auto v:e[u]){//è®¿é—®åˆ°æ–°ç‚¹çš„æƒ…å†µ if(!dfn[v]){tarjan(v);low[u] = min(low[u],low[v]);//ç”¨low[v}æ›´æ–°low[u] }else if(in[v])//vè¢«è®¿é—®è¿‡ï¼Œä½†æ˜¯åœ¨æ ˆä¸­ low[u] = min(low[u],dfn[v]);}if(dfn[u]==low[u]){//uæ˜¯è¿é€šåˆ†é‡çš„æ ¹èŠ‚ç‚¹sc++;//å¼ºè¿é€šæ•°é‡++sz[sc] = 0; while(s[tp]!=u){//uå’Œuä¹‹åçš„ç‚¹å…¨éƒ¨å‡ºæ ˆ scc[s[tp]] = sc;//è¿™ä¸ªç‚¹åŒ…å«äºç¬¬å‡ ä¸ªå¼ºè¿é€šsz[sc]++;//uä¸ºæ ¹çš„è¿™ä¸ªå¼ºè¿é€šçš„å¤§å° in[s[tp]] = 0;//å‡ºæ ˆ tp--; }scc[u] = sc;//ç»™æ ¹èŠ‚ç‚¹æ ‡ï¼Œå±äºç¬¬scä¸ªå¼ºè¿é€š sz[sc]++;in[u] = 0;tp--;}} void reset(){tp = sc = dfncnt =0;rep(i,1,n){in[i] = dfn[i] = 0;//lowä¸ç”¨æ¸…ç©ºï¼Œszåœ¨ä¹‹åç”¨åˆ°å†æ¸…ç©º e[i].clear();}}int main(){cin&gt;&gt;n;reset();int v;rep(u,1,n){while(cin&gt;&gt;v&amp;&amp;v!=0) e[u].push_back(v);} rep(u,1,n)if(!dfn[u]) tarjan(u);rep(i,1,sc) indg[i] = 0;//è¿™ä¸ªä¸åŒ…å«åœ¨tarjané‡Œé¢ï¼Œæ˜¯è¿™é¢˜è®°å½•å…¥åº¦çš„ rep(u,1,n){for(auto v:e[u]){if(scc[u]!=scc[v]) indg[scc[v]]++;}}int res = 0;rep(i,1,sc){if(indg[i]==0) res++;}cout&lt;&lt;res&lt;&lt;endl;}//æ´›è°·P2835 åˆ»å½•å…‰ç›˜ https://www.luogu.com.cn/problem/P2835#submit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Tarjanæ±‚å‰²ç‚¹"><a href="#Tarjanæ±‚å‰²ç‚¹" class="headerlink" title="Tarjanæ±‚å‰²ç‚¹"></a>Tarjanæ±‚å‰²ç‚¹</h3><p>å®šä¹‰ï¼šå»æ‰è¿™ä¸ªç‚¹ï¼Œè¿é€šåˆ†é‡æ•°é‡+1</p><p>æ— å‘å›¾çš„$low[u]$åœ¨è¿™é‡Œè¡¨è¿°æˆï¼šç‚¹$u$åœ¨<strong>ä¸ç»è¿‡å…¶çˆ¶äº²çš„æƒ…å†µä¸‹èƒ½è¾¾åˆ°çš„æœ€å°æ—¶é—´æˆ³/è¿‡ä¸€æ¡éæ ‘è¾¹è¾¾åˆ°çš„æœ€å°æ—¶é—´æˆ³</strong>(æœ€å°çš„$dfn$)</p><p>å¯¹äºæŸä¸ªé¡¶ç‚¹$u$ï¼Œå¦‚æœ$u$çš„å„¿å­$v$ä¸­ï¼Œå­˜åœ¨è‡³å°‘ä¸€ä¸ª$low[v]\ge dfn[u]$ï¼Œå³vå­æ ‘ä¸­æ— æ³•å›åˆ°ç¥–å…ˆï¼ˆå³æœ€é«˜ä¹Ÿåªèƒ½å›åˆ°çˆ¶äº²uï¼‰ï¼Œåˆ™uæ˜¯å‰²ç‚¹ã€‚</p><p>å¦‚æœæ˜¯$dfn[u]=1$å³ç¥–å…ˆçš„ç‚¹ï¼Œæ»¡è¶³å„¿å­æ•°é‡$\ge 2$å³å¯ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;vector&gt;#include&lt;algorithm&gt;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)using namespace std;const int MAXN = 114514;int n,m;vector&lt;int&gt;e[MAXN];bool vis[MAXN];bool flag[MAXN];//æ ‡è®°å‰²ç‚¹int res;//è®°å½•å‰²ç‚¹æ•°é‡int low[MAXN],dfn[MAXN],dfncnt;//è€tarjanäº†void Tarjan(int u,int pre){//pre=-1æ—¶ä»£è¡¨æ˜¯ç¥–å…ˆ    vis[u] = 1;    low[u] = dfn[u] = ++dfncnt;    int cntchild=0;//å„¿å­æ•°é‡    for(auto v:e[u]){        if(!vis[v]){            cntchild++;            Tarjan(v,u);            low[u] = min(low[u],low[v]);            if(pre!=-1&amp;&amp;low[v]&gt;=dfn[u]&amp;&amp;!flag[u]){//ç®—æ³•æ ¸å¿ƒ                flag[u]=1;                res++;            }        }        else if(v!=pre)//å¾€ä¸Šçš„è¾¹,æ›´æ–°å½“å‰èŠ‚ç‚¹çš„low            low[u] = min(low[u],dfn[v]);    }    if(pre==-1&amp;&amp;cntchild&gt;=2&amp;&amp;!flag[u]){//uä¸ºç¥–å…ˆè¦å¦å¤–è®¨è®º        flag[u]=1;        res++;    }}void solve(){    cin&gt;&gt;n&gt;&gt;m;    //åˆå§‹åŒ–    rep(i,1,n){vis[i]=flag[i]=0;e[i].clear();}    res=dfncnt=0;    int u,v;    rep(i,1,m){        cin&gt;&gt;u&gt;&gt;v;        e[u].push_back(v);        e[v].push_back(u);    }    rep(i,1,n) if(!vis[i]) Tarjan(i,-1);//ä¹Ÿå¯åœ¨è¿™é‡ç½®dfncnt    cout&lt;&lt;res&lt;&lt;endl;    rep(i,1,n){        if(flag[i]) cout&lt;&lt;i&lt;&lt;' ';    }    cout&lt;&lt;endl;}int main(){    solve();}//P3388 ã€æ¨¡æ¿ã€‘å‰²ç‚¹ï¼ˆå‰²é¡¶ï¼‰//https://www.luogu.com.cn/problem/P3388<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Tarjanæ±‚æ¡¥-å‰²è¾¹"><a href="#Tarjanæ±‚æ¡¥-å‰²è¾¹" class="headerlink" title="Tarjanæ±‚æ¡¥(å‰²è¾¹)"></a>Tarjanæ±‚æ¡¥(å‰²è¾¹)</h3><p>ç±»ä¼¼æ±‚å‰²ç‚¹ï¼Œå’Œå‰²ç‚¹å·®ä¸å¤šï¼Œåªè¦æ”¹ä¸€å¤„ï¼š$low[v]&gt;dfn[u]$ å°±å¯ä»¥äº†ï¼Œå› ä¸ºä»â€&gt;=â€å˜æˆäº†â€=â€ï¼Œæ‰€ä»¥ä¸éœ€è¦è€ƒè™‘ç¥–å…ˆèŠ‚ç‚¹çš„é—®é¢˜ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int low[MAXN], dfn[MAXN], iscut[MAXN], dfs_clock;bool isbridge[MAXN];vector&lt;int&gt; G[MAXN];int cnt_bridge;int father[MAXN];void tarjan(int u, int fa) {    father[u] = fa;    low[u] = dfn[u] = ++dfs_clock;    for (int i = 0; i &lt; G[u].size(); i++) {        int v = G[u][i];        if (!dfn[v]) {            tarjan(v, u);            low[u] = min(low[u], low[v]);            if (low[v] &gt; dfn[u]) {//ç®—æ³•æ ¸å¿ƒ                isbridge[v] = true;                ++cnt_bridge;            }        }         else if (dfn[v] &lt; dfn[u] &amp;&amp; v != fa) {            low[u] = min(low[u], dfn[v]);        }    }}//æ‘˜è‡ªOIWIKI//https://oi-wiki.org/graph/cut/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACMæ¨¡æ¿ </tag>
            
            <tag> å›¾è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ¿æ•´ç†--æ•°æ®ç»“æ„(æŒç»­æ›´æ–°)</title>
      <link href="2020/11/29/data-structure/"/>
      <url>2020/11/29/data-structure/</url>
      
        <content type="html"><![CDATA[<h2 id="å¹³è¡¡æ ‘-æ— æ—‹è½¬"><a href="#å¹³è¡¡æ ‘-æ— æ—‹è½¬" class="headerlink" title="å¹³è¡¡æ ‘(æ— æ—‹è½¬)"></a>å¹³è¡¡æ ‘(æ— æ—‹è½¬)</h2><h3 id="æ›¿ç½ªç¾Šæ ‘"><a href="#æ›¿ç½ªç¾Šæ ‘" class="headerlink" title="æ›¿ç½ªç¾Šæ ‘"></a>æ›¿ç½ªç¾Šæ ‘</h3><p>æ˜¯æ¯”è¾ƒä¼˜é›…çš„æš´åŠ›(æƒ³åˆ°äº†è«é˜Ÿ)ã€‚</p><p>æ ¹æ®å®šä¹‰çš„alphaç­‰å‚æ•°æ¥åˆ¤æ–­æ ‘æ˜¯å¦éœ€è¦é‡æ„ã€‚é‡æ„çš„æ—¶å€™ï¼Œå…ˆä¸­åºéå†å¾—åˆ°åºåˆ—ï¼Œç„¶ååˆ©ç”¨åˆ†æ²»çš„æ€æƒ³ï¼Œæ¯æ¬¡æ‹èµ·ä¸­é—´çš„ç‚¹ä½œä¸ºå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œç„¶åé€’å½’å¤„ç†è¿™ä¸ªç‚¹å·¦å³ä¸¤ç«¯çš„åºåˆ—ã€‚</p><p>æ¯æ¬¡æ’å…¥å‡æ‘Šåˆ°çš„å¤æ‚åº¦æ˜¯$O(log(size(T)))$</p><p>2020.11.26</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;vector&gt;#include&lt;algorithm&gt;#include&lt;cmath&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);const int MAXN = 1e5+5;const double alpha = 0.75;//å¹³è¡¡å› å­struct Node{    int l,r,val;    int size,fact;//å­æ ‘å¤§å°,å­æ ‘å†…å­˜åœ¨çš„èŠ‚ç‚¹æ•°    bool exist;//æ˜¯å¦å­˜åœ¨}tzy[MAXN];int cnt,root;//èŠ‚ç‚¹å †è®¡æ•°,æ ¹èŠ‚ç‚¹ä¸‹æ ‡void newnode(int &amp;now,int val){//æ–°å»ºèŠ‚ç‚¹    now = ++cnt;    tzy[now].val=val;    tzy[now].size=tzy[now].fact = 1;//åˆå§‹åŒ–    tzy[now].exist = 1;}bool imbalance(int now){//åˆ¤æ–­å¹³è¡¡    //å¦‚æœå·¦å³å­æ ‘ä¸­çš„ä¸€ä¸ªé‡é‡å æ¯”è¶…è¿‡å¹³è¡¡å› å­,æˆ–è€…å­æ ‘ä¸­å‡çš„ç‚¹è¶…è¿‡30%    if(max(tzy[tzy[now].l].size,tzy[tzy[now].r].size)&gt;tzy[now].size*alpha    ||tzy[now].size-tzy[now].fact&gt;tzy[now].size*0.3)        return 1;    else return 0;}vector&lt;int&gt; v;void ldr(int now){//ä¸­åºéå†    if(!now) return;//åˆ°åº•äº†    ldr(tzy[now].l);    if(tzy[now].exist) v.push_back(now);//å­˜åœ¨çš„ç‚¹æ‹èµ·æ¥,ä¸å­˜åœ¨çš„ä¸¢æ‰    ldr(tzy[now].r);}void lift(int l,int r,int &amp;now){//é€’å½’åˆ†æ²»æŠŠä¸­é—´çš„ç‚¹æ‹èµ·æ¥    if(l==r){        now = v[l];        tzy[now].l=tzy[now].r = 0;//å¶å­èŠ‚ç‚¹        tzy[now].size=tzy[now].fact = 1;        return;    }    int m = (l+r)&gt;&gt;1;//æ‰¾åˆ°ä¸­é—´èŠ‚ç‚¹;    //ç‰¹æ®Šæƒ…å†µ,å¦‚æœæ˜¯x 5 5 x xçš„è¯,ç›¸åŒçš„å€¼æœ¬åº”è¯¥æ”¾åœ¨å³è¾¹,è¿™é‡Œå´æ”¾åˆ°äº†å·¦è¾¹    while(l&lt;m&amp;&amp;tzy[v[m]].val==tzy[v[m-1]].val)//å·¦ç§»,ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„ç‚¹        m--;    now = v[m];//æ‰¾åˆ°åº”è¯¥è¢«æ‹èµ·æ¥çš„ç‚¹    //åˆ†æ²»æ€æƒ³    if(l&lt;m) lift(l,m-1,tzy[now].l);//å·¦è¾¹è¿˜æœ‰å¯ä»¥æ‹èµ·æ¥çš„,æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸ºäº†æŠŠæ ‘æ¥èµ·æ¥çš„    else tzy[now].l = 0;    lift(m+1,r,tzy[now].r);//å³è¾¹ä¸€å®šæœ‰å¯ä»¥æ‹èµ·æ¥çš„    tzy[now].size = tzy[tzy[now].l].size+tzy[tzy[now].r].size+1;    tzy[now].fact = tzy[tzy[now].l].fact+tzy[tzy[now].r].fact+1;}void rebuild(int &amp;now){//ä¹‹å‰è¿™é‡Œnowå¿˜äº†å†™å¼•ç”¨    v.clear();    ldr(now);//å¾—åˆ°ä¸­åºéå†åºåˆ—    if(v.empty()){//æ‰€æœ‰çš„éƒ½æ˜¯è¢«å‡çš„ç‚¹,ç‰¹åˆ¤        now = 0;        return;    }    lift(0,v.size()-1,now);}void update(int now,int end){//å› ä¸ºæ²¡æœ‰è®°å½•çˆ¶äº²çš„ç¼–å·,æ‰€ä»¥åªèƒ½å¤´é€’å½’    if(!now) return;    if(tzy[end].val&lt;tzy[now].val) update(tzy[now].l,end);    else update(tzy[now].r,end);    tzy[now].size=tzy[tzy[now].l].size+tzy[tzy[now].r].size+1;}void check(int &amp;now,int end){//æ²¿è·¯å¾„æ£€æŸ¥    if(now==end) return;    if(imbalance(now)){        rebuild(now);//é‡æ„        update(root,now);//é‡æ„åæ›´æ–°        return;    }    if(tzy[end].val&lt;tzy[now].val) check(tzy[now].l,end);    else check(tzy[now].r,end);}void ins(int &amp;now,int val){//é€’å½’æ’å…¥èŠ‚ç‚¹    if(!now){//now=0æ˜¯æ²¡æœ‰èŠ‚ç‚¹çš„åœ°æ–¹(ç©ºå„¿å­)        newnode(now,val);        check(root,now);//æ£€æŸ¥æ’å…¥åæ˜¯å¦éœ€è¦é‡æ„        return;    }    tzy[now].size++;    tzy[now].fact++;    if(val&lt;tzy[now].val) ins(tzy[now].l,val);    else ins(tzy[now].r,val);}void del(int now,int val){    if(tzy[now].exist&amp;&amp;tzy[now].val==val){//æ‰¾åˆ°è¦åˆ çš„äº†        tzy[now].exist = 0;        tzy[now].fact--;        check(root,now);//æ£€æŸ¥åˆ é™¤åæ˜¯å¦éœ€è¦é‡æ„        return;    }    tzy[now].fact--;//è·¯å¾„ä¸Šçš„èŠ‚ç‚¹çš„factéƒ½éœ€è¦æ›´æ–°    //è¿™é‡Œæ˜¯å› ä¸ºæ•°æ®æ²¡æœ‰åˆ é™¤"ä¸å­˜åœ¨çš„ç‚¹"çš„æƒ…å†µ,æ‰€ä»¥å¯ä»¥è¿™æ ·å†™    if(val&lt;tzy[now].val) del(tzy[now].l,val);    else del(tzy[now].r,val);}int getrank(int val){//æŸ¥è¯¢ç¬¬å‡ å¤§    int now = root,rank = 1;    while(now){        if(val&lt;=tzy[now].val) now = tzy[now].l;        else{            rank+=tzy[now].exist+tzy[tzy[now].l].fact;//åŠ ä¸Šå½“å‰ç‚¹å’Œå·¦å­æ ‘            now = tzy[now].r;        }    }    return rank;}int getnum(int rank){//æŸ¥è¯¢ç¬¬kå°    int now = root;    while(now){        if(tzy[now].exist&amp;&amp;tzy[now].exist+tzy[tzy[now].l].fact==rank) break;//æ‰¾åˆ°        else if(tzy[tzy[now].l].fact&gt;=rank)            now = tzy[now].l;        else{            rank-=tzy[now].exist+tzy[tzy[now].l].fact;//å·¦å­æ ‘æ²¡æœ‰å»è¾¹æ‰¾            now = tzy[now].r;        }    }    return tzy[now].val;}void solve(){    int typ,hc;    cin&gt;&gt;typ;    if(typ==1){//æ’å…¥        cin&gt;&gt;hc;        ins(root,hc);    }    else if(typ==2){//åˆ é™¤        cin&gt;&gt;hc;        del(root,hc);    }    else if(typ==3){//æŸ¥è¯¢xçš„æ’å        cin&gt;&gt;hc;        cout&lt;&lt;getrank(hc)&lt;&lt;endl;    }    else if(typ==4){//æŸ¥è¯¢æ’åä¸ºxçš„æ•°        cin&gt;&gt;hc;        cout&lt;&lt;getnum(hc)&lt;&lt;endl;    }    else if(typ==5){//å‰é©±        cin&gt;&gt;hc;        cout&lt;&lt;getnum(getrank(hc)-1)&lt;&lt;endl;        //æ³¨æ„å‰é©±å’Œåç»§æŸ¥è¯¢çš„åŒºåˆ«,ç†ä¸€ä¸‹é€»è¾‘å…¶å®å¾ˆç®€å•    }    else if(typ==6){//åç»§        cin&gt;&gt;hc;        cout&lt;&lt;getnum(getrank(hc+1))&lt;&lt;endl;        //æˆ‘ä¸€å¼€å§‹å†™çš„æ˜¯getnum(getrank(hc)+1)        //å¦‚æœhcä¸åœ¨æ ‘é‡Œ,å°±ä¼šå‡ºé”™    }}int main(){    int t;    cin&gt;&gt;t;    while(t--) solve();}//æˆ‘ä¹‹å‰çš„ä¸€ä¸ªç–‘é—®,tzyæ ‘æœ‰0è¿™ä¸ªå‡çš„ç‚¹ä½œä¸ºæ ¹,å¦‚æœä»root=0è¿™ä¸ªç‚¹é‡æ„äº†,rootæ²¡äº†è¯¥æ€ä¹ˆåŠ//åæ¥æƒ³äº†æƒ³,åœ¨é‡æ„é‡Œnowç”¨çš„æ˜¯å¼•ç”¨,æ‰€ä»¥å¼•ç”¨rootçš„æ—¶å€™,é‡æ„æ—¶rootä¼šè¢«æ”¹å˜//å³ä¸€å¼€å§‹rootæ˜¯ä¸€ä¸ªval=0çš„å‡ç‚¹,åœ¨rootå­æ ‘é‡æ„ä¹‹å,rootä¼šè¢«æ›¿æ¢æˆä¸€ä¸ªçœŸç‚¹//æ´›è°· P3369 ã€æ¨¡æ¿ã€‘æ™®é€šå¹³è¡¡æ ‘//https://www.luogu.com.cn/problem/P3369<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="èŒƒæµ©å¼ºTreap"><a href="#èŒƒæµ©å¼ºTreap" class="headerlink" title="èŒƒæµ©å¼ºTreap"></a>èŒƒæµ©å¼ºTreap</h3><p>å¸¸æ•°ç•¥å¤§ï¼Œå› ä¸ºæœ‰éšæœºæ‰€ä»¥å¯ä»¥é˜²æ¯’ç˜¤æ•°æ®å¡ã€‚</p><p>æ•°æ®ç»“æ„åŒæ—¶å¯¹èŠ‚ç‚¹çš„valç»´æŠ¤å¹³è¡¡æ ‘æ€§è´¨ï¼Œå¯¹èŠ‚ç‚¹çš„key(ä¸€ä¸ªéšæœºæ•°å€¼)åˆ™æ˜¯ç»´æŠ¤å¤§æ ¹å †çš„æ€§è´¨ã€‚æ¯æ¬¡æ“ä½œå¯¹æ ‘è¿›è¡Œåˆ†è£‚ï¼Œä¼ å…¥å‚æ•°valï¼Œåˆ†å‡ºä¸€é¢—xå°äºç­‰äºvalï¼Œå¦ä¸€é¢—yå¤§äºç­‰äºvalã€‚åˆå¹¶æ—¶è¦å…¼é¡¾å¹³è¡¡æ ‘å’Œå¤§æ ¹å †çš„æ€§è´¨ã€‚</p><p>èŒƒæµ©å¼ºTreapçš„æœŸæœ›æ·±åº¦æ˜¯$O(log(size(T)))$çš„ã€‚</p><p>2020.11.29</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;ctime&gt;#include&lt;random&gt;using namespace std;const int MAXN = 1e5+5;struct Node{    int l,r;    int val,key;//valç»´æŠ¤å¹³è¡¡æ ‘,keyç»´æŠ¤å¤§æ ¹å †    int size;}fhq[MAXN];int cnt,root;mt19937 rnd(233);//äº§ç”Ÿé€Ÿåº¦å¿«,å‘¨æœŸå¤§çš„é«˜è´¨é‡éšæœºæ•°inline int newnode(int val){    fhq[++cnt].val = val;    fhq[cnt].key = rnd();    fhq[cnt].size = 1;    return cnt;//è¿”å›ç¼–å·}inline void update(int now){//æ›´æ–°å¤§å°    fhq[now].size = fhq[fhq[now].l].size+fhq[fhq[now].r].size+1;}void split(int now,int val,int &amp;x,int &amp;y){//æ ‘åˆ†è£‚,é€šè¿‡ä¼ å¼•ç”¨å‘Šè¯‰å‡½æ•°åº”è¯¥æ¥åœ¨å“ªé‡Œ//xæ˜¯xæ ‘çš„"æ¥å£",yæ˜¯yæ ‘çš„"æ¥å£" : åˆ†è£‚åxæ ‘çš„å€¼&lt;=val,yæ ‘&gt;val    if(!now){x=y=0;return;}    if(fhq[now].val&lt;=val){        x = now;        //å·¦å­æ ‘éƒ½æ¯”valå°,ç›´æ¥æŠŠå½“å‰èŠ‚ç‚¹è¿å¸¦å·¦å­æ ‘æ¥åˆ°xä¸Š,ä¸‹ä¸€æ­¥ç»§ç»­å»å³å­æ ‘æ‰¾        split(fhq[now].r,val,fhq[now].r,y);//xçš„æ¥å£å˜æˆrä½ç½®,yçš„æ¥å£ä¸å˜    }    else{        y = now;        split(fhq[now].l,val,x,fhq[now].l);    }    update(now);}int merge(int x,int y){//ä¼ å…¥æ—¶ä¿è¯xæ ‘ä¸­çš„valå…¨éƒ¨å°äºyæ ‘!    if(!x||!y) return x+y;//å¦‚æœæœ‰ä¸€æ–¹ä¸º0,è¿”å›å¦ä¸€æ–¹    if(fhq[x].key&gt;fhq[y].key){//ç»´æŠ¤keyå¤§æ ¹å †çš„æ€§è´¨,æ ¹ä¸€å®šæ¯”å„¿å­å¤§        fhq[x].r = merge(fhq[x].r,y);//yçš„valæ¯”xå¤§,æ‰€ä»¥æ”¾å³è¾¹        update(x);        return x;//è¿”å›å€¼æ˜¯å’Œä¸Šä¸€å±‚æ¥èµ·æ¥    }    else{        fhq[y].l = merge(x,fhq[y].l);        update(y);        return y;    }}int x,y,z;//å› ä¸ºä¹‹åä¼šç»å¸¸ç”¨åˆ°æ‰€ä»¥è¿™é‡Œå…ˆå®šä¹‰inline void ins(int val){//æŒ‰valåˆ†xzæ ‘,æ–°èŠ‚ç‚¹y,åˆå¹¶xy,å†å’Œzåˆå¹¶    split(root,val,x,y);    root = merge(merge(x,newnode(val)),y);//ç¬¬ä¸€æ¬¡æ’å…¥çš„ç‚¹ä¹Ÿä¼šåœ¨è¿™é‡Œè¢«å˜æˆroot,æ‰€ä»¥ä¸ç”¨æ‹…å¿ƒ}inline void del(int val){//1.æŒ‰valåˆ†æˆxz,æŒ‰val-1æŠŠxåˆ†æˆxy 2.åˆ æ‰yæ ‘çš„æ ¹(åªåˆ å»ä¸€ä¸ªval) 3.åˆå¹¶xyz    split(root,val,x,z);    split(x,val-1,x,y);    y = merge(fhq[y].l,fhq[y].r);    root = merge(merge(x,y),z);}inline int getrank(int val){//æŒ‰ç…§val-1åˆ†xy,xçš„å¤§å°+1å³valæ’å    split(root,val-1,x,y);    int res = fhq[x].size+1;    root = merge(x,y);     return res;}inline int getnum(int rank){//æ™®æ™®é€šé€šæ‰¾æ•°å­—    int now = root;    while(now){//è¯¢é—®rankæœ‰å¯èƒ½å¤§äºæ€»ç»“ç‚¹æ•°é‡,è¿™æ—¶å€™ä¼šè¿”å›0        if(fhq[fhq[now].l].size+1==rank)break;        else if(fhq[fhq[now].l].size&gt;=rank) now=fhq[now].l;        else{            rank-=fhq[fhq[now].l].size+1;            now = fhq[now].r;        }    }    return fhq[now].val;}inline int pre(int val){//æŒ‰val-1åˆ†xy,æ‰¾xä¸­æœ€å¤§çš„ç‚¹    split(root,val-1,x,y);    int now = x;    while(fhq[now].r) now = fhq[now].r;//ä¸€ç›´å¾€å³è¾¹æ‰¾    int res = fhq[now].val;    merge(x,y);    return res;}inline int nxt(int val){    split(root,val,x,y);    int now = y;    while(fhq[now].l) now = fhq[now].l;    int res = fhq[now].val;    merge(x,y);    return res;}int main(){    int t,typ,x;    cin&gt;&gt;t;    while(t--){        cin&gt;&gt;typ&gt;&gt;x;        if(typ==1) ins(x);        else if(typ==2) del(x);        else if(typ==3) cout&lt;&lt;getrank(x)&lt;&lt;endl;        else if(typ==4) cout&lt;&lt;getnum(x)&lt;&lt;endl;        else if(typ==5) cout&lt;&lt;pre(x)&lt;&lt;endl;        else if(typ==6) cout&lt;&lt;nxt(x)&lt;&lt;endl;    }}//åŒæ ·æ€è€ƒäº†ä¸€ä¸‹rootåˆå§‹å€¼çš„äº‹æƒ…,ä¸€å¼€å§‹çš„rootæ˜¯æ— æ•ˆå€¼0,è¿™æ—¶å€™æ˜¯ä¸ä¼šæ‰§è¡Œsplitçš„//åœ¨æ’å…¥ç¬¬ä¸€ä¸ªæ•°å€¼å,rootå°±å˜æˆäº†è¿™ä¸ªæ–°çš„èŠ‚ç‚¹//æ´›è°· P3369 ã€æ¨¡æ¿ã€‘æ™®é€šå¹³è¡¡æ ‘//https://www.luogu.com.cn/problem/P3369<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–‡è‰ºå¹³è¡¡æ ‘"><a href="#æ–‡è‰ºå¹³è¡¡æ ‘" class="headerlink" title="æ–‡è‰ºå¹³è¡¡æ ‘"></a>æ–‡è‰ºå¹³è¡¡æ ‘</h3><p>æ–‡è‰ºå¹³è¡¡æ ‘æ˜¯fhq_treapå¤„ç†åºåˆ—ä¸Šé—®é¢˜(åŒºé—´æ“ä½œ)çš„ä¸€ä¸ªä¾‹å­,è¿›è¡ŒåŒºé—´æ“ä½œä¸€èˆ¬æ˜¯ç”¨è¿™ç§é€šè¿‡èŠ‚ç‚¹ä¸ªæ•°è¿›è¡Œåˆ†è£‚çš„split,è¿™é‡Œä¸å…¶ä»–å¹³è¡¡æ ‘æŸ¥è¯¢ç¬¬kå¤§çš„æ“ä½œç±»ä¼¼ã€‚è€Œé€šè¿‡æ‡’æƒ°æ ‡è®°å¤„ç†æ—‹è½¬åŒºé—´çš„æ“ä½œåˆä¸çº¿æ®µæ ‘æ¯”è¾ƒç›¸ä¼¼ã€‚</p><p>å¯¹äºæœ‰æ‡’æƒ°æ ‡è®°çš„ç‚¹uè¿›è¡Œpushdownæ—¶ï¼Œäº¤æ¢å·¦å³å„¿å­ï¼Œå¹¶ç»™å·¦å³å„¿å­éƒ½æ‰“ä¸Šæ‡’æƒ°æ ‡è®°ã€‚ï¼ˆå¦™å•Šï¼‰</p><p>æ´›è°·çš„è¿™é“æ¿å­é¢˜æ˜¯ä¿è¯äº†æ˜¯123456è¿™æ ·çš„çš„åºåˆ—ï¼Œç¬¬ä¸€æ˜¯æ— éœ€insç›´æ¥ç”¨merge(root,i)æ¥æ’å…¥,å› ä¸ºiä¸€å®šæ¯”ä¹‹å‰å‡ºç°çš„æ•°å€¼éƒ½å¤§,å¦‚æœæ²¡æœ‰è¿™ç§æ¡ä»¶,åº”è¯¥ä¹Ÿå¯ä»¥å¦å¤–å»ºä¸€ä¸ªæ•°ç»„é€šè¿‡ä¸‹æ ‡æ¥æ˜ å°„æ•°å€¼,æˆ–è€…ç»™Nodeå¤šåŠ ä¸€ä¸ªå‚æ•°å­˜å®é™…å€¼ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;ctime&gt;#include&lt;vector&gt;#include&lt;random&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)const int MAXN = 1e5+5;struct Node{    int l,r;    int val,key;    int size;    bool reverse;//æ—‹è½¬çš„æ‡’æƒ°æ ‡è®°}fhq[MAXN];int cnt,root;mt19937 rnd(233);vector&lt;int&gt;res;//å› ä¸ºè¡Œçš„æœ«å°¾ä¸èƒ½æœ‰ç©ºæ ¼æ‰€ä»¥æˆ‘å…ˆç”¨ä¸€ä¸ªvectorå­˜ç€inline int newnode(int val){    fhq[++cnt].val = val;    fhq[cnt].key = rnd();    fhq[cnt].size=1;    return cnt;}inline void update(int now){    fhq[now].size = fhq[fhq[now].l].size + fhq[fhq[now].r].size+1;}inline void pushdown(int now){//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å„¿å­æœ‰å¯èƒ½ä¹‹åè¢«åŠ¨åˆ°,å°±éœ€è¦å‘ä¸‹ä¼ é€’reverse    swap(fhq[now].l,fhq[now].r);    fhq[fhq[now].l].reverse^=1;//å„¿å­çš„æ‡’æƒ°æ ‡è®°0å˜1,1å˜0    fhq[fhq[now].r].reverse^=1;    fhq[now].reverse = 0;//ä¹‹å‰ç–‘æƒ‘è¿™é‡Œä¸ºä»€ä¹ˆä¸ç”¨å–å^1çš„    //å…¶å®æ˜¯å› ä¸ºå¦‚æœnowæ²¡æœ‰æ ‡è®°reverse,å°±ä¸ç”¨æ‰§è¡Œpushdown}void split(int now,int siz,int &amp;x,int &amp;y){//æŒ‰ç…§å¤§å°åˆ†è£‚//æœ‰ç‚¹ç±»ä¼¼å–ç¬¬kå¤§getnumçš„æ“ä½œ    if(!now){x=y=0;return;}    if(fhq[now].reverse) pushdown(now);//ä¹‹ååˆ†è£‚æ“ä½œå¯èƒ½ç¢°åˆ°å„¿å­,æ‰€ä»¥è¦pushdown    if(fhq[fhq[now].l].size&lt;siz){        x = now;        split(fhq[now].r,siz-fhq[fhq[now].l].size-1,fhq[now].r,y);    }    else{        y = now;        split(fhq[now].l,siz,x,fhq[now].l);    }    update(now);}int merge(int x,int y){    if(!x||!y) return x+y;    if(fhq[x].key&lt;fhq[y].key){//è¿™é‡Œå…¶å®ç”¨ä»€ä¹ˆç¬¦å·éƒ½è¡Œ        if(fhq[x].reverse) pushdown(x);        fhq[x].r = merge(fhq[x].r,y);        update(x);        return x;    }    else{        if(fhq[y].reverse) pushdown(y);        fhq[y].l = merge(x,fhq[y].l);        update(y);        return y;    }}void reverse(int l,int r){//åŒºé—´åè½¬//æ‹†æˆä¸‰æ®µ,(1,l-1),(l,r),(r+1,n);    int x,y,z;    split(root,l-1,x,y);    split(y,r-l+1,y,z);    fhq[y].reverse^=1;    root=merge(merge(x,y),z);    }void ldr(int now){//æœ€åç”¨ä¸­åºéå†æ‰¾åˆ°ç»“æœ    if(!now) return;    if(fhq[now].reverse) pushdown(now);    ldr(fhq[now].l);    res.push_back(fhq[now].val);//æ¨å…¥ç»“æœçš„åºåˆ—    ldr(fhq[now].r);}int main(){    int n,m;    cin&gt;&gt;n&gt;&gt;m;    rep(i,1,n) root = merge(root,newnode(i));//å› ä¸ºiä¸€å®šæ¯”ä¹‹å‰å‡ºç°çš„éƒ½å¤§æ‰å¯ä»¥è¿™æ ·    int l,r;    while(m--){        cin&gt;&gt;l&gt;&gt;r;        reverse(l,r);    }    res.clear();    ldr(root);    int siz = res.size();    rep(i,0,siz-1){        cout&lt;&lt;res[i];        if(i!=siz-1) cout&lt;&lt;' ';    }    cout&lt;&lt;endl;}//AgOHè¯´,å¹³è¡¡æ ‘ä¹Ÿæ˜¯å¯ä»¥å¤„ç†åºåˆ—(åŒºé—´æ“ä½œ)é—®é¢˜çš„,ä¸€èˆ¬ä½¿ç”¨çš„splitéƒ½æ˜¯è¿™ç§æŒ‰ä¸ªæ•°sizåˆ†è£‚çš„split//è¿™é¢˜é‡Œé¢æœ‰ç‚¹çº¿æ®µæ ‘çš„å‘³é“,é€šè¿‡ä¸€ä¸ªæ‡’æƒ°æ ‡è®°èŠ‚çœäº†å¾ˆå¤šæ²¡æœ‰å¿…è¦çš„åè½¬æ¶ˆè€—çš„æ—¶é—´//æ´›è°·P3391 ã€æ¨¡æ¿ã€‘æ–‡è‰ºå¹³è¡¡æ ‘//https://www.luogu.com.cn/problem/P3391<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="æ ‘ä¸Šå¯å‘å¼åˆå¹¶"><a href="#æ ‘ä¸Šå¯å‘å¼åˆå¹¶" class="headerlink" title="æ ‘ä¸Šå¯å‘å¼åˆå¹¶"></a>æ ‘ä¸Šå¯å‘å¼åˆå¹¶</h3><p>ç”¨äºæ²¡æœ‰ä¿®æ”¹åªæœ‰æŸ¥è¯¢çš„æ ‘å½¢é—®é¢˜ï¼Œä¸”è¯¢é—®ä»¥æ‰€æœ‰èŠ‚ç‚¹ä¸ºæ ¹å­æ ‘ï¼ˆå³å¯¹æ¯ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘éƒ½è¦è¯¢é—®ï¼‰</p><p>ç¬¬ä¸€édfs(initå‡½æ•°)å…ˆå¤„ç†å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„é‡å„¿å­ï¼Œç¬¬äºŒédfsåˆ©ç”¨å¤´é€’å½’å¤„ç†è½»å„¿å­çš„ä¿¡æ¯å¾—åˆ°å­æ ‘ä¸Šçš„ç­”æ¡ˆï¼Œé‡å„¿å­çš„ä¿¡æ¯åœ¨cnté‡Œä»å„¿å­ä¼ ç»™çˆ¸çˆ¸ä¸€ç›´ç½‘ä¸Šä¼ ï¼Œä½†ä»–çš„çˆ¸çˆ¸ä¸ä¸€å®šæ˜¯çˆ·çˆ·çš„é‡å„¿å­ï¼Œæ‰€ä»¥è¿™ä¸ªdfsæœ‰ä¸€ä¸ªoptå‚æ•°ï¼Œå¦‚æœä¸æ˜¯åˆ™opt=0è¦æ¸…ç©ºè¿™é¢—å­æ ‘çš„è´¡çŒ®ã€‚</p><p>ç”¨å¯ä»¥é€‰æ‹©å‚æ•°çš„dfs1å‡½æ•°ï¼Œval=1æ—¶æ˜¯åŠ ä¸Šè½»å„¿å­çš„è´¡çŒ®ï¼Œ=-1æ—¶åˆ å»è½»å„¿å­çš„è´¡çŒ®ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;vector&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define ll long longint cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);const int MAXN = 1e5+5;const int MAXM = 1e5+5;int sz[MAXN],son[MAXN];//å­æ ‘å¤§å°å’Œé‡å„¿å­//int ans[MAXN];//å­˜æœ€å¤šçš„é¢œè‰²å’Œç¼–å·å’Œ,è¿™é¢˜æ²¡å¿…è¦int c[MAXN];//æ¯ä¸ªç‚¹çš„é¢œè‰²int cnt[MAXM];//å­˜æ¯ç§é¢œè‰²çš„ç‚¹æ•°ll bhh[MAXN],bsum;//é¢˜ç›®è¦æ±‚é¢œè‰²çš„ç¼–å·å’Œint maxx;//ä¸´æ—¶å˜é‡,ç”¨æ¥æ‰¾æœ€å¤§é¢œè‰²æ•°é‡çš„int n;vector&lt;int&gt; e[MAXN];void init(int now,int pre){//é¢„å¤„ç†æ‰¾é‡å„¿å­    sz[now] = 1;son[now] = -1;    for(auto v:e[now]){        if(v==pre) continue;        init(v,now);        sz[now]+=sz[v];        if(son[now]==-1||sz[v]&gt;sz[son[now]]) son[now]=v;    }}void dfs1(int now,int pre,int val,int rt){//rtæ˜¯dfsé‡Œé¢å½“å‰åœ¨ç»Ÿè®¡çš„å­æ ‘æ ¹//val=1çš„æ—¶å€™åŠ ä¸Šå­èŠ‚ç‚¹çš„è´¡çŒ®,è€Œ-1æ—¶æ˜¯dfsé‡Œé¢opt=1(ä»£è¡¨è½»å„¿å­)æ—¶åˆ å»è´¡çŒ®    cnt[c[now]]+=val;    if(val==1){        if(cnt[c[now]]&gt;maxx) maxx=cnt[c[now]],bsum=c[now];        else if(cnt[c[now]]==maxx) bsum+=c[now];    }    //éå†å­èŠ‚ç‚¹çš„æ—¶å€™çœ‹åˆ°ä»€ä¹ˆé¢œè‰²å°±æ£€æŸ¥è¿™ä¸ªé¢œè‰²    for(auto v:e[now]) if(v!=pre)dfs1(v,now,val,rt);}void dfs(int now,int pre,int opt){//optä¸º1ä»£è¡¨è¦æ¸…ç©º    for(auto v:e[now]){        if(v!=son[now]&amp;&amp;v!=pre) dfs(v,now,1);//å…ˆè½»å„¿å­,éœ€è¦åˆ å»    }    if(son[now]!=-1) dfs(son[now],now,0);//å¤„ç†é‡å„¿å­    //æ­¤æ—¶è®¡ç®—è½»å„¿å­çš„è´¡çŒ®,é‡å„¿å­çš„åœ¨cnté‡Œé¢ç¥–ä¼ ä¸Šæ¥äº†    for(auto v:e[now]){        if(v!=pre&amp;&amp;v!=son[now]) dfs1(v,now,1,now);//ç»Ÿè®¡è½»å„¿å­ä¸Šçš„ç»“æœ    }    cnt[c[now]]++;//ä¹Ÿè¦åŠ ä¸Šå½“å‰èŠ‚ç‚¹    if(cnt[c[now]]&gt;maxx) maxx=cnt[c[now]],bsum=c[now];    //è¿™é‡Œæˆ‘ä¸€å¼€å§‹ç”¨çš„cnt[c[now]]&gt;cnt[ans[now]],ä½†æ˜¯c[now]å’Œans[rt]ç›¸åŒæ—¶å‡ºé—®é¢˜    else if(cnt[c[now]]==maxx) bsum+=c[now];    bhh[now] = bsum;//è®°å½•ç»“æœ    //å‡å»è½»å„¿å­çš„è´¡çŒ®    if(opt){        cnt[c[now]]--;        for(auto v:e[now])            if(v!=pre) dfs1(v,now,-1,now);        maxx = bsum = 0;//åˆ å»è½»å„¿å­è¿™é¢—å­æ ‘å¯¹bsumå’Œmaxxçš„è´¡çŒ®    }}int rt = 1;//é¢˜ç›®é»˜è®¤1ä¸ºæ ¹èŠ‚ç‚¹int main(){    cin&gt;&gt;n;    rep(i,1,n) cin&gt;&gt;c[i];    int u,v;    rep(i,1,n-1){        cin&gt;&gt;u&gt;&gt;v;        e[u].push_back(v);        e[v].push_back(u);    }    init(rt,-1);    dfs(rt,-1,1);    rep(i,1,n){        cout&lt;&lt;bhh[i];        if(i!=n) cout&lt;&lt;' ';      }    cout&lt;&lt;endl;}//æ²¡æœ‰ä¿®æ”¹åªæœ‰æŸ¥è¯¢çš„æ ‘å½¢é—®é¢˜//ä¸”è¯¢é—®ä»¥æ‰€æœ‰èŠ‚ç‚¹ä¸ºæ ¹å­æ ‘ï¼ˆå³å¯¹æ¯ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘éƒ½è¦è¯¢é—®ï¼‰ã€‚//æ´›è°·CF600E Lomsat gelral//https://www.luogu.com.cn/problem/CF600E<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ ‘å½¢DP"><a href="#æ ‘å½¢DP" class="headerlink" title="æ ‘å½¢DP"></a>æ ‘å½¢DP</h2><h3 id="æ ‘ä¸ŠèƒŒåŒ…"><a href="#æ ‘ä¸ŠèƒŒåŒ…" class="headerlink" title="æ ‘ä¸ŠèƒŒåŒ…"></a>æ ‘ä¸ŠèƒŒåŒ…</h3><p>æ¯ä¸ªèŠ‚ç‚¹è¦åšä¸€æ¬¡èƒŒåŒ…ï¼Œçˆ¶èŠ‚ç‚¹æœ‰pä¸ªå„¿å­èŠ‚ç‚¹æ—¶ï¼Œæ¯ä¸ªå„¿å­èŠ‚ç‚¹çœ‹ä½œä¸€ç»„ç‰©å“æ¯ç»„mä¸ª(å„¿å­dpçš„æ—¶å€™çš„ç»“æœ)ï¼Œåšåˆ†ç»„èƒŒåŒ…å³å¯ã€‚</p><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š$dp[x][i]=max(dp[son_i][j])+score(x)$ã€‚jä»1åˆ°å®¹é‡mï¼Œè¡¨ç¤ºè¿™ç»„é‡Œé€‰jä¸ªã€‚</p><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">#include&lt;iostream&gt;#include&lt;cstring&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=(b);i--)int cansel_sync =(ios::sync_with_stdio(0),cin.tie(0),0);const int MAXN = 333;struct Node{int v,nxt;//nextåŒä¸€ä¸ªçˆ¶äº²çš„ä¸‹ä¸€ä¸ªç‚¹int w;//æƒå€¼,è¿™é¢˜ç”¨ä¸åˆ°}edges[MAXN];int head[MAXN];//è®°å½•uä¸ºèµ·ç‚¹çš„ç¬¬ä¸€æ¡è¾¹ç¼–å·int cnt;//æ€»è¾¹æ•°int minn;inline void add(int u,int v){//å¢åŠ è¾¹edges[++cnt] = Node{v,head[u]};head[u]=cnt;}int n,m;int dp[MAXN][MAXN],val[MAXN];void dfs(int now){dp[now][1] = val[now];//è‚¯å®šè¦é€‰å®šè‡ªå·±for(int i = head[now];i!=-1;i=edges[i].nxt){int v = edges[i].v;dfs(v);//åˆ†ç»„èƒŒåŒ…repb(j,m,1){//å½“å‰uèƒŒåŒ…å®¹é‡rep(k,0,j-1){//ä»vå„¿å­é‡Œæ‹¿å‡ ä¸ªdp[now][j]=max(dp[now][j],dp[now][j-k]+dp[v][k]);//çŠ¶æ€è½¬ç§»}}}}int main(){while(cin&gt;&gt;n&gt;&gt;m&amp;&amp;m&amp;&amp;n){memset(head,-1,sizeof(head));memset(dp,0,sizeof(dp));cnt = 0;int fa;//faè¡¨ç¤ºä¾èµ–çš„ç‚¹rep(i,1,n){cin&gt;&gt;fa&gt;&gt;val[i];add(fa,i);}m++;//å› ä¸ºä¹‹åçš„dp[0][m]ç®—ä¸Šäº†0ç‚¹,æ‰€ä»¥è¦+1val[0]=0;//æ„é€ è™šèŠ‚ç‚¹0dfs(0);cout&lt;&lt;dp[0][m]&lt;&lt;endl;}}//æ´›è°·P2014 [CTSC1997]é€‰è¯¾//https://www.luogu.com.cn/problem/P2014<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACMæ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#683 (Div. 1) B.Catching Cheaters(DPæœ€å¤§å­æ®µå’Œ+LCS)</title>
      <link href="2020/11/17/cf683-b/"/>
      <url>2020/11/17/cf683-b/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="https://codeforces.com/problemset/problem/1446/B">https://codeforces.com/problemset/problem/1446/B</a></p><h1 id="é¢˜ç›®å¤§æ„"><a href="#é¢˜ç›®å¤§æ„" class="headerlink" title="é¢˜ç›®å¤§æ„"></a>é¢˜ç›®å¤§æ„</h1><p>å®šä¹‰$S(A,B)=4\cdot LCS(A,B)-\left|A\right|-\left|B\right|$</p><p>ç»™ä¸¤ä¸ªä¸²ä¸²Aå’ŒBï¼Œæ±‚ABçš„ä¸¤ä¸ªçš„å­ä¸²CDï¼ˆsubstringï¼Œè¦æ±‚è¿ç»­ï¼‰ï¼Œä½¿$S(C,D)$æœ€å¤§ã€‚</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><p>ä¸€å¼€å§‹æˆ‘æƒ³çš„æ˜¯å…ˆæ±‚å‡ºlcsæ•°ç»„</p><p>å†ç”¨$res_{i,j}=4\cdot lcs_{i,j}-i-j$è®°å½•ç±»ä¼¼lcsçš„å‰ç¼€å’Œã€‚ä½†æ˜¯åæ¥å‘ç°å¾ˆå®¹æ˜“å°±èƒ½æ¨ç¿»ï¼Œlcsæ˜¯ä¸èƒ½ä½¿ç”¨è¿™æ ·å‰ç¼€å’Œçš„æ€æƒ³çš„ã€‚æ¯”å¦‚å­—ç¬¦ä¸²aaaå’Œaaaaï¼Œç®—Cä¸º[1,3],Dä¸ºç©ºç»“æœçš„å°±ç«‹é©¬ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>æ‰€ä»¥ä¸èƒ½è¿™æ ·æã€‚</p><p>æˆ‘ä»¬å…ˆæ€è€ƒå¦‚æœè¿™äº›<strong>å­ä¸²å¿…é¡»éƒ½ä»å¤´å¼€å§‹</strong>ï¼Œå³åªèƒ½ä»æœ«å°¾åˆ å»å­—ç¬¦ï¼Œè¯¥æ€ä¹ˆå†™ï¼š</p><p>å¯ä»¥å¾—åˆ°<strong>é€’æ¨å¼</strong>$dp_{i,j}=dp_{i-1,j-1}+2$å¦‚æœai=bi,(å¢åŠ äº†é•¿åº¦1,$1\cdot 4-2=2$)</p><p>$dp_{i,j}=max(dp_{i-1,j},dp_{i,j-1})-1$å¦‚æœai!=bi.</p><p>è¿™æ—¶å€™å¢åŠ ä¸€ä¸ª:ä¹Ÿå¯ä»¥ä»å¤´åˆ å»å­—ç¬¦ï¼Œæƒ³åˆ°æ€ä¹ˆå†™äº†å—ï¼Ÿ</p><p>å°±æ˜¯åˆ©ç”¨äº†<strong>æœ€å¤§è¿ç»­å­æ®µå’Œ</strong>çš„æ€æƒ³ï¼šå¦‚æœåœ¨ä¸€ä¸ªä½ç½®çš„$dp_{i,j}&lt;0$åˆ™æŠŠå®ƒå½’é›¶ã€‚</p><p>å®Œäº†ã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define ll long longint cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);ll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a;}string a,b;int n,m;const int MAXN = 5005;int dp[MAXN][MAXN];int res;void solve(){    res = 0;    cin&gt;&gt;n&gt;&gt;m;    cin&gt;&gt;a&gt;&gt;b;    rep(i,1,n){        rep(j,1,m){            if(a[i-1]==b[j-1]) dp[i][j] = dp[i-1][j-1]+2;            else dp[i][j] = max(dp[i-1][j],dp[i][j-1])-1;            dp[i][j] = max(dp[i][j],0);            res = max(res,dp[i][j]);        }    }    cout&lt;&lt;res&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WSL (Windows Subsystem for Linux)</title>
      <link href="2020/11/15/wsl/"/>
      <url>2020/11/15/wsl/</url>
      
        <content type="html"><![CDATA[<h1 id="å‚è€ƒçš„å‡ ä¸ªå¸–å­"><a href="#å‚è€ƒçš„å‡ ä¸ªå¸–å­" class="headerlink" title="å‚è€ƒçš„å‡ ä¸ªå¸–å­"></a>å‚è€ƒçš„å‡ ä¸ªå¸–å­</h1><p>ï¼ˆé»‘ä½“ä¸ºé‡è¦å¸–å­ï¼‰</p><p><strong>windowså®‰è£…wsl</strong></p><p><a href="https://www.jianshu.com/p/6b02948b3d37">https://www.jianshu.com/p/6b02948b3d37</a></p><p>usernameå¼€å¤´ä¸èƒ½æ˜¯å¤§å†™</p><p><a href="https://zhuanlan.zhihu.com/p/111858170">https://zhuanlan.zhihu.com/p/111858170</a></p><p>vimåŸºæœ¬æ“ä½œ</p><p><a href="https://www.cnblogs.com/chengjiawei/p/9339951.html">https://www.cnblogs.com/chengjiawei/p/9339951.html</a></p><p>vimä¿å­˜é€€å‡º</p><p><a href="https://www.cnblogs.com/chen-nn/p/11531932.html">https://www.cnblogs.com/chen-nn/p/11531932.html</a></p><p> <strong>vscode wsl</strong></p><p><a href="https://zhuanlan.zhihu.com/p/104060131?utm_source=wechat_session">https://zhuanlan.zhihu.com/p/104060131?utm_source=wechat_session</a></p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Git Bashå‘½ä»¤è¡Œæäº¤ä¿®æ”¹</title>
      <link href="2020/11/09/git-update/"/>
      <url>2020/11/09/git-update/</url>
      
        <content type="html"><![CDATA[<h1 id="SSH-Keyçš„è·å–"><a href="#SSH-Keyçš„è·å–" class="headerlink" title="SSH-Keyçš„è·å–"></a>SSH-Keyçš„è·å–</h1><p>è¿™ç¯‡å¸–å­è®²çš„éå¸¸è¯¦ç»†äº†</p><p><a href="https://www.cnblogs.com/duanming/p/11830251.html">https://www.cnblogs.com/duanming/p/11830251.html</a></p><h1 id="è¿æ¥åˆ°githubä»“åº“"><a href="#è¿æ¥åˆ°githubä»“åº“" class="headerlink" title="è¿æ¥åˆ°githubä»“åº“"></a>è¿æ¥åˆ°githubä»“åº“</h1><h2 id="åˆå§‹åŒ–æœ¬åœ°ä»“åº“"><a href="#åˆå§‹åŒ–æœ¬åœ°ä»“åº“" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ°ä»“åº“"></a>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</h2><ul><li>å…ˆåœ¨å‘½ä»¤è¡Œè¿›å…¥æƒ³è¦ä½œä¸ºä»“åº“çš„ä½ç½®ï¼Œè¾“å…¥</li></ul><pre class="line-numbers language-none"><code class="language-none">git init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  åˆå§‹åŒ–ä¸ºæœ¬åœ°ä»“åº“ï¼ˆä¹‹åæ–‡ä»¶å¤¹é‡Œå¤šäº†ä¸€ä¸ª.gitï¼‰</p><h2 id="è¿æ¥åˆ°è¿œç¨‹ä»“åº“"><a href="#è¿æ¥åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="è¿æ¥åˆ°è¿œç¨‹ä»“åº“"></a>è¿æ¥åˆ°è¿œç¨‹ä»“åº“</h2><ul><li>åœ¨githubçš„ä»“åº“é¡µé¢æŠŠè¿™ä¸ªä¸œè¥¿å¤åˆ¶ä¸‹æ¥</li></ul><p><img src="/img/git_update/git-ssh.png" alt="git-ssh"></p><ul><li>æ¥ç€æ·»åŠ ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œè¾“å…¥</li></ul><pre class="line-numbers language-none"><code class="language-none">git remote add origin è¿™é‡Œå¡«åˆšåˆšå¤åˆ¶çš„ä¸œè¥¿ä»¥æˆ‘çš„ä¸ºä¾‹å°±æ˜¯git remote add origin git@github.com:REXWindW/REXWindW.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å…³è”åˆ†æ”¯å¹¶push"><a href="#å…³è”åˆ†æ”¯å¹¶push" class="headerlink" title="å…³è”åˆ†æ”¯å¹¶push"></a>å…³è”åˆ†æ”¯å¹¶push</h2><ul><li>æ¥ç€æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡pushï¼ŒæŠŠå½“å‰åˆ†æ”¯masteræ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</li></ul><pre class="line-numbers language-none"><code class="language-none">git push -u origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å› ä¸ºè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œç¬¬ä¸€æ¬¡æ¨é€masterå¢åŠ ä¸€ä¸ª<code>-u</code>å‚æ•°ï¼Œè¿™æ ·Gitä¸ä»…ä»…ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹GitHubä»“åº“ä¸­æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼š<strong>æŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥</strong>ã€‚</p><p>åœ¨ä»¥åçš„æ¨é€å’Œæ‹‰å–å°±å¯ä»¥ç®€åŒ–å‘½ä»¤äº†ï¼Œç®€åŒ–å‘½ä»¤å³</p><pre class="line-numbers language-none"><code class="language-none">git push<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ä½†æ˜¯ä¹‹åæ¯æ¬¡pushä¹‹å‰å…¶å®è¿˜éœ€è¦è¿›è¡Œä¸€äº›æ“ä½œ</strong></p><h1 id="ä¹‹åè¦æ€ä¹ˆpush"><a href="#ä¹‹åè¦æ€ä¹ˆpush" class="headerlink" title="ä¹‹åè¦æ€ä¹ˆpush"></a>ä¹‹åè¦æ€ä¹ˆpush</h1><h2 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><pre class="line-numbers language-none"><code class="language-none">git add .  //æš‚å­˜æ‰€æœ‰çš„æ›´æ”¹ï¼Œæ³¨æ„åé¢æœ‰ä¸ªç‚¹!è¿™æ ·æ‰èƒ½æŠŠæ‰€æœ‰çš„æ›´æ”¹æš‚å­˜git checkout . // ä¸¢å¼ƒæ‰€æœ‰çš„æ›´æ”¹git status // æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€git commit -m "æœ¬æ¬¡è¦æäº¤çš„æ¦‚è¦ä¿¡æ¯" //åŠ ä¸Šè¿™æ¬¡æäº¤çš„å¤‡æ³¨git push //æäº¤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h2><p><img src="/img/git_update/update.png" alt="update"></p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºçŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mathjaxå†…è”å…¬å¼å‡ºé”™çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</title>
      <link href="2020/11/08/matjax-tips/"/>
      <url>2020/11/08/matjax-tips/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜çš„å‡ºç°"><a href="#é—®é¢˜çš„å‡ºç°" class="headerlink" title="é—®é¢˜çš„å‡ºç°"></a>é—®é¢˜çš„å‡ºç°</h1><p>ä»Šå¤©å†™äº†å…¬å¼ç‰¹åˆ«å¤šçš„ä¸€ç¯‡åšå®¢ï¼šFFTå­¦ä¹ ç¬”è®°</p><p>ç„¶åæˆ‘çš„åšå®¢çš„<strong>å†…è”å…¬å¼</strong>æ˜¾ç¤ºå‡ºäº†å¤§é‡çš„é—®é¢˜ã€‚</p><p><img src="/img/mathjax_tips/error.png" alt="mathjax">  </p><h1 id="å¤±è´¥çš„å°è¯•"><a href="#å¤±è´¥çš„å°è¯•" class="headerlink" title="å¤±è´¥çš„å°è¯•"></a>å¤±è´¥çš„å°è¯•</h1><p>ç»è¿‡è½¬çˆ·çš„æé†’ï¼Œçº æ­£äº†ä¹‹å‰çš„é”™è¯¯å†™æ³•</p><p>$ x=1 $</p><p>æ”¹æˆäº†æ­£ç¡®çš„</p><p>$x=1$</p><p>åæ¥è¿˜æ˜¯ä¸è¡Œï¼Œä»¥ä¸ºæ˜¯å¤§æ‹¬å·çš„é—®é¢˜</p><p>æœ€åå‘ç°ï¼Œå¹¶ä¸æ˜¯å¤§æ‹¬å·çš„é—®é¢˜ï¼Œè€Œæ˜¯mathjaxä¸­å†…è”å…¬å¼å°±æœ€å¥½ä¸è¦ç”¨å¤ªå¤š\fracä¹‹ç±»çš„è¿™ç§è½¬ä¹‰å­—ç¬¦äº†</p><p><img src="/img/mathjax_tips/mathjax.png" alt="mathjax">  </p><h1 id="æœ€åæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ"><a href="#æœ€åæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ" class="headerlink" title="æœ€åæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ"></a>æœ€åæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ</h1><p>å‚è€ƒäº†è¿™ä¸ªå¸–å­ï¼š<a href="https://www.jianshu.com/p/7ab21c7f0674">https://www.jianshu.com/p/7ab21c7f0674</a></p><p>è¿™ä¸ªå¸–å­å…ˆæåˆ°äº†è¦æ›´æ¢Hexoçš„markdownæ¸²æŸ“å¼•æ“ï¼Œ<a href="https://link.jianshu.com/?t=https://github.com/sun11/hexo-renderer-kramed">hexo-renderer-kramed</a>å¼•æ“æ˜¯åœ¨é»˜è®¤çš„æ¸²æŸ“å¼•æ“<a href="https://link.jianshu.com/?t=https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>çš„åŸºç¡€ä¸Šä¿®æ”¹äº†ä¸€äº›bugï¼Œä¸¤è€…æ¯”è¾ƒæ¥è¿‘ï¼Œä¹Ÿæ¯”è¾ƒè½»é‡çº§ã€‚ä½†æ˜¯æˆ‘çš„å¼•æ“å·²ç»æ˜¯è¿™ä¸ªäº†ï¼Œæ‰€ä»¥é—®é¢˜å†ä¸‹ä¸€æ­¥ã€‚</p><p>ç„¶åï¼Œè·Ÿæ¢å¼•æ“åè¡Œé—´å…¬å¼å¯ä»¥æ­£ç¡®æ¸²æŸ“äº†ï¼Œä½†æ˜¯è¿™æ ·è¿˜æ²¡æœ‰å®Œå…¨è§£å†³é—®é¢˜ï¼Œè¡Œå†…å…¬å¼çš„æ¸²æŸ“è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå› ä¸º<a href="https://link.jianshu.com/?t=https://github.com/sun11/hexo-renderer-kramed">hexo-renderer-kramed</a>å¼•æ“ä¹Ÿæœ‰è¯­ä¹‰å†²çªçš„é—®é¢˜ã€‚æ¥ä¸‹æ¥åˆ°åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°node_modules\kramed\lib\rules\inline.jsï¼ŒæŠŠç¬¬11è¡Œçš„<strong>escapeå˜é‡</strong>çš„å€¼åšç›¸åº”çš„ä¿®æ”¹ï¼š</p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token operator">/</span><span class="token operator">/</span>  escape<span class="token punctuation">:</span> <span class="token regex">/^\\([\\`*{}\[\]()#$+\-.!_&gt;])/</span><span class="token punctuation">,</span>  escape<span class="token punctuation">:</span> <span class="token regex">/^\\([`*\[\]()#$+\-.!_&gt;])/</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™ä¸€æ­¥æ˜¯åœ¨åŸåŸºç¡€ä¸Š<strong>å–æ¶ˆäº†å¯¹,{,}çš„è½¬ä¹‰(escape)<strong>ã€‚<br>åŒæ—¶æŠŠç¬¬20è¡Œçš„</strong>emå˜é‡</strong>ä¹Ÿè¦åšç›¸åº”çš„ä¿®æ”¹ã€‚</p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token operator">/</span><span class="token operator">/</span>  em<span class="token punctuation">:</span> <span class="token regex">/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/</span><span class="token punctuation">,</span>  em<span class="token punctuation">:</span> <span class="token regex">/^\*((?:\*\*|[\s\S])+?)\*(?!\*)/</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨hexoï¼ˆå…ˆcleanå†generateï¼‰,é—®é¢˜å®Œç¾è§£å†³ã€‚å“¦ï¼Œå¦‚æœä¸å¹¸è¿˜æ²¡è§£å†³çš„è¯ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯è¿˜éœ€è¦åœ¨ä½¿ç”¨çš„ä¸»é¢˜ä¸­é…ç½®mathjaxå¼€å…³ã€‚</p><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><p>åœ¨ä»¥ä¸Šæ­¥éª¤ä¹‹åï¼Œè¿˜æ˜¯å­˜åœ¨ä¸€äº›æ˜¾ç¤ºé”™è¯¯</p><p><img src="/img/mathjax_tips/cdot.png" alt="cdot"></p><p>æˆ‘è‡ªå·±çŒœæµ‹çš„æ˜¯mathjaxæœ€å¥½ä¸è¦ç”¨*å·æ¥ä¹˜ï¼Œå¯ä»¥ç”¨ç‚¹ä¹˜å’Œå‰ä¹˜</p><p>å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç¬¦å·</th><th>å†™æ³•</th></tr></thead><tbody><tr><td>å‰ä¹˜</td><td>a \times b</td></tr><tr><td>ç‚¹é™¤</td><td>a \div b</td></tr><tr><td>ç‚¹ä¹˜</td><td>a \cdot b</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mathjax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ¿æ•´ç†(æŒç»­æ›´æ–°)</title>
      <link href="2020/11/07/banzi/"/>
      <url>2020/11/07/banzi/</url>
      
        <content type="html"><![CDATA[<h1 id="å°tips"><a href="#å°tips" class="headerlink" title="å°tips"></a>å°tips</h1><h2 id="CFå¤´"><a href="#CFå¤´" class="headerlink" title="CFå¤´"></a>CFå¤´</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;#include&lt;map&gt;#include&lt;queue&gt;#include&lt;cmath&gt;using namespace std;template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define ull unsigned long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=b;i--)#define mkp make_pair#define ft first#define sd second#define log(x) (31-__builtin_clz(x))#define INF 0x3f3f3f3ftypedef pair&lt;int,int&gt; pii;typedef pair&lt;ll,ll&gt; pll;ll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a; }//#define INF 0x7fffffff<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é›†åˆæ“ä½œ"><a href="#é›†åˆæ“ä½œ" class="headerlink" title="é›†åˆæ“ä½œ"></a>é›†åˆæ“ä½œ</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">//å¹¶äº¤é›†vector&lt;int&gt; ANS;set_union(s1.begin(),s1.end(),s2.begin(),s2.end(),inserter(ANS,ANS.begin()));//set_intersection()//é€šè¿‡è¿­ä»£å™¨éå†é›†åˆset&lt;char&gt;::iterator iter = temp1.begin();while (iter!=temp1.end()){cout&lt;&lt;*iter;iter++;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¿«è¯»å¿«å†™"><a href="#å¿«è¯»å¿«å†™" class="headerlink" title="å¿«è¯»å¿«å†™"></a>å¿«è¯»å¿«å†™</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}template&lt;class T&gt;void wt(T x){//å¿«å†™   if(x &lt; 0) putchar('-'), x = -x;   if(x &gt;= 10) wt(x / 10);   putchar('0' + x % 10);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="int128"><a href="#int128" class="headerlink" title="__int128"></a>__int128</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">inline __int128 read(){    __int128 x=0,f=1;    char ch=getchar();    while(ch&lt;â€˜0â€˜||ch&gt;â€˜9â€˜){        if(ch==â€˜-â€˜)            f=-1;        ch=getchar();    }    while(ch&gt;=â€˜0â€˜&amp;&amp;ch&lt;=â€˜9â€˜){        x=x*10+ch-â€˜0â€˜;        ch=getchar();    }    return x*f;}inline void print(__int128 x){    if(x&lt;0){        putchar(â€˜-â€˜);        x=-x;    }    if(x&gt;9)        print(x/10);    putchar(x%10+â€˜0â€˜);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="å•è°ƒé˜Ÿåˆ—"><a href="#å•è°ƒé˜Ÿåˆ—" class="headerlink" title="å•è°ƒé˜Ÿåˆ—"></a>å•è°ƒé˜Ÿåˆ—</h2><h3 id="æ™®é€šå•è°ƒé˜Ÿåˆ—"><a href="#æ™®é€šå•è°ƒé˜Ÿåˆ—" class="headerlink" title="æ™®é€šå•è°ƒé˜Ÿåˆ—"></a>æ™®é€šå•è°ƒé˜Ÿåˆ—</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">struct node{//ç»“æ„ä½“ï¼Œå­˜å‚¨æ•°å€¼å’Œä½ç½® int data;int order;//åŸæœ¬æ•°åˆ—é‡Œçš„ä½ç½® };const int MAXN = 1e6+5;deque&lt;node&gt;dq_min;deque&lt;node&gt;dq_max;int n,k;int a[MAXN];int res_min[MAXN];int res_max[MAXN];int main(){cin&gt;&gt;n&gt;&gt;k;for(int i=1;i&lt;=n;i++){cin&gt;&gt;a[i];}for(int i=1;i&lt;=n;i++){//å¦‚æœé˜Ÿåˆ—å¤´è¶…è¿‡è¿™kçš„èŒƒå›´ï¼Œåˆ™å‡ºé˜Ÿ if(!dq_max.empty()&amp;&amp;dq_max.front().order&lt;i-k+1) dq_max.pop_front();if(!dq_min.empty()&amp;&amp;dq_min.front().order&lt;i-k+1) dq_min.pop_front();//æ–°å…ƒç´ ä»é˜Ÿå°¾æ’è¿›æ¥ï¼Œé˜Ÿå°¾æ²¡ç”¨çš„å…ƒç´ åœ¨è¿™é‡Œå‡ºé˜Ÿ while(!dq_max.empty()&amp;&amp;dq_max.back().data&lt;=a[i]) dq_max.pop_back();dq_max.push_back(node{a[i],i});while(!dq_min.empty()&amp;&amp;dq_min.back().data&gt;=a[i]) dq_min.pop_back();dq_min.push_back(node{a[i],i});//å­˜å‚¨åŒºé—´æœ€å¤§æœ€å°å€¼ res_max[i] = dq_max.front().data;res_min[i] = dq_min.front().data;}for(int i=k;i&lt;=n;i++){cout&lt;&lt;res_min[i];if(i!=n) cout&lt;&lt;' ';}cout&lt;&lt;endl;for(int i=k;i&lt;=n;i++){cout&lt;&lt;res_max[i];if(i!=n) cout&lt;&lt;' ';}cout&lt;&lt;endl;}//æ´›è°· P1886 æ»‘åŠ¨çª—å£ /ã€æ¨¡æ¿ã€‘å•è°ƒé˜Ÿåˆ— https://www.luogu.com.cn/problem/P1886<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="çŸ©é˜µä¸Šçš„å•è°ƒé˜Ÿåˆ—"><a href="#çŸ©é˜µä¸Šçš„å•è°ƒé˜Ÿåˆ—" class="headerlink" title="çŸ©é˜µä¸Šçš„å•è°ƒé˜Ÿåˆ—"></a>çŸ©é˜µä¸Šçš„å•è°ƒé˜Ÿåˆ—</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">   deque&lt;node&gt; dq;//æ¯è¡Œè¿›è¡Œå•è°ƒé˜Ÿåˆ—//æœ¬æ¥æƒ³å»ºmaxnä¸ªdequeçš„ï¼Œä½†æ˜¯è¿™é‡Œå‘ç°å¯ä»¥æ»šåŠ¨for(int i=1;i&lt;=n;i++){for(int j=1;j&lt;=m;j++){if(!dq.empty()&amp;&amp;dq.front().order&lt;j-k+1) dq.pop_front();while(!dq.empty()&amp;&amp;a[i][j]&gt;=dq.back().data) dq.pop_back();dq.push_back(node{a[i][j],j});res[i][j] = dq.front().data;}dq.clear();}//å¯¹kå¼€å§‹çš„æ¯åˆ—è¿›è¡Œå•è°ƒé˜Ÿåˆ— for(int j=k;j&lt;=m;j++){for(int i=1;i&lt;=n;i++){if(!dq.empty()&amp;&amp;dq.front().order&lt;i-k+1) dq.pop_front();while(!dq.empty()&amp;&amp;dq.back().data&lt;=res[i][j]) dq.pop_back();dq.push_back(node{res[i][j],i});res[i][j] = dq.front().data;}dq.clear();}ll msum = 0;for(int i=k;i&lt;=n;i++){for(int j=k;j&lt;=m;j++){msum+=res[i][j];}}cout&lt;&lt;msum&lt;&lt;endl;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸»å¸­æ ‘"><a href="#ä¸»å¸­æ ‘" class="headerlink" title="ä¸»å¸­æ ‘"></a>ä¸»å¸­æ ‘</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define mid ((l+r)&gt;&gt;1)const int MAXN = 2e5+5;int n,q,m,cnt=0;int a[MAXN],b[MAXN]; int T[MAXN];//è®°å½•æ¯ä¸ªæ—¶é—´ä¸Šæ ‘çš„æ ¹èŠ‚ç‚¹ int sum[MAXN&lt;&lt;5];//è®°å½•èŠ‚ç‚¹è¦†ç›–åŒºé—´å†…æ•°å­—çš„æ•°é‡ int L[MAXN&lt;&lt;5],R[MAXN&lt;&lt;5];//è®°å½•å·¦å³å„¿å­ int build(int l,int r){//ä¸€å¼€å§‹é€šè¿‡é€’å½’å»ºæ ‘int pos = ++cnt;//å»ºç«‹æ–°çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ•°cntè‡ªå¢sum[pos]=0;//æ—¶é—´0æ—¶æ˜¯æ²¡æœ‰ä»»ä½•æ•°å­—çš„if(l&lt;r){L[pos]=build(l,mid);R[pos]=build(mid+1,r);}return pos; }int update(int pre,int l,int r,int x){//preæ˜¯åœ¨posä½ç½®ä¸Šä¸€ä¸ªæ—¶é—´çš„èŠ‚ç‚¹ç¼–å·int pos = ++cnt;L[pos]=L[pre];R[pos]=R[pre];//preæ˜¯ä¸Šä¸ªæ—¶é—´ç‚¹åœ¨å¦‚ä»Šposä½ç½®ä¸Šçš„èŠ‚ç‚¹//è¿™é‡Œç›¸å½“äºæ˜¯æŠŠè¿™ä¸ªæ–°çš„èŠ‚ç‚¹æ¥åˆ°ç›¸åº”çš„ä½ç½®sum[pos] = sum[pre]+1;//è¿™ä¸€æ•´æ¡é“¾ä¸Šå„ç‚¹çš„æƒå€¼éƒ½+1(å¶å­ä¸ŠåŠ äº†1ï¼Œä¸Šé¢çš„éƒ½å—å½±å“)if(l&lt;r){//æ‰¾åˆ°é•¿åº¦ä¸ºä¸€ä¸ªæ•°çš„èŠ‚ç‚¹å°±ç»“æŸé€’å½’äº†if(x&lt;=mid) L[pos] = update(L[pre],l,mid,x);else R[pos] = update(R[pre],mid+1,r,x);//åˆ¤æ–­æ•°å€¼xçš„è¿™ä¸ªèŠ‚ç‚¹åœ¨å½“å‰èŠ‚ç‚¹çš„å·¦å„¿å­è¿˜æ˜¯å³å„¿å­//è¿™æ ·ä¸€ç›´æ²¿ç€è¿™æ¡é“¾å¾€ä¸‹ï¼Œå»ºç«‹æ–°çš„èŠ‚ç‚¹ã€‚//å› ä¸ºposèŠ‚ç‚¹çš„å„¿å­ä¸­æ–°å»ºç«‹çš„èŠ‚ç‚¹éœ€è¦è¿”å›ç¼–å·}return pos;}int query(int u,int v,int l,int r,int k){if(l&gt;=r) return l;int x = sum[L[v]]-sum[L[u]];//è®¡ç®—å·¦å­æ ‘ä¸­æ•°çš„æ•°é‡x if(x&gt;=k) return query(L[u],L[v],l,mid,k);//xæ¯”kå¤§ï¼Œè¯´æ˜ç¬¬kå¤§çš„æ•°åœ¨å·¦å­æ ‘ä¸­else return query(R[u],R[v],mid+1,r,k-x);}int main(){cin&gt;&gt;n&gt;&gt;q;rep(i,1,n){cin&gt;&gt;a[i];b[i]=a[i];}sort(b+1,b+1+n);m = unique(b+1,b+1+n)-b-1;//æ’åºåå¯ä»¥ç”¨uniqueå‡½æ•°å»é‡ T[0] = build(1,m);rep(i,1,n){int t = lower_bound(b+1,b+1+m,a[i]) - b;//æ‰¾åˆ°å¯¹åº”çš„ç¦»æ•£åŒ–åçš„æ•°å€¼T[i] = update(T[i-1],1,m,t);//å»ºç«‹æ–°æ—¶é—´çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶ä¸”å»ºæ–°çš„é“¾å¹¶æ¥ä¸Šå» }while(q--){int u,v,k;cin&gt;&gt;u&gt;&gt;v&gt;&gt;k;//æ‰¾uåˆ°våŒºé—´å†…ç¬¬kå¤§çš„æ•° int t = query(T[u-1],T[v],1,m,k); cout&lt;&lt;b[t]&lt;&lt;endl;//è¾“å‡ºå¯¹åº”çš„åŸå€¼} }//æ´›è°·P3834 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 2ï¼ˆä¸»å¸­æ ‘ï¼‰//https://www.luogu.com.cn/problem/P3834//å…¶å®å°±æ˜¯æ‹¿çš„å¤§çˆ¹æ¿å­ç„¶åè‡ªå·±åŠ äº†å¾ˆå¤šæ³¨é‡Šï¼š//https://www.luogu.com.cn/blog/bestFy0731/solution-p3834<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define log(x) (31-__builtin_clz(x))//è°¢è°¢hjtconstexpr int LOGN = log(MAXN)/log(2)+5;int z,m,n;int fa[MAXN],p[MAXN][LOGN];int L[MAXN];//è®°å½•æ·±åº¦ int lg[MAXN];vector&lt;int&gt; e[MAXN];void init_lg(){//é¢„å¤„ç†lgï¼Œç»™ä¹‹åè®¡ç®—çœæ—¶é—´ lg[1]=0;for(int i=2;i&lt;MAXN;i++) lg[i]=lg[i-1]+( (1&lt;&lt;(lg[i-1]+1))==i );} void dfs(int x){for(auto u:e[x]){L[u]=L[x]+1;dfs(u);}}void preprocess(int n){for(int i=1;i&lt;=n;i++)for(int j=0;1&lt;&lt;j&lt;=n;j++) p[i][j]=-1;//æœ‰äº›å€å¢åå‡ºç•Œçš„ï¼Œç”¨-1æ ‡è®° for(int i=1;i&lt;=n;i++)p[i][0]=fa[i];//å€å¢é•¿åº¦ä¸º1çš„æ—¶å€™æŒ‡å‘æ ¼å­çš„çˆ¶èŠ‚ç‚¹for(int j=1;1&lt;&lt;j&lt;=n;j++)for(int i=1;i&lt;=n;i++)if(p[i][j-1]!=-1) p[i][j]=p[p[i][j-1]][j-1];//ä¸¤ç«¯é•¿åº¦åŠ èµ·æ¥æ­£å¥½æ˜¯ä¸¤å€å³æ¬¡æ•°+1 }int LCA(int u,int v){if(L[u]&lt;L[v]) swap(u,v);//uæˆä¸ºç¦»æ ¹èŠ‚ç‚¹æ›´è¿œçš„int log = lg[L[u]];//æ‰¾åˆ°L[u]çš„äºŒè¿›åˆ¶æœ€é«˜ä½ for(int i=log;i&gt;=0;i--)if(L[u]-(1&lt;&lt;i)&gt;=L[v]) u=p[u][i];//uå¾€ä¸Šçˆ¬åˆ°ä¸våŒé«˜if(u==v) return u;for(int i=log;i&gt;=0;i--)if(p[u][i]!=-1&amp;&amp;p[u][i]!=p[v][i]){//æ‰¾å…¬å…±ç¥–å…ˆ,é€¼è¿‘å®ƒä½†æ˜¯åˆä¸è¶…è¿‡å®ƒ u=p[u][i]; v=p[v][i]; } return fa[u];} int main(){init_lg();//é¢„å¤„ç†log2xï¼Œç»™ä¹‹åçš„è®¡ç®—çœæ—¶é—´ int z,q,u,v;string aa,bb;cin&gt;&gt;z;while(z--){map&lt;string,int&gt;mp;cin&gt;&gt;n&gt;&gt;q;if(n==1){while(q--){cin&gt;&gt;aa&gt;&gt;bb;cout&lt;&lt;0&lt;&lt;endl;}continue;}int countt = 0;for(int i=1;i&lt;=n;i++){fa[i]=i;}for(int i=1;i&lt;n;i++){cin&gt;&gt;aa&gt;&gt;bb;int &amp;a = mp[aa];int &amp;b = mp[bb];if(!a) a=++countt;if(!b) b=++countt;fa[a]=b;e[b].push_back(a);}int rt;for(int i=1;i&lt;=n;i++){if(fa[i]==i) {rt=i;break;}}L[rt]=1;dfs(rt);preprocess(n);int res;while(q--){cin&gt;&gt;aa&gt;&gt;bb;int &amp;a = mp[aa];int &amp;b = mp[bb];int lc = LCA(a,b);res = L[a]-L[lc];if(lc!=b) res++;cout&lt;&lt;res&lt;&lt;endl;}for(int i=1;i&lt;=n;i++) e[i].clear();}}//HDOJ4547 http://acm.hdu.edu.cn/showproblem.php?pid=4547<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ ‘é“¾å‰–åˆ†"><a href="#æ ‘é“¾å‰–åˆ†" class="headerlink" title="æ ‘é“¾å‰–åˆ†"></a>æ ‘é“¾å‰–åˆ†</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">ll ans;int da[MAXN];//è®°å½•dfnåºä¸Šçš„å„ç‚¹æ•°å€¼ç”¨æ¥åˆå§‹åŒ–çº¿æ®µæ ‘int n,m,rt,p;//èŠ‚ç‚¹æ•°ï¼Œè¯¢é—®æ•°ï¼Œæ ¹ï¼Œæ¨¡æ•° struct tree{int sum;int lazy;};struct St{//çº¿æ®µæ ‘ tree t[MAXN&lt;&lt;2];void pushup(int pos){ t[pos].sum=(t[pos&lt;&lt;1].sum+t[pos&lt;&lt;1|1].sum) %p;return;}void pushdown(int l,int r,int pos){if(!t[pos].lazy) return;int mid = (l+r)&gt;&gt;1;t[pos&lt;&lt;1].sum += t[pos].lazy*(mid-l+1);t[pos&lt;&lt;1].sum %= p;//å–æ¨¡ t[pos&lt;&lt;1|1].sum += t[pos].lazy*(r-(mid+1)+1);t[pos&lt;&lt;1|1].sum %= p;//å–æ¨¡ t[pos&lt;&lt;1].lazy += t[pos].lazy;t[pos&lt;&lt;1].lazy %= p;//å–æ¨¡ t[pos&lt;&lt;1|1].lazy += t[pos].lazy;t[pos&lt;&lt;1|1].lazy %= p;//å–æ¨¡ t[pos].lazy = 0; }void build(int l,int r,int pos){ t[pos].sum = t[pos].lazy = 0;if(l==r){t[pos].sum = da[l];return;}int mid = (l+r)&gt;&gt;1;build(l,mid,pos&lt;&lt;1);build(mid+1,r,pos&lt;&lt;1|1);pushup(pos);}void update(int L,int R,int l,int r,int pos,int v){if(L&lt;=l&amp;&amp;r&lt;=R){t[pos].sum += v*(r-l+1);t[pos].lazy += v;t[pos].lazy %= p;//å–æ¨¡ return;}if(r&lt;L||l&gt;R) return;pushdown(l,r,pos);int mid = (l+r)&gt;&gt;1;update(L,R,l,mid,pos&lt;&lt;1,v);update(L,R,mid+1,r,pos&lt;&lt;1|1,v);pushup(pos);}void query(int L,int R,int l,int r,int pos){if(L&lt;=l&amp;&amp;r&lt;=R){ans += t[pos].sum;ans%=p;//å–æ¨¡ return;}if(r&lt;L||R&lt;l) return;pushdown(l,r,pos);int mid = (l+r)&gt;&gt;1;query(L,R,l,mid,pos&lt;&lt;1);query(L,R,mid+1,r,pos&lt;&lt;1|1);return;}//æŸ¥è¯¢å’Œä¿®æ”¹ï¼Œä¸ºäº†ç®€åŒ–å‚æ•°ï¼Œæˆ‘åˆå†™äº†ä¸¤ä¸ª ll tquery(int L,int R){ans = 0;query(L,R,1,n,1);return ans; }void tupdate(int L,int R,int v){update(L,R,1,n,1,v);} };//æ ‘ç»“æ„ vector&lt;int&gt; e[MAXN];//è®°å½•è¾¹int a[MAXN];//è®°å½•ç¼–å·å¯¹åº”èŠ‚ç‚¹çš„åˆå§‹æ•°å€¼//æ ‘å‰–éƒ¨åˆ†St segt;int si[MAXN],dep[MAXN],fa[MAXN],rem[MAXN],dfn[MAXN],top[MAXN];int dfn_num;void dfs1(int x,int faa){//é¢„å¤„ç†å‡ºfa,dep,si,remint ma = 0;//ç”¨æ¥xçš„é‡å„¿å­ï¼Œè®°å½•æœ€å¤§çš„sizesi[x] = 1;for(auto v:e[x]){if(v==faa) continue;//è·³è¿‡çˆ¶äº²èŠ‚ç‚¹ dep[v] = dep[x]+1;//æ›´æ–°å„¿å­çš„dep dfs1(v,x);si[x] += si[v];//xçš„sizeåŠ ä¸Šå½“å‰å„¿å­çš„sizefa[v] = x;//æ ‡è®°vçš„çˆ¶èŠ‚ç‚¹ä¸ºx if(si[v]&gt;ma){ma = si[v];rem[x] = v;//è®°å½•é‡å„¿å­ } }} void dfs2(int x,int faa){//é¢„å¤„ç†å‡ºdfnï¼Œtopif(rem[faa]==x) top[x] = top[faa];//åŒä¸€æ¡é‡é“¾åŒä¸€ä¸ªtop else top[x] = x;//å¦åˆ™ä¸ºé‡é“¾å¤´dfn[x] = ++dfn_num;//æ›´æ–°æ ‘å‰–åºï¼ŒåŒæ—¶ä¸‹æ ‡è‡ªå¢da[dfn_num] = a[x];if(rem[x]) dfs2(rem[x],x);//ä¼˜å…ˆéå†é‡å„¿å­for(auto v:e[x]){if(v==faa) continue;if(v==rem[x]) continue;//é‡å„¿å­ä¹‹å‰å·²ç»éå†è¿‡äº†dfs2(v,x); } }inline ll cal(int L,int R){return segt.tquery(L,R);}void init(){//åˆå§‹åŒ–dfn_num=0;dfs1(rt,0);dfs2(rt,0);segt.build(1,n,1);//è¿™é‡Œé€šè¿‡daæ¥åˆå§‹åŒ–çº¿æ®µæ ‘ }ll query(int x,int y){ll res=0;while(top[x]!=top[y]){//è·³åˆ°åŒä¸€æ¡é‡é“¾ if(dep[top[x]]&lt;dep[top[y]])swap(x,y);//é‡é“¾æ·±åº¦æ›´å¤§çš„ç‚¹ä¼˜å…ˆå¾€ä¸Šè·³res += cal(dfn[top[x]],dfn[x]);//ç®—ä¸Šè¿™æ¡é‡é“¾çš„ res%=p;//å–æ¨¡ x = fa[top[x]];//è·³åˆ°é‡é“¾å¤´çš„çˆ¶èŠ‚ç‚¹ä¸Š }//è·³å‡ºè¿™ä¸ªå¾ªç¯æ—¶ï¼Œxyå·²ç»åœ¨åŒä¸€ä¸ªé‡é“¾ä¸Šäº†res += cal(min(dfn[x],dfn[y]),max(dfn[x],dfn[y]));res%=p;//å–æ¨¡ //xyä¸ç¡®å®šé¡ºåºå¯¹ä¸å¯¹ï¼Œæ‰€ä»¥å–minmax return res;}void update(int x,int y,int v){ll res=0;while(top[x]!=top[y]){//è·³åˆ°åŒä¸€æ¡é‡é“¾ if(dep[top[x]]&lt;dep[top[y]])swap(x,y);//é‡é“¾æ·±åº¦æ›´å¤§çš„ç‚¹ä¼˜å…ˆå¾€ä¸Šè·³segt.tupdate(dfn[top[x]],dfn[x],v);//æ›´æ–°æ•°å€¼ x = fa[top[x]];//è·³åˆ°é‡é“¾å¤´çš„çˆ¶èŠ‚ç‚¹ä¸Š }//è·³å‡ºè¿™ä¸ªå¾ªç¯æ—¶ï¼Œxyå·²ç»åœ¨åŒä¸€ä¸ªé‡é“¾ä¸Šäº†segt.tupdate(min(dfn[x],dfn[y]),max(dfn[x],dfn[y]),v);//xyä¸ç¡®å®šé¡ºåºå¯¹ä¸å¯¹ï¼Œæ‰€ä»¥å–minmax}int main(){cin&gt;&gt;n&gt;&gt;m&gt;&gt;rt&gt;&gt;p;//èŠ‚ç‚¹æ•°ï¼Œæ“ä½œæ•°ï¼Œæ ¹èŠ‚ç‚¹åºå·ï¼Œæ¨¡æ•°for(int i=1;i&lt;=n;i++){cin&gt;&gt;a[i];//è®°å½•åˆå§‹æ•°å€¼ a[i] = a[i]%p;} int x,y;for(int i=1;i&lt;=n;i++) e[i].clear();for(int i=1;i&lt;n;i++){cin&gt;&gt;x&gt;&gt;y;e[x].push_back(y);e[y].push_back(x);}init();int v;int typ;while(m--){cin&gt;&gt;typ;if(typ==1){//ç®€å•è·¯å¾„ä¸Šä¿®æ”¹ cin&gt;&gt;x&gt;&gt;y&gt;&gt;v;update(x,y,v);}else if(typ==2){//ç®€å•è·¯å¾„ä¸ŠæŸ¥è¯¢ cin&gt;&gt;x&gt;&gt;y;cout&lt;&lt;query(x,y)&lt;&lt;endl;}else if(typ==3){//å­æ ‘ä¸Šä¿®æ”¹ cin&gt;&gt;x&gt;&gt;v;segt.tupdate(dfn[x],dfn[x]+si[x]-1,v);}else if(typ==4){//å­æ ‘ä¸ŠæŸ¥è¯¢ cin&gt;&gt;x;cout&lt;&lt;segt.tquery(dfn[x],dfn[x]+si[x]-1)&lt;&lt;endl;}}} //æ´›è°· P3384 ã€æ¨¡æ¿ã€‘è½»é‡é“¾å‰–åˆ† https://www.luogu.com.cn/problem/P3384<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="splay"><a href="#splay" class="headerlink" title="splay"></a>splay</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int root,tot,n;struct Node{    int ch[2];//å·¦å³å„¿å­    int val;//å€¼    int fa;//çˆ¶èŠ‚ç‚¹    int size;//å­æ ‘å¤§å°    int cnt;//è®¡æ•° }t[MAXN];inline void pushup(int x){//ç»´æŠ¤èŠ‚ç‚¹çš„size t[x].size = t[x].cnt;//è‡ªå·±é‡å¤çš„æ¬¡æ•°å…ˆç´¯è®¡if(t[x].ch[0]) t[x].size+=t[t[x].ch[0]].size;if(t[x].ch[1]) t[x].size+=t[t[x].ch[1]].size;//å¦‚æœæœ‰å„¿å­,æŠŠå„¿å­çš„sizeåŠ åˆ°è‡ªå·±//åŒçº¿æ®µæ ‘çš„pushupå¿…é¡»å…ˆå¤„ç†å„¿å­å†å¤„ç†çˆ¶èŠ‚ç‚¹}void rotate(int x){//æ—‹è½¬æ“ä½œint y=t[x].fa, z=t[y].fa;int k=(t[y].ch[1]==x);//xæ˜¯yçš„å·¦è¿˜æ˜¯å³å„¿å­ t[z].ch[t[z].ch[1]==y] = x;//xæ¢åˆ°yåŸæ¥åœ¨çš„ä½ç½®t[x].fa = z; t[y].ch[k] = t[x].ch[k^1];//yé¡¶ä¸‹æ¥xçš„å„¿å­ï¼Œæ”¾åœ¨xåŸæ¥å¯¹yçš„ä½ç½® t[t[x].ch[k^1]].fa = y;t[x].ch[k^1] = y;//yæ¢åˆ° xåŸæ¥åœ¨yçš„ ç›¸å¯¹çš„ ä½ç½®t[y].fa = x;pushup(y),pushup(x);//æ›´æ–°size,å› ä¸ºyæ˜¯å„¿å­,æ‰€ä»¥å…ˆy }//è¿™é‡Œçš„å¼‚æˆ–æ˜¯ç”¨æ¥è°ƒæ•´0å’Œ1(å·¦å³å„¿å­) inline void splay(int x,int goal){//æ‰¾åˆ°xå¹¶æŠŠxæ—‹è½¬ä¸ºgoalçš„å„¿å­æ ¹èŠ‚ç‚¹ while(t[x].fa!=goal){//xä¸€ç›´æ—‹è½¬åˆ°æˆä¸ºgoalçš„å„¿å­int y=t[x].fa,z=t[y].fa; if(z!=goal)//å¦‚æœyä¸æ˜¯æ ¹èŠ‚ç‚¹,åˆ†ä¸¤ç±»è®¨è®º (t[z].ch[0]==x)^(t[y].ch[0]==y)?rotate(x):rotate(y);//xå’Œyåˆ†åˆ«æ˜¯yå’Œzçš„åŒä¸€ä¾§å„¿å­,å…ˆè½¬yå†è½¬x;ä¸åŒåˆ™å…ˆè½¬xè½¬ä¸¤æ¬¡ rotate(x);//æ— è®ºä¸‰ç§æƒ…å†µä¸­çš„å“ªä¸€ç§éƒ½è¦æœ€åè½¬x }if(goal==0) root=x;//è‹¥goalæ˜¯0,æ ¹èŠ‚ç‚¹æ›´æ–°ä¸ºx}inline void find(int x){//æŸ¥æ‰¾xçš„ä½ç½®,å¹¶æ—‹è½¬xåˆ°æ ¹èŠ‚ç‚¹,ç±»ä¼¼äºŒåˆ†,O(logn) int u = root;if(!u) return;//æ ‘æ˜¯ç©ºçš„æƒ…å†µwhile(t[u].ch[x&gt;t[u].val]&amp;&amp;x!=t[u].val)//æ‰¾åˆ°x,ä¸ä¸€å®šæ‰¾å¾—åˆ°u = t[u].ch[x&gt;t[u].val];//å·¦å„¿å­å°ï¼Œå³å„¿å­å¤§ splay(u,0);//å½“å‰ä½ç½®æ—‹è½¬åˆ°æ ¹èŠ‚ç‚¹.æ ¹èŠ‚ç‚¹çš„faå­˜0}inline void insert(int x){//ç±»ä¼¼find,å¦‚æœæ’å…¥çš„æ•°å·²ç»å­˜åœ¨,å¯ä»¥åœ¨æ‰¾åˆ°çš„èŠ‚ç‚¹è®¡æ•° int u = root,fu = 0;//å½“å‰ä½ç½®u,uçš„çˆ¸çˆ¸fu while(u&amp;&amp;t[u].val!=x){//æ‰¾åˆé€‚ä½ç½®,uæ‰¾åˆ°ç©ºçš„åœ°æ–¹ä¹Ÿä¼šåœæ­¢fu = u;u = t[u].ch[x&gt;t[u].val];}if(u) t[u].cnt++;//å·²æœ‰è¿™ä¸ªæ•°å­—çš„æƒ…å†µ,è®¡æ•° else{u = ++tot;//èŠ‚ç‚¹æ€»æ•°tot+1if(fu)//è¿™æ—¶å€™fuæ˜¯ä¸Šä¸€ä¸ªuå³æ–°æ’å…¥uçš„çˆ¶èŠ‚ç‚¹,å¦‚æœçˆ¶èŠ‚ç‚¹ä¸æ˜¯0t[fu].ch[x&gt;t[fu].val]=u;t[u].ch[0] = t[u].ch[1] = 0;//è¿™ä¸ªæ–°èŠ‚ç‚¹æ²¡å„¿å­t[u].fa = fu;//çˆ¶äº²t[u].val = x;//æ•°å€¼t[u].cnt = 1;//è®¡æ•°t[u].size  = 1;//å¤§å°}splay(u,0);}inline int Next(int x,int f){find(x); int u=root;//æ ¹èŠ‚ç‚¹ï¼Œæ­¤æ—¶xçš„çˆ¶èŠ‚ç‚¹(å­˜åœ¨çš„è¯)å°±æ˜¯æ ¹èŠ‚ç‚¹ //è¿™é‡Œslså›ç­”äº†æˆ‘çš„ç–‘é—®//"splayä¸­ä¸ä¸€å®šæœ‰xè¿™ä¸ªèŠ‚ç‚¹,é‚£ä¹ˆå®ƒsplayåˆ°æ ¹çš„å°±ç›´æ¥å¯ä»¥æ»¡è¶³äº†"//"å¦‚æœæœ‰è¿™ä¸ªç‚¹çš„è¯å°±è¦åœ¨splayä¸Šå†æ‰¾ä¸€æ³¢(å› ä¸ºå½“å‰çš„æ ¹å°±æ˜¯xè¿™ä¸ªç‚¹)"if(t[u].val&gt;x&amp;&amp;f)return u;//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å¤§äºxå¹¶ä¸”è¦æŸ¥æ‰¾çš„æ˜¯åç»§    if(t[u].val&lt;x&amp;&amp;!f)return u;//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å°äºxå¹¶ä¸”è¦æŸ¥æ‰¾çš„æ˜¯å‰é©±     //ä¸Šé¢ä¸¤ä¸ªæ˜¯xä¸åœ¨splayä¸­çš„æƒ…å†µu = t[u].ch[f];//åç»§åœ¨æ ¹å³è¾¹æ‰¾,å‰é©±åœ¨å·¦è¾¹æ‰¾while(t[u].ch[f^1]) u = t[u].ch[f^1];//å·¦åŠè¾¹è¦å¾€å³è·³æ‰¾æœ€å¤§çš„,å³åŠè¾¹å¾€å·¦è·³ return u;}inline void Delete(int x){//åˆ é™¤x int last = Next(x,0);//æŸ¥æ‰¾xçš„å‰é©±int next = Next(x,1);//æ‰¾xçš„åç»§splay(last,0);splay(next,last);//å‰é©±èŠ‚ç‚¹è½¬åˆ°æ ¹èŠ‚ç‚¹,åç»§è½¬åˆ°æ ¹çš„å„¿å­ä¸Š//æ“ä½œå®Œä¹‹å.åç»§æ˜¯å‰é©±çš„å³å„¿å­,xæ˜¯å‰é©±çš„å·¦å„¿å­,è€Œä¸”xæ˜¯å¶å­èŠ‚ç‚¹ int del = t[next].ch[0];//åç»§çš„å·¦å„¿å­xif(t[del].cnt&gt;1){t[del].cnt--;//å¦‚æœæœ‰å¤šä¸ªx,åˆ™xçš„è®¡æ•°å‡å°‘ä¸€ä¸ªsplay(del,0);//è¿™ä¸ªsplayè¿˜é‡æ–°pushupè®¡ç®—äº†delçš„å­æ ‘}elset[next].ch[0]=0;//å› ä¸ºæ˜¯å·¦å„¿å­æ˜¯å¶å­èŠ‚ç‚¹,ç›´æ¥ä¸¢æ‰ }inline int kth(int x){//æ‰¾ç¬¬kå°,æ”¹ä¸€ä¸‹ä¹Ÿå¯ä»¥æ‰¾ç¬¬kå¤§ int u=root;return 0; while(1){int y = t[u].ch[0];//å·¦å„¿å­if(x&gt;t[y].size+t[u].cnt){//å¦‚æœå·¦å„¿å­å’Œå½“å‰ç‚¹çš„sizeæ¯”è¦æ‰¾çš„æ’åæ•°å° x-=t[y].size+t[u].cnt;//æ•°é‡å‡å°‘,ç›¸å½“äºæŠŠè¿™ä¸ªå¯»æ‰¾æ’åçš„èµ·ç‚¹å˜æˆäº†å½“å‰èŠ‚ç‚¹ u=t[u].ch[1];//é‚£ä¹ˆå½“å‰æ’åçš„æ•°ä¸€å®šè¦å¾€å³å„¿å­ä¸Šæ‰¾ }else if(t[y].size&gt;=x) u=y;//å·¦å„¿å­çš„sizeè¶³å¤Ÿ,å„¿å­åœ¨å·¦ä¾§ä¸Šæ‰¾ else return t[u].val;//å·¦å„¿å­çš„sizeæ¯”xå°,åŠ ä¸Šå½“å‰ç‚¹uçš„sizeåˆ™æ¯”xå¤§,è¯´æ˜ç¬¬kAå¤§çš„å°±æ˜¯x }} int main(){tot=0;read(n);    insert(+2147483647);insert(-2147483647);//åšå®¢ä½œè€…åœ¨è¿™é‡Œå…ˆåŠ äº†æ­£è´ŸINF    int typ,x;    while(n--){        read(typ);        if(typ==1){read(x);insert(x);}//æ’å…¥         else if(typ==2){read(x);Delete(x);}//åˆ é™¤         else if(typ==3){//æŸ¥æ‰¾ read(x);find(x);            printf("%d\n",t[t[root].ch[0]].size);        }        else if(typ==4){//ç¬¬kå°             read(x);printf("%d\n",kth(x+1));//ä¹‹å‰æ’è¿›å»æ­£è´ŸINF,æ‰€ä»¥è¦+1;         }        else if(typ==5){//å‰é©±            read(x);printf("%d\n",t[Next(x,0)].val);        }        else if(typ==6){//åç»§             read(x);printf("%d\n",t[Next(x,1)].val);        }    }    return 0;}//åŸºæœ¬æ˜¯æŠ„çš„è¿™ä¸ªå¤§çˆ¹çš„åšå®¢https://www.cnblogs.com/cjyyb/p/7499020.html//å†è‡ªå·±åŠ äº†ä¸€ç‚¹æ³¨è§£//å…¨éƒ¨ä»£ç https://paste.ubuntu.com/p/gH5mWpz669/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¤šé¡¹å¼"><a href="#å¤šé¡¹å¼" class="headerlink" title="å¤šé¡¹å¼"></a>å¤šé¡¹å¼</h1><h2 id="FFT"><a href="#FFT" class="headerlink" title="FFT"></a>FFT</h2><h3 id="é€’å½’FFT"><a href="#é€’å½’FFT" class="headerlink" title="é€’å½’FFT"></a>é€’å½’FFT</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">inline int read(){    char c=getchar();int x=0,f=1;    while(c&lt;'0'||c&gt;'9'){if(c=='-')f=-1;c=getchar();}    while(c&gt;='0'&amp;&amp;c&lt;='9'){x=x*10+c-'0';c=getchar();}    return x*f;}#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)const int MAXN = 3e6+5;const double Pi = acos(-1.0);struct cplx{//æ‰‹å†™è´Ÿæ•°complexç”¨èµ·æ¥ä¼šæ›´å¿«    double x,y;    cplx(double x=0,double y=0):x(x),y(y){}    friend cplx operator + (cplx a,cplx b){return cplx(a.x+b.x,a.y+b.y);}    friend cplx operator - (cplx a,cplx b){return cplx(a.x-b.x,a.y-b.y);}    friend cplx operator * (cplx a,cplx b){return cplx(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);}}a[MAXN],b[MAXN];void FFT(int limit,cplx *a,int type){//limitè®°å½•é¡¹æ•°    if(limit==1) return;//åªæœ‰ä¸€ä¸ªå¸¸æ•°é¡¹ç»“æŸé€’å½’(å³åªå‰©ä¸‹0æ¬¡çš„)    cplx a1[limit&gt;&gt;1],a2[limit&gt;&gt;1];//æŒ‰ç…§å¥‡å¶åˆ†ç»„    for(int i=0;i&lt;limit;i+=2)        a1[i&gt;&gt;1] = a[i],a2[i&gt;&gt;1] = a[i+1];    FFT(limit&gt;&gt;1,a1,type);    FFT(limit&gt;&gt;1,a2,type);    cplx Wn(cos(2*Pi/limit),type*sin(2*Pi/limit));//å•ä½æ ¹    //è¿™é‡ŒtypeæŒºé‡è¦çš„,åå˜æ¢çš„æ—¶å€™ç”¨-1,å› ä¸ºæ˜¯-k    cplx w(1,0);//ä¸€ä¼šå„¿ç®—å•ä½æ ¹å¹‚çš„æ—¶å€™ç”¨wå­˜    cplx tmp;    for(int i=0;i&lt;(limit&gt;&gt;1);i++,w=w*Wn){//wç›¸å½“äºå…¬å¼ä¸­çš„w_n^k        tmp = w*a2[i];//è´è¶æ“ä½œ        a[i]=a1[i]+tmp;//å¶        a[i+(limit&gt;&gt;1)]=a1[i]-tmp;//O(1)ç®—å¦å¤–ä¸€éƒ¨åˆ†    }}int main(){    int n=read(),m=read();    rep(i,0,n) a[i].x=read();    rep(i,0,m) b[i].x=read();    int limit = 1;    while(limit&lt;=n+m) limit&lt;&lt;=1;//è¿™é‡Œéå¸¸ç²¾é«“    //æŠŠé•¿åº¦è¡¥åˆ°2çš„å¹‚ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘%2ä½™æ•°çš„æƒ…å†µ    //è€Œä¸”ä¸å¿…æ‹…å¿ƒé«˜æ¬¡é¡¹çš„ç³»æ•°ï¼Œå› ä¸ºé»˜è®¤ä¸º0    FFT(limit,a,1);    FFT(limit,b,1);    //1è¡¨ç¤ºFFTï¼Œ-1åˆ™æ˜¯åå˜æ¢       rep(i,0,limit) a[i] = a[i]*b[i];//è½¬æ¢ä¸ºç‚¹å€¼åç›´æ¥ç›¸ä¹˜    FFT(limit,a,-1);//ç°åœ¨å˜å›å»    rep(i,0,n+m) printf("%d ",(int)(a[i].x/limit+0.5));//è¿˜è¦é™¤ä»¥nçš„    printf("\n");}//P3803 ã€æ¨¡æ¿ã€‘å¤šé¡¹å¼ä¹˜æ³•ï¼ˆFFTï¼‰//https://www.luogu.com.cn/problem/P3803<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿­ä»£FFT"><a href="#è¿­ä»£FFT" class="headerlink" title="è¿­ä»£FFT"></a>è¿­ä»£FFT</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const double Pi = acos(-1.0);inline int read(){    char c=getchar();int x=0,f=1;    while(c&lt;'0'||c&gt;'9'){if(c=='-')f=-1;c=getchar();}    while(c&gt;='0'&amp;&amp;c&lt;='9'){x=x*10+c-'0';c=getchar();}    return x*f;}struct cplx{    double x,y;    cplx(double x=0,double y=0):x(x),y(y){}    friend cplx operator + (cplx a,cplx b){return cplx(a.x+b.x,a.y+b.y);}    friend cplx operator - (cplx a,cplx b){return cplx(a.x-b.x,a.y-b.y);}    friend cplx operator * (cplx a,cplx b){return cplx(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);}}a[MAXN],b[MAXN];int la,lb;int rev[MAXN],lim,len;//lenå­˜äºŒè¿›åˆ¶ä½æ•°//å’Œé€’å½’FFTçš„limitä¸ä¸€æ ·,è¿™é‡Œçš„limåœ¨FFTæ‰§è¡Œä¸­æ˜¯ä¸å˜çš„inline void FFT(cplx a[],int type){    rep(i,0,lim-1) if(i&lt;rev[i]) swap(a[i],a[rev[i]]);    //æŒ‰ç…§ä½é€†åºåçš„æ•°å­—å¤§å°æ’å¥½åº,å› ä¸ºæ˜¯ç½®æ¢æ‰€ä»¥Onå°±è¡Œ    rep(dep,1,log2(lim)){//ç¬¬ä¸€å±‚æšä¸¾å±‚æ•°        int m = 1&lt;&lt;dep;//å¾—åˆ°depå±‚æ¯ç»„çš„å…ƒç´ ä¸ªæ•°        cplx Wn(cos(2.0*Pi/m),type*sin(2.0*Pi/m));//å•ä½æ ¹        for(int k=0;k&lt;lim;k+=m){//ç¬¬äºŒå±‚kè¡¨ç¤ºæ¯ä¸ªmå…ƒç»„å¼€å§‹çš„ç‚¹            cplx w(1,0);            rep(j,0,(m&gt;&gt;1)-1){                cplx t = w*a[k+j+m/2];//è´è¶æ“ä½œ,ä¸¤ä¸¤è¿›è¡Œè¿ç®—                cplx u = a[k+j];                //ä¹‹å‰å› ä¸ºè¿™å¥å¡äº†å¥½ä¹…,æ²¡è¿™å¥çš„è¯a[k+j]çš„å€¼æ”¹å˜äº†,a[k+j+m/2]å°±é”™äº†                a[k+j] = a[k+j]+t;                a[k+j+m/2] = a[k+j]-t;                w = w*Wn;            }        }    }}inline void init_rev(){//é¢„å¤„ç†revä½é€†åºç½®æ¢æ•°ç»„    rep(i,0,lim-1) rev[i] = (rev[i&gt;&gt;1]&gt;&gt;1) | ((i&amp;1)&lt;&lt;(len-1));//|å’Œ+ä½œç”¨æ˜¯ä¸€æ ·çš„    //åé¢å‡ ä½æ˜¯ä¸Šä¸€ä¸ªå­é—®é¢˜çš„è§£å‘å³ç§»åŠ¨ä¸€ä½,ç¬¬ä¸€ä½å³æœ€åº•å±‚æŒ‰å¥‡å¶å¾—å‡º}int main(){    la = read(),lb = read();    rep(i,0,la) a[i].x = read();    rep(i,0,lb) b[i].x = read();    lim = 1,len = 0;    while(lim&lt;=la+lb) lim&lt;&lt;=1,len++;//ä¸€å®šè¦æ˜¯2çš„å¹‚    init_rev();//è®¡ç®—ä½é€†åºé¡ºåº    FFT(a,1);    FFT(b,1);    rep(i,0,lim-1) a[i] = a[i]*b[i];//ç‚¹å€¼è¡¨ç¤ºæ³•ç›´æ¥ç›¸ä¹˜    FFT(a,-1);//ç°åœ¨å˜å›å»    rep(i,0,la+lb) printf("%d ",(int)(a[i].x/lim+0.5));//è¿˜è¦é™¤ä»¥nçš„    printf("\n");}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>//å¾…æ”¹</strong></p><h1 id="å›¾è®º"><a href="#å›¾è®º" class="headerlink" title="å›¾è®º"></a>å›¾è®º</h1><h2 id="ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–Dijkstra"><a href="#ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–Dijkstra" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–Dijkstra"></a>ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–Dijkstra</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define LINF 1ll&lt;&lt;60const int MAXN = 2e5+10;typedef pair&lt;int,ll&gt; pli;vector&lt;pli&gt; e[MAXN];//firstæ˜¯ç›®æ ‡çš„ç‚¹ï¼Œsecondæ˜¯è·ç¦»dis bool vis[MAXN];ll d[MAXN];int n,m,s,t;void dijkstra(){rep(i,1,n){d[i] = LINF;vis[i] = 0;}d[s] = 0;priority_queue&lt; pli,vector&lt;pli&gt;,greater&lt;pli&gt; &gt;q;//firstå­˜d[x],secondå­˜xçš„ç¼–å· q.push(make_pair(0,s));while(!q.empty()){//è¿›è¡Œç±»ä¼¼bfsçš„æ“ä½œ int now = q.top().second;q.pop();if(vis[now])continue;//å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ“ä½œæ˜¯éƒ½å…ˆæ¨è¿›å»çš„ï¼Œæ‰€ä»¥å¯èƒ½é‡å¤é‡åˆ°nowç‚¹ vis[now] = 1;int siz = e[now].size();for(auto x:e[now]){//éå†nowçš„æ‰€æœ‰è¾¹ int v = x.second;//åˆ°è¾¾çš„ç‚¹if(d[v]&gt;d[now]+x.first){d[v] = d[now] + x.first;q.push(make_pair(d[v],v));//æ¨å…¥ä¼˜å…ˆé˜Ÿåˆ— } }}}int main(){cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;int u,v;ll dis;rep(i,1,m){cin&gt;&gt;u&gt;&gt;v&gt;&gt;dis;e[u].push_back(make_pair(dis,v));//e[v].push_back(make_pair(u,dis));//åŒå‘é€šè¡Œçš„æƒ…å†µ }dijkstra();rep(i,1,n){cout&lt;&lt;d[i];//è¾“å‡ºåˆ°å„ä¸ªç‚¹çš„æœ€çŸ­è·¯å¾„ if(i!=n) cout&lt;&lt;' ';}} <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Dinic"><a href="#Dinic" class="headerlink" title="Dinic"></a>Dinic</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">struct Edge{int from,to;ll cap,flow;};int n,m,s,t;//èŠ‚ç‚¹æ•°ï¼Œè¾¹æ•°(å«åå‘å¼§)ï¼Œæºç‚¹ä¸æ±‡ç‚¹ç¼–å· vector&lt;Edge&gt; edges;//è¾¹é•¿ï¼Œedges[e]å’Œedges[e^1]äº’ä¸ºåå‘å¼§ vector&lt;int&gt; G[MAXN];//é‚»æ¥è¡¨ï¼ŒG[i][j]è¡¨ç¤ºèŠ‚ç‚¹içš„ç¬¬jæ¡è¾¹åœ¨edgesä¸­çš„ç¼–å·int d[MAXN];//distå±‚æ•°ï¼Œå³d[i]ä¸ºèµ·ç‚¹åˆ°içš„è·ç¦»ï¼ˆå±‚æ•°ï¼‰,åŒæ—¶ä¹Ÿèµ·åˆ°visçš„ä½œç”¨é˜²æ­¢é‡å¤èµ°int cur[MAXN];//è¿™ä¸ªcuræ˜¯dfsçš„æ—¶å€™ç”¨æ¥çœç•¥é‡å¤æ­¥éª¤çš„void add_edge(int from,int to,ll cap){edges.push_back((Edge){from,to,cap,0});edges.push_back((Edge){to,from,0,0});int siz = edges.size();G[from].push_back(siz-2);//æ­£å‘è¾¹G[to].push_back(siz-1);//åå‘è¾¹}bool bfs(){    memset(d,-1,sizeof(d));queue&lt;int&gt; q;q.push(s);d[s]=0;//dist(s) = 0while(!q.empty()){int x=q.front();q.pop();rep(i,0,G[x].size()-1){Edge &amp;e = edges[G[x][i]];if(d[e.to]==-1&amp;&amp;e.cap&gt;e.flow){//åªè€ƒè™‘æ®‹é‡ç½‘ç»œä¸­çš„å¼§å³è¿™ä¸ªè¾¹è¿˜æ²¡è¢«å¡«æ»¡d[e.to]=d[x]+1;//æ ‡è®°å±‚æ¬¡dist(x)q.push(e.to);}}}return d[t]!=-1;//æ‰¾åˆ°åˆ°tèŠ‚ç‚¹çš„è·¯å¾„åˆ™å›1ï¼Œæ‰¾ä¸åˆ°åˆ™å›0} ll dfs(int x,ll a){//DFSé™¤äº†å½“å‰èŠ‚ç‚¹xå¤–ï¼Œè¿˜è¦ä¼ å…¥"ç›®å‰ä¸ºæ­¢æ‰€æœ‰è¾¹çš„æœ€å°æ®‹é‡"å³"æ°´æµåˆ°è¿™é‡Œè¿˜å‰©å¤šå°‘"if(x==t||a==0) return a;//ä¹Ÿæ˜¯å¾ˆç®€æ´ä¸€å¥è¯ ï¼Œç»“æŸå¢å¹¿  ll flow = 0,f;for(int &amp;i=cur[x];i&lt;G[x].size();i++){//ä¸Šä¸€æ¬¡é˜»å¡æµå·²ç»æŠŠcur[x]ä¹‹å‰çš„å¼§éƒ½æ’é™¤äº† Edge &amp;e = edges[G[x][i]];if(d[x]+1==d[e.to]&amp;&amp;(f=dfs(e.to,min(a,e.cap-e.flow)))&gt;0){e.flow+=f;edges[G[x][i]^1].flow-=f;flow+=f;a-=f;if(a==0) break;//è¿™å¥åŠæ—¶é€€å‡ºå¾ˆå½±å“æ•ˆç‡ } }return flow; }ll Maxflow(){ll flow=0;while(bfs()){memset(cur,0,sizeof(cur));//å› ä¸ºæœ‰æ–°çš„åå‘è¾¹å¼•å…¥ï¼Œå³"æ­£å‘è¾¹"æ›´æ–°äº† ,æœ‰äº›å®é™…ä¸Šæ˜¯å,ä½†dfsé‡Œé¢å½“æ­£çš„ç”¨ flow+=dfs(s,INF);//å¯¹å½“å‰é˜»å¡æµdfsï¼› }return flow;} int main(){int u,v;ll cap;scanf("%d%d%d%d",&amp;n,&amp;m,&amp;s,&amp;t);for(int i=1;i&lt;=m;i++){scanf("%d%d%lld",&amp;u,&amp;v,&amp;cap);add_edge(u,v,cap);}cout&lt;&lt;Maxflow()&lt;&lt;endl;}//P3376 ã€æ¨¡æ¿ã€‘ç½‘ç»œæœ€å¤§æµ https://www.luogu.com.cn/problem/P3376<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒåˆ†åŒ¹é…åŒˆç‰™åˆ©"><a href="#äºŒåˆ†åŒ¹é…åŒˆç‰™åˆ©" class="headerlink" title="äºŒåˆ†åŒ¹é…åŒˆç‰™åˆ©"></a>äºŒåˆ†åŒ¹é…åŒˆç‰™åˆ©</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int uN,vN;//u,vçš„æ•°ç›®bool g[MAXN][MAXN];//é‚»æ¥çŸ©é˜µ,ä¸€èˆ¬æƒ…å†µä¸‹uvæœ€å¤§èŒƒå›´ç›¸åŒ int linker[MAXN];//å­˜å³èŠ‚ç‚¹çš„å¯¹è±¡ bool used[MAXN]; //å³ç‚¹æ˜¯å¦è®¿é—®è¿‡bool dfs(int u){for(int v=0;v&lt;vN;v++){if(g[u][v]&amp;&amp;!used[v]){//åˆ¤æ–­æ˜¯å¦æœ‰è¾¹ï¼Œæ˜¯å¦è¢«ç”¨è¿‡used[v]=true;//æ ‡è®°è®¿é—®if(linker[v]==-1||dfs(linker[v])){linker[v]=u;//å¾ˆç²¾å¦™ï¼Œè®°å½•æ–°é…å¯¹ï¼Œåœ¨è¿›è¡Œdfsåï¼Œè¿æ¥å·¦å³èŠ‚ç‚¹çš„è¾¹å…¶å®æ–¹å‘åäº†ä¸€å return true; } }}return false; } int hungary(){//åŒˆç‰™åˆ©ç®—æ³• int res=0;memset(linker,-1,sizeof(linker));//åˆå§‹åŒ–,å› ä¸ºèŠ‚ç‚¹uvä»0å¼€å§‹ï¼Œæ‰€ä»¥linkeråˆå§‹åŒ–ä¸º-1 for(int u=0;u&lt;uN;u++){memset(used,false,sizeof(used));if(dfs(u)) res++; } return res;}int main(){int e;cin&gt;&gt;uN&gt;&gt;vN&gt;&gt;e;int u,v;memset(g,0,sizeof(g));while(e--){scanf("%d%d",&amp;u,&amp;v);g[u][v]=1;}cout&lt;&lt;hungary()&lt;&lt;endl;} /*åŒˆç‰™åˆ©ç®—æ³•å¯ä»¥è§£å†³çš„é—®é¢˜ï¼š1.äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…æ•°(å¦‚å©šé…é—®é¢˜)2.æœ€å°é¡¶ç‚¹è¦†ç›–------ç”¨æœ€å°‘çš„ç‚¹è¦†ç›–æ‰€æœ‰çš„è¾¹(å¦‚HDOJç¦æ­¢æ—©æ‹,ä»»åŠ¡å®‰æ’)ç»“è®ºï¼šæœ€å°é¡¶ç‚¹è¦†ç›–æ•°==æœ€å¤§åŒ¹é…æ•°é‡ 3. DAG(æœ‰å‘æ— ç¯å›¾)çš„æœ€å°è·¯å¾„è¦†ç›–(å¦‚HDOJç©ºè¢­ï¼Œæ‰€æœ‰è·¯å•è¡Œï¼Œå¹¶ä¸”æ‰€æœ‰è¡—æ˜¯ä¸¤ä¸ªè·¯å£ç›¸è¿ï¼Œå·²çŸ¥ä¸ä¼šå½¢æˆå›è·¯ã€‚é—®æœ€å°‘ç©ºé™å‡ ä¸ªä¼å…µå¯ä»¥è®¿é—®æ‰€æœ‰è·¯å£)æ‹†ç‚¹æ³•ï¼š1æ‹†æˆ1å’Œ1',æ•°å­—xæ”¾å·¦èŠ‚ç‚¹ï¼Œx'æ”¾å³èŠ‚ç‚¹DAGå›¾çš„æœ€å°è·¯å¾„è¦†ç›–æ•° == èŠ‚ç‚¹æ•°(n) - æœ€å¤§åŒ¹é…æ•° */ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="kruskalæœ€å°ç”Ÿæˆæ ‘"><a href="#kruskalæœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="kruskalæœ€å°ç”Ÿæˆæ ‘"></a>kruskalæœ€å°ç”Ÿæˆæ ‘</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">struct Edge{    int u,v,k;    friend bool operator &lt; (Edge a,Edge b){        return a.k&lt;b.k;    }}edges[MAXM];int fa[MAXN];int rankk[MAXN];//æ ‘é«˜ä¼˜åŒ–å¹¶æŸ¥é›†int find(int x){    if(fa[x]==x) return x;    return fa[x] = find(fa[x]);}void merge(int a,int b){    a = find(a);b = find(b);    if(a==b) return;    if(rankk[a]&gt;rankk[b]) fa[b] = a;    else{        fa[a] = b;        if(rankk[a]==rankk[b])rankk[b]++;     }}int n,m;int main(){    cin&gt;&gt;n&gt;&gt;m;    rep(i,1,m) cin&gt;&gt;edges[i].u&gt;&gt;edges[i].v&gt;&gt;edges[i].k;    rep(i,1,n) fa[i] = i,rankk[i] = 0;    sort(edges+1,edges+1+m);    ll res=0;    rep(i,1,m){        if(find(edges[i].u)!=find(edges[i].v)){//æ£€æŸ¥ä¸¤ç‚¹æ˜¯å¦åœ¨åŒä¸€é›†åˆå†…            res+=edges[i].k;            merge(edges[i].u,edges[i].v);        }    }    bool flag = 1;    rep(i,2,n){        if(find(n)!=find(n-1)) {flag = 0;break;}    }    if(!flag) cout&lt;&lt;"orz"&lt;&lt;endl;    else cout&lt;&lt;res&lt;&lt;endl;}//P3366 ã€æ¨¡æ¿ã€‘æœ€å°ç”Ÿæˆæ ‘ https://www.luogu.com.cn/problem/P3366<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="tarjanæ±‚å¼ºè¿é€šåˆ†é‡"><a href="#tarjanæ±‚å¼ºè¿é€šåˆ†é‡" class="headerlink" title="tarjanæ±‚å¼ºè¿é€šåˆ†é‡"></a>tarjanæ±‚å¼ºè¿é€šåˆ†é‡</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n;vector&lt;int&gt; e[MAXN];//å­˜å›¾ int dfn[MAXN],low[MAXN];int dfncnt;//dfnè‡ªå¢ä¸‹æ ‡ int s[MAXN],tp;//æ•°ç»„æ¨¡æ‹Ÿæ ˆ,tpè®°å½•å¤§å° bool in[MAXN];//è®°å½•è¯¥ç‚¹æ˜¯å¦åœ¨æ ˆä¸­ int scc[MAXN],sc;//èŠ‚ç‚¹iæ‰€åœ¨sccçš„ç¼–å·,scè®°å½•æœ‰å‡ ä¸ªå¼ºè¿é€š int sz[MAXN];//å¼ºè¿é€šiçš„å¤§å° int indg[MAXN];//è®°å½•ç¼©ç‚¹åçš„å…¥åº¦ï¼ˆè¿™é¢˜æ‰æœ‰çš„ void tarjan(int u){low[u]=dfn[u]=++dfncnt;//lowåˆå§‹å€¼ä¸ºè‡ªèº«dfns[++tp]=u;//æ¨uå…¥æ ˆï¼Œä»1å¼€å§‹ in[u]=1;//è®°å½•uç‚¹åœ¨æ ˆä¸­ for(auto v:e[u]){//è®¿é—®åˆ°æ–°ç‚¹çš„æƒ…å†µ if(!dfn[v]){tarjan(v);low[u] = min(low[u],low[v]);//ç”¨low[v}æ›´æ–°low[u] }else if(in[v])//vè¢«è®¿é—®è¿‡ï¼Œä½†æ˜¯åœ¨æ ˆä¸­ low[u] = min(low[u],dfn[v]);}if(dfn[u]==low[u]){//uæ˜¯è¿é€šåˆ†é‡çš„æ ¹èŠ‚ç‚¹sc++;//å¼ºè¿é€šæ•°é‡++sz[sc] = 0; while(s[tp]!=u){//uå’Œuä¹‹åçš„ç‚¹å…¨éƒ¨å‡ºæ ˆ scc[s[tp]] = sc;//è¿™ä¸ªç‚¹åŒ…å«äºç¬¬å‡ ä¸ªå¼ºè¿é€šsz[sc]++;//uä¸ºæ ¹çš„è¿™ä¸ªå¼ºè¿é€šçš„å¤§å° in[s[tp]] = 0;//å‡ºæ ˆ tp--; }scc[u] = sc;//ç»™æ ¹èŠ‚ç‚¹æ ‡ï¼Œå±äºç¬¬scä¸ªå¼ºè¿é€š sz[sc]++;in[u] = 0;tp--;}} void reset(){tp = sc = dfncnt =0;rep(i,1,n){in[i] = dfn[i] = 0;//lowä¸ç”¨æ¸…ç©ºï¼Œszåœ¨ä¹‹åç”¨åˆ°å†æ¸…ç©º e[i].clear();}}int main(){cin&gt;&gt;n;reset();int v;rep(u,1,n){while(cin&gt;&gt;v&amp;&amp;v!=0) e[u].push_back(v);} rep(u,1,n)if(!dfn[u]) tarjan(u);rep(i,1,sc) indg[i] = 0;//è¿™ä¸ªä¸åŒ…å«åœ¨tarjané‡Œé¢ï¼Œæ˜¯è¿™é¢˜è®°å½•å…¥åº¦çš„ rep(u,1,n){for(auto v:e[u]){if(scc[u]!=scc[v]) indg[scc[v]]++;}}int res = 0;rep(i,1,sc){if(indg[i]==0) res++;}cout&lt;&lt;res&lt;&lt;endl;}//æ´›è°·P2835 åˆ»å½•å…‰ç›˜ https://www.luogu.com.cn/problem/P2835#submit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define LINF 1ll&lt;&lt;60const int MAXN = 2e5+10;typedef pair&lt;int,ll&gt; pli;vector&lt;pli&gt; e[MAXN];//firstæ˜¯ç›®æ ‡çš„ç‚¹ï¼Œsecondæ˜¯è·ç¦»dis bool vis[MAXN];ll d[MAXN];int n,m,s,t;void dijkstra(){rep(i,1,n){d[i] = LINF;vis[i] = 0;}d[s] = 0;priority_queue&lt; pli,vector&lt;pli&gt;,greater&lt;pli&gt; &gt;q;//firstå­˜d[x],secondå­˜xçš„ç¼–å· q.push(make_pair(0,s));while(!q.empty()){//è¿›è¡Œç±»ä¼¼bfsçš„æ“ä½œ int now = q.top().second;q.pop();if(vis[now])continue;//å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ“ä½œæ˜¯éƒ½å…ˆæ¨è¿›å»çš„ï¼Œæ‰€ä»¥å¯èƒ½é‡å¤é‡åˆ°nowç‚¹ vis[now] = 1;int siz = e[now].size();for(auto x:e[now]){//éå†nowçš„æ‰€æœ‰è¾¹ int v = x.second;//åˆ°è¾¾çš„ç‚¹if(d[v]&gt;d[now]+x.first){d[v] = d[now] + x.first;q.push(make_pair(d[v],v));//æ¨å…¥ä¼˜å…ˆé˜Ÿåˆ— } }}}int main(){cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;int u,v;ll dis;rep(i,1,m){cin&gt;&gt;u&gt;&gt;v&gt;&gt;dis;e[u].push_back(make_pair(dis,v));//e[v].push_back(make_pair(u,dis));//åŒå‘é€šè¡Œçš„æƒ…å†µ }dijkstra();rep(i,1,n){cout&lt;&lt;d[i];//è¾“å‡ºåˆ°å„ä¸ªç‚¹çš„æœ€çŸ­è·¯å¾„ if(i!=n) cout&lt;&lt;' ';}} //Uva10305 https://vjudge.net/problem/UVA-10305<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="HASH"><a href="#HASH" class="headerlink" title="HASH"></a>HASH</h1><h2 id="æ‹‰é“¾æ³•"><a href="#æ‹‰é“¾æ³•" class="headerlink" title="æ‹‰é“¾æ³•"></a>æ‹‰é“¾æ³•</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int med = 1000007;//æ¨¡æ•° const int MAXN = 2e6+5;//æ•°æ®æ€»é‡ struct Hash_table{struct Node{int next,value,key;}data[MAXN];//æ•°æ®çš„æ€»é‡,ä»1å¼€å§‹ int head[med],size;//headè®°å½•æ¯ä¸ªå“ˆå¸Œå€¼çš„é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹//sizeè®°å½•èŠ‚ç‚¹æ€»æ•° int f(int key){ return key%med; }//æ±‚å“ˆå¸Œå€¼int find(int key){for(int p = head[f(key)];p;p=data[p].next)//éå†è¿™ä¸ªå“ˆå¸Œå€¼ä¸Šçš„é“¾è¡¨ if(data[p].key==key) return data[p].value;return -1; }int update(int key,int value){//æ›´æ–°value for(int p = head[f(key)];p;p=data[p].next)if(data[p].key==key) return data[p].value = value;return -1;}int add(int key,int value){if(find(key)!=-1) return -1;//è¿™ä¸ªå€¼å·²ç»è¢«æ’å…¥äº†data[++size] = (Node){head[f(key)],value,key};//ä»é“¾è¡¨å¤´éƒ¨æ’å…¥ head[f(key)] = size;//æ ‡è®°è¯¥é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ return value; }};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‡ ä½•"><a href="#å‡ ä½•" class="headerlink" title="å‡ ä½•"></a>å‡ ä½•</h1><h2 id="ä¸‰ä¸ªç‚¹æ±‚åœ†å¿ƒ"><a href="#ä¸‰ä¸ªç‚¹æ±‚åœ†å¿ƒ" class="headerlink" title="ä¸‰ä¸ªç‚¹æ±‚åœ†å¿ƒ"></a>ä¸‰ä¸ªç‚¹æ±‚åœ†å¿ƒ</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">struct point{double x;double y;};point cal(point a,point b,point c){double x1 = a.x;double y1 = a.y;double x2 = b.x;double y2 = b.y;double x3 = c.x; double y3 = c.y;double a1 = 2*(x2-x1); double a2 = 2*(x3-x2);double b1 = 2*(y2-y1); double b2 = 2*(y3-y2);double c1 = x2*x2 + y2*y2 - x1*x1 - y1*y1;double c2 = x3*x3 + y3*y3 - x2*x2 - y2*y2;double rx = (c1*b2-c2*b1)/(a1*b2-a2*b1);double ry = (c2*a1-c1*a2)/(a1*b2-a2*b1);return point{rx,ry};}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ•°å­¦"><a href="#æ•°å­¦" class="headerlink" title="æ•°å­¦"></a>æ•°å­¦</h1><h2 id="ç»„åˆæ•°æ¿å­"><a href="#ç»„åˆæ•°æ¿å­" class="headerlink" title="ç»„åˆæ•°æ¿å­"></a>ç»„åˆæ•°æ¿å­</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int MAXN = 3e5+5;const int med = 998244353;ll jc[MAXN];ll qpow(ll d,ll c){//å¿«é€Ÿå¹‚    ll res = 1;    while(c){        if(c&amp;1) res=res*d%med;        d=d*d%med;c&gt;&gt;=1;    }return res;}inline ll niyuan(ll x){return qpow(x,med-2);}void initjc(){//åˆå§‹åŒ–é˜¶ä¹˜    jc[0] = 1;    rep(i,1,MAXN-1) jc[i] = jc[i-1]*i%med;}inline int C(int n,int m){//næ˜¯ä¸‹é¢çš„    if(n&lt;m) return 0;    return jc[n]*niyuan(jc[n-m])%med*niyuan(jc[m])%med;}int main(){    initjc();    int n,m;    while(cin&gt;&gt;n&gt;&gt;m) cout&lt;&lt;C(n,m)&lt;&lt;endl;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é«˜æ–¯æ¶ˆå…ƒ"><a href="#é«˜æ–¯æ¶ˆå…ƒ" class="headerlink" title="é«˜æ–¯æ¶ˆå…ƒ"></a>é«˜æ–¯æ¶ˆå…ƒ</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">double a[MAXN][MAXN];int n,pl;int main(){scanf("%d",&amp;n);rep(i,1,n)rep(j,1,n+1) scanf("%lf",&amp;a[i][j]); rep(i,1,n){pl = i;while(a[pl][i]==0&amp;&amp;pl&lt;=n) pl++;//æ‰¾åˆ°æ¯åˆ—çš„ç¬¬ä¸€ä¸ªé0å…ƒç´ if(pl==n+1){//æ— è§£çš„æƒ…å†µ(å­˜åœ¨ç©ºåˆ— cout&lt;&lt;"No Solution"&lt;&lt;endl;return 0;} rep(j,1,n+1) swap(a[i][j],a[pl][j]);//ä¿è¯iè¡Œiåˆ—å¿…ä¸æ˜¯0double k = a[i][i];//ç¬¬äºŒæ­¥ï¼Œä½¿a[i][i]å˜æˆ1 rep(j,1,n+1) a[i][j]/=k;//iè¡Œæ‰€æœ‰å…ƒç´ é™¤a[i][i]rep(ii,1,n){if(ii==i) continue;//æšä¸¾ä¸åŒçš„ä¸¤è¡Œdouble ki = a[ii][i];rep(m,1,n+1) a[ii][m]-=ki*a[i][m]; }  }rep(i,1,n) printf("%.2lf\n",a[i][n+1]);}//æ´›è°·P3389 ã€æ¨¡æ¿ã€‘é«˜æ–¯æ¶ˆå…ƒæ³• https://www.luogu.com.cn/problem/P3389<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="çŸ©é˜µå¿«é€Ÿå¹‚"><a href="#çŸ©é˜µå¿«é€Ÿå¹‚" class="headerlink" title="çŸ©é˜µå¿«é€Ÿå¹‚"></a>çŸ©é˜µå¿«é€Ÿå¹‚</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int n;const ll mod = 998;struct Matrix{ll a[MAXN][MAXN];Matrix(ll x=0){//æ„Ÿè§‰æ˜¯ç‰¹åˆ«å¥½çš„åˆå§‹åŒ–,ä»hjté‚£é‡Œå­¦(æŠ„)æ¥çš„ for(int i=0;i&lt;n;i++){for(int j=0;j&lt;n;j++){a[i][j]=x*(i==j);//è¿™å¥ç‰¹ç®€æ´}}}Matrix operator *(const Matrix &amp;b)const{//é€šè¿‡é‡è½½è¿ç®—ç¬¦å®ç°çŸ©é˜µä¹˜æ³• Matrix res(0);for(int i=0;i&lt;n;i++){for(int j=0;j&lt;n;j++){for(int k=0;k&lt;n;k++){ll &amp;ma = res.a[i][j];ma = (ma+a[i][k]*b.a[k][j])%mod;}}}return res;}};Matrix qpow(Matrix d,ll m){//åº•æ•°å’Œå¹‚æ¬¡æ•° Matrix res(1);//æ„é€ Eå•ä½çŸ©é˜µ while(m){if(m&amp;1){m--;//å…¶å®è¿™å¥æ˜¯å¯ä»¥ä¸è¦çš„ res=res*d;}d=d*d;m&gt;&gt;=1;}return res; }int main(){int p;Matrix inp;cin&gt;&gt;n&gt;&gt;p;for(int i=-0;i&lt;n;i++){for(int j=0;j&lt;n;j++){scanf("%lld",&amp;inp.a[i][j]);}}Matrix res = qpow(inp,p);for(int i=0;i&lt;n;i++){for(int j=0;j&lt;n;j++){cout&lt;&lt;res.a[i][j];if(j!=n-1) cout&lt;&lt;' ';}cout&lt;&lt;endl;}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ•°è®º"><a href="#æ•°è®º" class="headerlink" title="æ•°è®º"></a>æ•°è®º</h1><h2 id="çº¿æ€§æ±‚é€†å…ƒ"><a href="#çº¿æ€§æ±‚é€†å…ƒ" class="headerlink" title="çº¿æ€§æ±‚é€†å…ƒ"></a>çº¿æ€§æ±‚é€†å…ƒ</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">void init(int p){inv[1] = 1;for(int i=2;i&lt;=n;i++){inv[i] = (ll)(p-p/i)*inv[p%i]%p;}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å•ä¸ªæ¬§æ‹‰å‡½æ•°"><a href="#å•ä¸ªæ¬§æ‹‰å‡½æ•°" class="headerlink" title="å•ä¸ªæ¬§æ‹‰å‡½æ•°"></a>å•ä¸ªæ¬§æ‹‰å‡½æ•°</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">void init(int p){inv[1] = 1;for(int i=2;i&lt;=n;i++){inv[i] = (ll)(p-p/i)*inv[p%i]%p;}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="EXCRTæ‰©å±•ä¸­å›½å‰©ä½™"><a href="#EXCRTæ‰©å±•ä¸­å›½å‰©ä½™" class="headerlink" title="EXCRTæ‰©å±•ä¸­å›½å‰©ä½™"></a>EXCRTæ‰©å±•ä¸­å›½å‰©ä½™</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">template&lt;class T&gt;void wt(T x){//å¿«å†™   if(x &lt; 0) putchar('-'), x = -x;   if(x &gt;= 10) wt(x / 10);   putchar('0' + x % 10);}void Exgcd(ll a,ll b,ll &amp;d,ll &amp;x,ll &amp;y){//æ‰©å±•æ¬§å‡ é‡Œå¾—if(!b){d=a;x=1;y=0;}else{Exgcd(b,a%b,d,y,x);y-=x*(a/b);}//å…ˆäº¤æ¢äº†xyçš„ä½ç½®ï¼Œå®ç°y1=x2-(a/b)*x2 }inline ll mul(ll a,ll b,ll mo){//å–æ¨¡ä¹˜æ³•    return ((a%mo)*(b%mo)%mo+mo)%mo; }const int MAXN = 1e5+5;ll c[MAXN],m[MAXN];//æ¯ç»„åŒä½™å¼çš„ä½™æ•°å’Œæ¨¡æ•°int n;ll Excrt(ll m[],ll c[],int n){    ll mnow = m[1],cnow = c[1];//è®°å½•æ¯æ¬¡åˆæˆåçš„æ¨¡æ•°ä½™æ•°    rep(i,2,n){        ll p1,p2,gcdd;        ll m1 = mnow,m2 = m[i];//m1p1+c1 = m2p2+c2        ll dc = (c[i]-cnow%m2+m2)%m2;//dcåœ¨ä¿è¯åŒä½™çš„æƒ…å†µä¸‹å˜æˆæœ€å°çš„æ­£æ•°        Exgcd(m1,m2,gcdd,p1,p2);        if(dc%gcdd) {cout&lt;&lt;i&lt;&lt;endl;return -1;}        p1 = mul(p1,dc/gcdd,m2/gcdd);//p1å­˜çš„å®é™…æ˜¯p1*m1,è¿™é‡Œçš„æ¨¡æ•°æ¯”è¾ƒè®²ç©¶        //ä¸€ä¼šå„¿è¦å¯¹lcm(m1,m2)å–æ¨¡,æœ€ç»ˆç»“æœæ˜¯[p1*m1*(dc/gcdd)] % [m2/gcdd*m1]        //m1è¿˜æ²¡ä¹˜ä¸Šå»,è¿™æ—¶å€™å…ˆå¯¹m2/gcddå–æ¨¡        cnow += p1*m1;//æ›´æ–°cnowå’Œmnow        mnow = m1/gcdd*m2;        cnow = (cnow%mnow+mnow)%mnow;    }    return cnow;  } int main(){    cin&gt;&gt;n;    rep(i,1,n) read(m[i]),read(c[i]);    wt(Excrt(m,c,n));}//æ´›è°·P4777 ã€æ¨¡æ¿ã€‘æ‰©å±•ä¸­å›½å‰©ä½™å®šç†ï¼ˆEXCRTï¼‰//https://www.luogu.com.cn/problem/P4777<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="EXGCDæ‰©å±•æ¬§å‡ é‡Œå¾—"><a href="#EXGCDæ‰©å±•æ¬§å‡ é‡Œå¾—" class="headerlink" title="EXGCDæ‰©å±•æ¬§å‡ é‡Œå¾—"></a>EXGCDæ‰©å±•æ¬§å‡ é‡Œå¾—</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">ll Exgcd(ll a,ll b,ll &amp;x,ll &amp;y){if(!b){x=1;y=0;return a;}//è¾¹ç•Œæ¡ä»¶ç»“æŸé€’å½’ ll d = Exgcd(b,a%b,x,y);//gcd ll t = x;x=y;y=t-(a/b)*y;//é€šè¿‡x2y2æ±‚å¾—x1y1,å±‚å±‚è¿”å› return d;}//ç´«ä¹¦é‡Œé¢åˆ˜æ±ä½³çš„ç®€çŸ­çš„ç‰ˆæœ¬void Exgcd(ll a,ll b,ll &amp;d,ll &amp;x,ll &amp;y){//ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„dä½¿ç”¨å¼•ç”¨æ¥å®ç° if(!b){d=a;x=1;y=0;}else{Exgcd(b,a%b,d,y,x);y-=x*(a/b);}//å…ˆäº¤æ¢äº†xyçš„ä½ç½®ï¼Œå®ç°y1=x2-(a/b)*x2 } <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="ACè‡ªåŠ¨æœº"><a href="#ACè‡ªåŠ¨æœº" class="headerlink" title="ACè‡ªåŠ¨æœº"></a>ACè‡ªåŠ¨æœº</h2><h3 id="ç»Ÿè®¡æ˜¯å¦å‡ºç°"><a href="#ç»Ÿè®¡æ˜¯å¦å‡ºç°" class="headerlink" title="ç»Ÿè®¡æ˜¯å¦å‡ºç°"></a>ç»Ÿè®¡æ˜¯å¦å‡ºç°</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int MAXN = 1e6+5;inline int idx(char c){return c-'a';}struct Node{    int son[26],flag,fail;}trie[MAXN*10];int n,cntt;string s;queue&lt;int&gt; q;void insert(string &amp;s){//å­—å…¸æ ‘æ’å…¥æ¨¡å¼ä¸²    int siz = s.size(),v,u = 1;//æ ¹èŠ‚ç‚¹å¼€å§‹    rep(i,0,siz-1){        v = idx(s[i]);        if(!trie[u].son[v]) trie[u].son[v] = ++cntt;        u = trie[u].son[v];    }    trie[u].flag++;//è®°æ•°}void getfail(){//å¤„ç†å¤±é…æŒ‡é’ˆ    rep(i,0,25) trie[0].son[i] = 1;//è™šèŠ‚ç‚¹0    q.push(1);trie[1].fail = 0;    //å»ºä¸€ä¸ªè™šèŠ‚ç‚¹0å·èŠ‚ç‚¹,å°†1çš„æ‰€æœ‰å„¿å­æŒ‡å‘1ï¼Œç„¶å1çš„failæŒ‡å‘0å°±OKäº†    int u,v,ufail;    while(!q.empty()){        u = q.front();q.pop();        rep(i,0,25){            v = trie[u].son[i];            ufail = trie[u].fail;            if(!v){trie[u].son[i]=trie[ufail].son[i];continue;}            //å¦‚æœè¿™ä¸ªåˆ†æ”¯ä¸æ»¡è¶³ï¼Œåˆ™ä¼šå’Œå¤±é…çš„æƒ…å†µç±»ä¼¼å»è·³è½¬            trie[v].fail = trie[ufail].son[i];            //((ä»–çˆ¶äº²èŠ‚ç‚¹)çš„å¤±é…æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹)çš„(å’Œè¿™ä¸ªèŠ‚ç‚¹å­—æ¯ç›¸åŒçš„å„¿å­)            q.push(v);        }    }}int query(string &amp;s){//åŒ¹é…    int siz = s.size(),u = 1,v,k,ans = 0;    rep(i,0,siz-1){        v = idx(s[i]);        k = trie[u].son[v];//kç”¨æ¥è·³fail        while(k&amp;&amp;trie[k].flag!=-1){//æ‰¾åˆ°äº†æ²¡æ ‡è®°çš„å•è¯            ans += trie[k].flag;trie[k].flag = -1;//è®¡æ•°,å¹¶æ ‡è®°èµ°è¿‡            k = trie[k].fail;//è·³fail,å¦‚æœä¸€ä¸ªä¸²åŒ¹é…æˆåŠŸ,é‚£å®ƒçš„failä¸€å®šä¹Ÿèƒ½åŒ¹é…        }        u = trie[u].son[v];    }    return ans;}int main(){    cntt = 1;//åˆå§‹åŒ–cnt    cin&gt;&gt;n;    string hc;    rep(i,1,n){        cin&gt;&gt;s;insert(s);    }    getfail();    cin&gt;&gt;s;    cout&lt;&lt;query(s)&lt;&lt;endl;}//P3808 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆç®€å•ç‰ˆï¼‰https://www.luogu.com.cn/problem/P3808//https://www.luogu.com.cn/blog/juruohyfhaha/solution-p3808<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»Ÿè®¡å‡ºç°æ¬¡æ•°-æ¯”è¾ƒæ…¢ä¸€ç‚¹"><a href="#ç»Ÿè®¡å‡ºç°æ¬¡æ•°-æ¯”è¾ƒæ…¢ä¸€ç‚¹" class="headerlink" title="ç»Ÿè®¡å‡ºç°æ¬¡æ•°(æ¯”è¾ƒæ…¢ä¸€ç‚¹)"></a>ç»Ÿè®¡å‡ºç°æ¬¡æ•°(æ¯”è¾ƒæ…¢ä¸€ç‚¹)</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int MAXN = 1e5+5;int jdbh[MAXN];//è®°å½•ç¬¬iä¸ªæ¨¡å¼ä¸²å¯¹åº”çš„èŠ‚ç‚¹ç¼–å·int cntcx[MAXN];//è®°å½•ç¬¬iä¸ªæ¨¡å¼ä¸²å‡ºç°çš„æ¬¡æ•°inline int idx(char c){return c-'a';}struct Node{    int son[26],flag,fail;//cntè®°å½•æ¬¡æ•°,flagè®°å½•ç¼–å·    void clr(){        memset(son,0,sizeof(son));        flag=0;    }}trie[MAXN*10];int n,cntt;//cnttè®°å½•æ€»ç‚¹æ•°string s,ms[166];int maxx;queue&lt;int&gt;q;inline void insert(string &amp;s,int num){    int siz = s.size(),v,u=1;    rep(i,0,siz-1){        v = idx(s[i]);        if(!trie[u].son[v]){trie[u].son[v] = ++cntt;trie[cntt].clr();}        u = trie[u].son[v];    }    trie[u].flag = num;//æ ‡è®°ä¸ºå•è¯,flagè®°å½•ç¼–å·    //ä¿è¯æ¯ä¸ªæ¨¡å¼ä¸²åªå‡ºç°ä¸€æ¬¡    cntcx[num] = 0;    jdbh[num] = u;//è®°å½•å½“å‰å•è¯å¯¹åº”çš„èŠ‚ç‚¹ç¼–å·}inline void getfail(){    rep(i,0,25) trie[0].son[i] = 1;    trie[0].flag = 0;    q.push(1);    trie[1].fail = 0;    int u,v,ufail;    while(!q.empty()){        u = q.front();q.pop();        rep(i,0,25){            v = trie[u].son[i];            ufail = trie[u].fail;            if(!v){trie[u].son[i]=trie[ufail].son[i];continue;}//ç”»å¥½ä¸€æ¡è·³failçš„è·¯            trie[v].fail = trie[ufail].son[i];            q.push(v);        }    }}inline void query(string &amp;s){    int siz = s.size(),u = 1,v,k;    rep(i,0,siz-1){        v = idx(s[i]);        k = trie[u].son[v];        while(k){            if(trie[k].flag){                cntcx[trie[k].flag]++;//è®¡æ•°                maxx = max(maxx,cntcx[trie[k].flag]);            }            k = trie[k].fail;//è·³fail        }        u = trie[u].son[v];//è¿™ä¸€å¥å…¶å®ä¹Ÿæœ‰è·³failçš„åŠŸèƒ½ï¼Œå¾ˆç²¾å¦™    }}inline void solve(){    cntt = 1;    trie[0].clr();    trie[1].clr();    rep(i,1,n){        cin&gt;&gt;ms[i];        insert(ms[i],i);    }    getfail();    cin&gt;&gt;s;    maxx = 0;    query(s);    cout&lt;&lt;maxx&lt;&lt;endl;    rep(i,1,n){        if(cntcx[i]==maxx) cout&lt;&lt;ms[i]&lt;&lt;endl;    }}int main(){    while(cin&gt;&gt;n&amp;&amp;n!=0) solve();}//æ´›è°· P3796 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆåŠ å¼ºç‰ˆï¼‰//https://www.luogu.com.cn/problem/P3796<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="KMPå­—ç¬¦ä¸²åŒ¹é…"><a href="#KMPå­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="KMPå­—ç¬¦ä¸²åŒ¹é…"></a>KMPå­—ç¬¦ä¸²åŒ¹é…</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int MAXN = 2e6+5;int pi[MAXN];//MAXNè®°å¾—å¼€å¤§ä¸€ç‚¹,å› ä¸ºè¿™é‡Œè¦å­˜åˆ°m+n+1é•¿åº¦çš„ vector&lt;int&gt; res;//å‚¨å­˜ç­”æ¡ˆ void getpi(const string &amp;s){ //æ±‚sçš„å‰ç¼€å‡½æ•°pi[0]=0;int j=0;rep(i,1,s.length()-1){while(j&gt;0&amp;&amp;s[i]!=s[j]) j=pi[j-1];//æ‰¾åˆ°åˆé€‚ä¸”æœ€é•¿çš„j if(s[i]==s[j])j++;//èƒ½æˆåŠŸåŒ¹é…çš„æƒ…å†µ pi[i]=j;}}void kmp(string s,string t){ //åœ¨ä¸»ä¸²tä¸­æ‰¾æ¨¡å¼ä¸²s getpi(s+'#'+t);int n=(int)s.length(),m=(int)t.length();rep(i,n+1,m+n+1-1)if(pi[i]==n) res.push_back(i-2*s.size()); //i-2nè®¡ç®—å¾—å·¦ç«¯ç‚¹ }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—ç¬¦ä¸²å“ˆå¸Œ"><a href="#å­—ç¬¦ä¸²å“ˆå¸Œ" class="headerlink" title="å­—ç¬¦ä¸²å“ˆå¸Œ"></a>å­—ç¬¦ä¸²å“ˆå¸Œ</h2><h3 id="åŒå“ˆå¸Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰"><a href="#åŒå“ˆå¸Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰" class="headerlink" title="åŒå“ˆå¸Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰"></a>åŒå“ˆå¸Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef pair&lt;ull,ull&gt; pll;const int MAXN = 1e4+5;const int M1 = 1e9+7;//ç¬¬ä¸€ä¸ªæ¨¡æ•° const int M2 = 1e9+9;//ç¬¬äºŒä¸ªæ¨¡æ•° const int b = 131;int n;pll a[MAXN];pll gethash(string s){ull res1=0,res2=0;int siz = s.length();rep(i,0,siz-1){res1=(res1*b%M1+s[i])%M1;//iä½ä¹˜ä»¥b^ires2=(res2*b%M2+s[i])%M2;//f(s)=Î£ s[i] * b^i;}return make_pair(res1,res2);}int main(){cin&gt;&gt;n;string s;rep(i,1,n){cin&gt;&gt;s;a[i]=gethash(s);}sort(a+1,a+n+1);int res = 1;rep(i,2,n){if(a[i]!=a[i-1]) res++;}cout&lt;&lt;res&lt;&lt;endl;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é…åˆå¿«é€Ÿå¹‚å–å­ä¸²çš„å“ˆå¸Œå€¼"><a href="#é…åˆå¿«é€Ÿå¹‚å–å­ä¸²çš„å“ˆå¸Œå€¼" class="headerlink" title="é…åˆå¿«é€Ÿå¹‚å–å­ä¸²çš„å“ˆå¸Œå€¼"></a>é…åˆå¿«é€Ÿå¹‚å–å­ä¸²çš„å“ˆå¸Œå€¼</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int b = 131;const int MAXN = 1e5 + 5;typedef unsigned long long ull;ull h[MAXN], pw[MAXN]; // h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, pw[k]å­˜å‚¨ b^k mod 2^64//è¿™é‡Œçš„æ¨¡æ•°Må–çš„å°±æ˜¯ullçš„ä¸Šé™2^64char str[MAXN];void init(int n){//åˆå§‹åŒ–     pw[0] = 1;    for (int i = 1; i &lt;= n; i ++ ) {        h[i] = h[i-1]*b + str[i];//åšæ¯ä¸ªå‰ç¼€çš„å“ˆå¸Œå€¼         pw[i] = pw[i-1]*b;//é¢„å¤„ç†b^kçš„å€¼     }}// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼ull get(int l, int r) {    return h[r] - h[l-1]*pw[r-l+1];}int main() {    int n, m;    scanf("%d%d%s",&amp;n,&amp;m,str+1);//è¿™æ ·è¯»å…¥å­—ç¬¦ä¸²ç¬¬ä¸€ä½ä»1å¼€å§‹     init(n);    while (m--) {        int l1,r1,l2,r2;        scanf("%d%d%d%d",&amp;l1,&amp;r1,&amp;l2,&amp;r2);        if(get(l1,r1)!=get(l2,r2))        printf("No\n");        else printf("Yes\n");    }    return 0;}//ACWing 841 ç»™ä¸¤ä¸ªåŒºé—´æŸ¥è¯¢è¿™ä¸¤ä¸ªå­ä¸²æ˜¯å¦ç›¸åŒ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Trieå­—å…¸æ ‘"><a href="#Trieå­—å…¸æ ‘" class="headerlink" title="Trieå­—å…¸æ ‘"></a>Trieå­—å…¸æ ‘</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define MAXN 10000const int maxnode=2e6+5;const int sigma_size=26;//å­—æ¯å¼€26ï¼Œå¦‚æœæ˜¯æ•°å­—ä¹‹ç±»çš„åˆ™å¼€10 char s[MAXN];struct Trie{int ch[maxnode][sigma_size];int val[maxnode];int sz;Trie(){sz=1;memset(ch[0],0,sizeof(ch[0]));}//åˆå§‹åŒ–ï¼Œæ­¤æ—¶åªæœ‰æ ¹èŠ‚ç‚¹int idx(char c){return c-'a';//åŒç†å¦‚æœæ˜¯æ•°å­—åˆ™æ¢æˆc-'0' }void insert(char *s,int v){int u=0,n=strlen(s);for(int i=0;i&lt;n;i++){int c=idx(s[i]);if(!ch[u][c]){//èŠ‚ç‚¹ä¸å­˜åœ¨(uæ²¡æœ‰å­èŠ‚ç‚¹å­—æ¯ä¸ºc)è¿™ä¸ªuå’Œcçš„æ„ä¹‰å…¨ç„¶ä¸åŒ,uæ˜¯èŠ‚ç‚¹ç¼–å·,cæ˜¯å­—ç¬¦ç¼–å· memset(ch[sz],0,sizeof(ch[sz]));val[sz]=0;//ä¸­é—´èŠ‚ç‚¹ï¼Œé™„åŠ ä¿¡æ¯ä¸º0ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„æ¥æ ‡è®°æ¯”å¦‚-1 ch[u][c]=sz++;//ç”»å¥½è¾¹ï¼Œå¹¶ä¸”æ€»ç»“ç‚¹æ•°++ }u=ch[u][c];//å…‰æ ‡å¾€ä¸‹èµ° }//è¿™é‡Œå‡ºæ¥å°±æ˜¯uå·²ç»åˆ°å•è¯èŠ‚ç‚¹(å³ä¸€ä¸ªå•è¯çš„æœ«å°¾å­—ç¬¦)ä¸Šäº† val[u] = v;//insertæ—¶çš„ç¬¬äºŒä¸ªå‚æ•°v,å¯ä»¥é™„åŠ ä¿¡æ¯ } bool find(char *s,int len){//æŸ¥æ‰¾ä¸²sé•¿åº¦ä¸è¶…è¿‡lençš„å‰ç¼€,æ”¹ä¸€æ”¹æˆintä¹Ÿå¯ä»¥è¿”å›é™„åŠ å€¼ int u=0;for(int i=0;i&lt;len;i++){if(s[i]=='\0') break;int c=idx(s[i]);if(!ch[u][c]) break;u=ch[u][c];if(val[u]!=0) return true;} return false; } }T;//ä¹‹å‰å› ä¸ºTå®šä¹‰åœ¨mainé‡Œé¢æ‰€ä»¥ä¸€ç›´è¿è¡Œä¸äº†ï¼Œå‘ç°è¿™ä¸ªç»“æ„ä½“å’Œæ•°ç»„æœ‰ç‚¹ç±»ä¼¼//å®šä¹‰ä¸ºå…¨å±€å‡½æ•°å¯ä»¥å¼€å¾—æ›´å¤§ï¼ int main(){int n;scanf("%d",&amp;n);getchar();Trie T;while(n--){scanf("%s",s);getchar();T.insert(s,1);}scanf("%d",&amp;n);getchar();while(n--){scanf("%s",s);getchar();if(T.find(s,strlen(s))) cout&lt;&lt;"yes!"&lt;&lt;endl;else cout&lt;&lt;"no!"&lt;&lt;endl;}}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åŠ¨æ€è§„åˆ’DP"><a href="#åŠ¨æ€è§„åˆ’DP" class="headerlink" title="åŠ¨æ€è§„åˆ’DP"></a>åŠ¨æ€è§„åˆ’DP</h1><h2 id="æ•°ä½DP"><a href="#æ•°ä½DP" class="headerlink" title="æ•°ä½DP"></a>æ•°ä½DP</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int l,r;const int MAXN = 25;int dp[MAXN][2];//ç¬¬äºŒç»´è®°å½•å‰é¢ä¸€ä¸ªæ˜¯å¦ä¸º2int a[MAXN];int n,m;int dfs(int pos,bool stat,int pre,bool limit){    //limitè®°å½•ä¹‹å‰æ˜¯å¦éƒ½åœ¨ä¸Šç•Œï¼Œstateè®°å½•ä¹‹å‰çš„æ˜¯ä¸æ˜¯6(è®°å¿†åŒ–ä½œç¬¬äºŒç»´)ï¼Œpreè®°å½•ä¸Šä¸€ä¸ªæ•°å­—if(pos==-1) return 1;if(!limit&amp;&amp;dp[pos][stat]!=-1) return dp[pos][stat];    int up = limit?a[pos]:9;//å¦‚æœå‰é¢çš„éƒ½åœ¨ä¸Šç•Œåˆ™åªèƒ½åˆ°a[pos]    int ans = 0;    for(int i=0;i&lt;=up;i++){        if(pre==6&amp;&amp;i==2) continue;//62çš„æƒ…å†µ        if(i==4) continue;ans += dfs(pos-1,i==6,i,limit&amp;&amp;i==a[pos]);    }if(!limit) dp[pos][stat] = ans;    return ans;}int solve(int x){//å…ˆæŒ‰ä½è½¬åŒ–åˆ°æ•°ç»„    int px = 0;    while(x){a[px++] = x%10;        x/=10;    }    memset(dp,-1,sizeof(dp));//æ¸…ç©ºè®°å¿†åŒ–æ•°ç»„    return dfs(px-1,0,-1,1);}int main(){while(cin&gt;&gt;l&gt;&gt;r){        if(l==0&amp;&amp;r==0) break;    //cout&lt;&lt;solve(r)&lt;&lt;' '&lt;&lt;solve(l-1)&lt;&lt;endl;        cout&lt;&lt;solve(r)-solve(l-1)&lt;&lt;endl;    }}//HDOJ2089 ä¸è¦62<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="æ¯å‡½æ•°"><a href="#æ¯å‡½æ•°" class="headerlink" title="æ¯å‡½æ•°"></a>æ¯å‡½æ•°</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;using namespace std;#define rep(i,a,b) for(int (i)=a;i&lt;=b;i++)const int MAXN = 1e4;int c1[MAXN+1];int c2[MAXN+1];int main(){int n;while(cin&gt;&gt;n){ for(int i=0;i&lt;=n;i++){//åˆå§‹åŒ– c1[i]=0;c2[i]=0;}for(int i=0;i&lt;=n;i++){c1[i]=1;//é¢å€¼ä¸ºä¸€å…ƒçš„}for(int i=2;i&lt;=n;i++){//æšä¸¾é‚®ç¥¨çš„é¢å€¼(ä¸€å…±æœ‰å‡ ç»„æ‹¬å· for(int j=0;j&lt;=n;j++){//æšä¸¾å·¦è¾¹æ¬¡æ•°ä¸º0åˆ°æ¬¡æ•°ä¸ºnçš„é¡¹ for(int k=0;j+k&lt;=n;k+=i){//å³è¾¹çš„ä¹˜è¿‡æ¥ï¼Œæšä¸¾æ”¾å‡ æš//æ¬¡æ•°å¤§äºnçš„å°±ä¸ç”¨ç®¡äº† c2[j+k]+=c1[j];}}for(int i=0;i&lt;=n;i++){//æœ€å·¦è¾¹ä¸¤ä¸ªæ‹¬å·å®Œæˆå¤„ç† c1[i]=c2[i];//æŠŠc2ç®—å‡ºæ¥çš„å€¼æŒªåˆ°å·¦è¾¹ä½œä¸ºä¸‹ä¸€æ¬¡çš„å·¦è¾¹ c2[i]=0;//æ¸…ç©ºc2è®°å½•ä¸‹ä¸€æ¬¡æ‹¬å·ç›¸ä¹˜çš„ç»“æœ }}cout&lt;&lt;c1[n]&lt;&lt;endl; } } <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int par[MAXN];//è®°å½•çˆ¶äº²èŠ‚ç‚¹ int rank[MAXN];//è®°å½•æ ‘é«˜,æ ¹èŠ‚ç‚¹(ç¥–å…ˆèŠ‚ç‚¹)é‚£å±‚æ˜¯ä¸ç®—è¿›å»çš„  void init(int n){for(int i=0;i&lt;n;i++){par[i]=i;rank[i]=0;}} int find(int x){//æŸ¥è¯¢æ ¹æ“ä½œï¼ŒåŒæ—¶è¿›è¡Œè·¯å¾„å‹ç¼© if(par[x]==x) return x;else return par[x]=find(par[x]);//è¿™å¥å¾ˆç²¾ç®€,åœ¨é€’å½’æŸ¥è¯¢æ ¹èŠ‚ç‚¹çš„åŒæ—¶è·¯iå‹ç¼© } //è™½ç„¶è·¯å¾„å‹ç¼©çš„æ“ä½œä¼šå¯¹æ ‘é«˜äº§ç”Ÿå½±å“ï¼Œå¯¼è‡´rankçš„æ•°å€¼ä¸å‡†ç¡®ï¼Œä½†è¿™æ ·è¿˜æ˜¯èƒ½æœ‰æ•ˆåœ°æé«˜è¿è¡Œæ•ˆç‡çš„ void merge(int x,int y){x=find(x);y=find(y);if(x==y) return;///å¦‚æœå·²ç»å…·æœ‰ç›¸åŒçš„ç¥–å…ˆï¼Œåˆ™ä¸è¿›è¡Œåˆå¹¶æ“ä½œif(rank[x]&lt;rank[y]) par[x]=y;//yæ ‘æ¯”xæ ‘é«˜çš„æƒ…å†µï¼ŒæŠŠxå¹¶ä¸ºyçš„å„¿å­èŠ‚ç‚¹ else{//yæ¯”xé«˜ï¼Œæˆ–åŒé«˜çš„æƒ…å†µä¸‹ï¼ŒæŠŠyå¹¶ä¸ºxçš„å„¿å­èŠ‚ç‚¹ par[y]=x;if(rank[x]==rank[y]) rank[x]++;//å¦‚æœåˆå¹¶çš„ä¸¤æ ‘åŒé«˜ï¼Œåˆ™åˆå¹¶åæ ‘é«˜+1; } } int main(){int n,m;cin&gt;&gt;n&gt;&gt;m;init(n);int a,b;while(m--){cin&gt;&gt;a&gt;&gt;b;merge(a,b);}cin&gt;&gt;m;while(m--){cin&gt;&gt;a&gt;&gt;b;if(find(a)==find(b)) cout&lt;&lt;"YES"&lt;&lt;endl;else cout&lt;&lt;"NO"&lt;&lt;endl;}} //è·¯å¾„å‹ç¼©+æ ‘é«˜ä¼˜åŒ–<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è«é˜Ÿ"><a href="#è«é˜Ÿ" class="headerlink" title="è«é˜Ÿ"></a>è«é˜Ÿ</h2><h3 id="æ™®é€šè«é˜Ÿ"><a href="#æ™®é€šè«é˜Ÿ" class="headerlink" title="æ™®é€šè«é˜Ÿ"></a>æ™®é€šè«é˜Ÿ</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">const int MAXN = 5e4+5;int cnt[MAXN];//è®°å½•æ•°å­—åœ¨åŒºé—´[l,r]å†…å‡ºç°çš„æ¬¡æ•°int pos[MAXN],a[MAXN];ll ans[MAXN];int n,m,k,res;struct Q{    int l,r,k;//kè®°å½•åŸæ¥çš„ç¼–å·    friend bool operator &lt; (Q x,Q y){//åŒä¸€ä¸ªåˆ†å—å†…rå°çš„æ’å‰é¢;ä¸åŒåˆ†å—åˆ™æŒ‰åˆ†å—é å‰çš„        return pos[x.l]==pos[y.l]?x.r&lt;y.r:pos[x.l]&lt;pos[y.l];        //return (pos[a.l]^pos[b.l])?pos[a.l]&lt;pos[b.l]:((pos[a.l]&amp;1)?a.r&lt;b.r:a.r&gt;b.r);        //è¿™æ¡ç¬¬ä¸€ä¸ªå’Œ==æ˜¯ä¸€æ ·çš„,åé¢çš„æ˜¯å¯¹äºå·¦ç«¯ç‚¹åœ¨åŒä¸€å¥‡æ•°å—çš„åŒºé—´ï¼Œå³ç«¯ç‚¹æŒ‰å‡åºæ’åˆ—ï¼Œåä¹‹é™åº    }}q[MAXN];void Add(int pos){    res -= cnt[a[pos]]*cnt[a[pos]];    cnt[a[pos]]++;    res += cnt[a[pos]]*cnt[a[pos]];}void Sub(int pos){    res -= cnt[a[pos]]*cnt[a[pos]];    cnt[a[pos]]--;    res += cnt[a[pos]]*cnt[a[pos]];}int main(){    cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;//kä¸ºæ•°å­—èŒƒå›´    memset(cnt,0,sizeof(cnt));    int siz = sqrt(n);//æ¯ä¸ªåˆ†å—çš„å¤§å°    rep(i,1,n){        cin&gt;&gt;a[i];        pos[i] = i/siz;//åˆ†å—    }    rep(i,1,m){        cin&gt;&gt;q[i].l&gt;&gt;q[i].r;        q[i].k = i;//è®°å½•åŸæ¥çš„ç¼–å·,ç”¨äºæ‰“ä¹±é¡ºåºåçš„è¿˜åŸ    }    sort(q+1,q+1+m);    res = 0;//åˆå§‹åŒ–res    int l = 1,r = 0;//å½“å‰çŸ¥é“çš„åŒºé—´    //å› ä¸ºæ˜¯é—­åŒºé—´,å¦‚æœæ˜¯[1,1]çš„è¯åˆ™ä¸€å¼€å§‹å°±åŒ…å«ä¸€ä¸ªå…ƒç´ äº†    rep(i,1,m){//è«é˜Ÿçš„æ ¸å¿ƒ,æ³¨æ„åŠ å‡çš„é¡ºåº        while(q[i].l&lt;l) Add(--l);        while(q[i].l&gt;l) Sub(l++);        while(q[i].r&lt;r) Sub(r--);        while(q[i].r&gt;r) Add(++r);        ans[q[i].k] = res;    }    rep(i,1,m) cout&lt;&lt;ans[i]&lt;&lt;endl;}//æ´›è°·P2709 å°Bçš„è¯¢é—®//https://www.luogu.com.cn/problem/P2709<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¸¦ä¿®è«é˜Ÿ"><a href="#å¸¦ä¿®è«é˜Ÿ" class="headerlink" title="å¸¦ä¿®è«é˜Ÿ"></a>å¸¦ä¿®è«é˜Ÿ</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int cnt[1000010] = {0};const int MAXN = 2e5+5;int a[MAXN],b[MAXN];//aè¯»å…¥ä¸€å¼€å§‹çš„åºåˆ—,bè®°å½•ä¿®æ”¹åçš„int pos[MAXN];//åˆ†å—int cq,cr;//ç»Ÿè®¡æŸ¥è¯¢ä¿®æ”¹æ¬¡æ•°int R[MAXN][3];//0è®°ä½ç½®,1è®°åŸæœ¬çš„å€¼,2è®°ä¿®æ”¹åçš„å€¼ll res;int ans[MAXN];//è®°å½•ç»“æœint n,m;void Add(int x){if(cnt[x]==0)res++;cnt[x]++;}//å¸¦ä¿®è«é˜Ÿçš„addå’Œsubæœ‰åŒºåˆ«void Sub(int x){if(cnt[x]==1)res--;cnt[x]--;}struct Q{    int l,r,k,t;    friend bool operator &lt; (Q a,Q b){        return (pos[a.l]^pos[b.l])?pos[a.l]&lt;pos[b.l]:((pos[a.r]^pos[b.r])?a.r&lt;b.r:a.t&lt;b.t);        //å¢åŠ ç¬¬ä¸‰å…³é”®å­—,è¯¢é—®çš„å…ˆåé¡ºåº,ç”¨tæˆ–è€…kåº”è¯¥éƒ½è¡Œ    }}q[MAXN];int main(){    cin&gt;&gt;n&gt;&gt;m;    cq = cr = 0;    int siz = pow(n,2.0/3.0);//è¿™ä¹ˆåˆ†å—æœ€å¥½,åˆ«é—®    rep(i,1,n){        cin&gt;&gt;a[i];        b[i]=a[i];        pos[i] = i/siz;    }    char hc;    rep(i,1,m){//è¯»å…¥ä¿®æ”¹å’Œè¯¢é—®        cin&gt;&gt;hc;        if(hc=='Q'){            cin&gt;&gt;q[cq].l&gt;&gt;q[cq].r;            q[cq].k=cq;q[cq].t=cr;//æ³¨æ„è¿™æ—¶å€™R[cr]è¿˜æ˜¯æ²¡æœ‰çš„,è¿™æ¬¡è¯¢é—®æ˜¯åœ¨R[cr-1]ä¹‹åçš„            cq++;        }        else{            cin&gt;&gt;R[cr][0]&gt;&gt;R[cr][2];            R[cr][1] = b[R[cr][0]];            b[R[cr][0]] = R[cr][2];//åœ¨bæ•°ç»„ä¸­è®°å½•æ›´æ”¹            cr++;        }    }    sort(q,q+cq);    int l=1,r=0,sjc=0;//æ—¶é—´æˆ³    res = 0;    rep(i,0,cq-1){        while(sjc&lt;q[i].t){            if(l&lt;=R[sjc][0]&amp;&amp;R[sjc][0]&lt;=r)//åˆ¤æ–­ä¿®æ”¹æ˜¯å¦åœ¨è¯¥åŒºé—´å†…                Sub(R[sjc][1]),Add(R[sjc][2]);            a[R[sjc][0]] = R[sjc][2];//åœ¨aä¸Šä¹Ÿè¿›è¡Œæ›´æ”¹            sjc++;        }        while(sjc&gt;q[i].t){            sjc--;            if(l&lt;=R[sjc][0]&amp;&amp;R[sjc][0]&lt;=r)//åˆ¤æ–­ä¿®æ”¹æ˜¯å¦åœ¨è¯¥åŒºé—´å†…                Sub(R[sjc][2]),Add(R[sjc][1]);            a[R[sjc][0]] = R[sjc][1];//åœ¨aä¸Šä¹Ÿè¿›è¡Œæ›´æ”¹        }        while(l&gt;q[i].l) Add(a[--l]);        while(l&lt;q[i].l) Sub(a[l++]);        while(r&lt;q[i].r) Add(a[++r]);        while(r&gt;q[i].r) Sub(a[r--]);        ans[q[i].k] = res;    }    rep(i,0,cq-1) cout&lt;&lt;ans[i]&lt;&lt;endl;}//æ´›è°·P1903 [å›½å®¶é›†è®­é˜Ÿ]æ•°é¢œè‰² / ç»´æŠ¤é˜Ÿåˆ—//https://www.luogu.com.cn/problem/P1903<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ‰«æçº¿Scanline"><a href="#æ‰«æçº¿Scanline" class="headerlink" title="æ‰«æçº¿Scanline"></a>æ‰«æçº¿Scanline</h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define ll long long #define ls (x&lt;&lt;1)#define rs (x&lt;&lt;1|1)//è¿™ç§æ–¹æ³•æ„Ÿè§‰è¿˜æŒºå¥½çš„const int MAXN = 2e5+5;//è¿™é‡Œè¦å¼€nçš„ä¸¤å€//çº¿ç»“æ„ä½“struct Line{    ll l,r,h;    int qz;//è®°å½•ä½ç½®å’Œæƒå€¼    bool operator &lt; (Line &amp;rhs){        return h &lt; rhs.h;    }}line[MAXN];int n;ll x1,y1,x2,y2;ll X[MAXN];//çº¿æ®µæ ‘struct Segt{    int l,r;//æ˜¯Xçš„ä¸‹æ ‡,å³ç¦»æ•£åŒ–åçš„    int sum;//sumæ˜¯è¢«å®Œå…¨è¦†ç›–çš„æ¬¡æ•°    ll len;//lenæ˜¯åŒºé—´å†…è¢«ç›–ä½çš„é•¿åº¦    //å› ä¸ºæ¯æ¬¡æŸ¥è¯¢éƒ½æ˜¯æŸ¥è¯¢æ ¹èŠ‚ç‚¹,æ‰€ä»¥è¿™è¾¹ä¸éœ€è¦æ‡’æƒ°æ ‡è®°}t[MAXN&lt;&lt;3];//ä¸€ä¸ªè¾¹æœ‰ä¸¤ä¸ªç‚¹,æ‰€ä»¥è¿™é‡Œè¦å¼€8å€void build(int x,int l,int r){    t[x].l = l;t[x].r = r;    t[x].len = t[x].sum = 0;    if(l==r) return;//åˆ°äº†å¶å­èŠ‚ç‚¹    int mid = (l+r)&gt;&gt;1;    build(ls,l,mid);    build(rs,mid+1,r);}void push_up(int x){    int l = t[x].l,r = t[x].r;    if(t[x].sum) t[x].len = X[r+1]-X[l];//xçš„åŒºé—´æ˜¯X[l]åˆ°X[r+1]-1    else t[x].len = t[ls].len + t[rs].len;//åˆå¹¶å„¿å­çš„ä¿¡æ¯}void update(int x,int L,int R,int v){//è¿™é‡Œçš„LRå­˜çš„æ˜¯å®é™…å€¼    //è¿™é‡Œå¦‚æœæ˜¯çº¿æ®µL,R,çº¿æ®µæ ‘ä¸Šæ˜¯Låˆ°R-1çš„éƒ¨åˆ†ç»´æŠ¤    int l = t[x].l,r = t[x].r;    if(X[r+1]&lt;=L||R&lt;=X[l]) return;//åŠ ç­‰äº,ä¸ç„¶ä¼šæåˆ°æ— è¾œçš„çº¿    if(L&lt;=X[l]&amp;&amp;X[r+1]&lt;=R){        t[x].sum += v;//ä¿®æ”¹è¦†ç›–æ¬¡æ•°        push_up(x);        return;    }    update(ls,L,R,v);    update(rs,L,R,v);    push_up(x);}int main(){    cin&gt;&gt;n;    rep(i,1,n){        cin&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2;        X[2*i-1] = x1,X[2*i] = x2;//ä¸€ä¼šå„¿ç¦»æ•£åŒ–è¦ç”¨çš„,è¿™é‡Œå­˜å®é™…å€¼        line[2*i-1] = Line{x1,x2,y1,1};//å¼€å§‹çš„çº¿        line[2*i] = Line{x1,x2,y2,-1};//ç»“æŸçš„çº¿    }    n&lt;&lt;=1;//lineçš„æ•°é‡æ˜¯å››è¾¹å½¢æ•°é‡çš„2å€    sort(line+1,line+1+n);    sort(X+1,X+1+n);    int tot = unique(X+1,X+n+1)-(X+1);//å»é™¤é‡å¤ç›¸é‚»å…ƒç´ ,å¹¶ä¸”totè®°å½•æ€»æ•°    build(1,1,tot-1);//ä¸ºä»€ä¹ˆæ˜¯tot-1?    //å› ä¸ºçº¿æ®µæ ‘åªéœ€è¦ç»´æŠ¤X[1]åˆ°X[tot]-1è¿™ä¸€æ®µçš„,å®é™…é•¿åº¦æ˜¯å‘å³è´´çš„    ll res = 0;    rep(i,1,n-1){//æ¯æ¬¡é«˜åº¦æ˜¯line[i+1].h-line[i].h,æ‰€ä»¥æ˜¯åˆ°n-1å°±è¡Œ        update(1,line[i].l,line[i].r,line[i].qz);//æ‰«æçº¿åŠ å…¥çº¿æ®µæ ‘        res += t[1].len*(line[i+1].h-line[i].h);    }    cout&lt;&lt;res&lt;&lt;endl;}//æ´›è°·P5490 ã€æ¨¡æ¿ã€‘æ‰«æçº¿//https://www.luogu.com.cn/problem/P5490<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="CDQåˆ†æ²»"><a href="#CDQåˆ†æ²»" class="headerlink" title="CDQåˆ†æ²»"></a>CDQåˆ†æ²»</h2><p>å¤„ç†ä¸‰ä½ååºé—®é¢˜ï¼Œä»¥luogué™Œä¸ŠèŠ±å¼€ä¸ºä¾‹ï¼š<a href="https://www.luogu.com.cn/problem/P3810">https://www.luogu.com.cn/problem/P3810</a></p><p>åºåˆ—ä¸Šæ¯ä¸ªnodeæœ‰a,b,cä¸‰ä¸ªå±æ€§ï¼Œå®šä¹‰å‡½æ•°f(i)ä¸ºå¯¹ä½ç½®içš„åºåˆ—ï¼Œå­˜åœ¨å¤šå°‘ä¸ª$j\leq i$ä½¿å¾—$a_j\leq a_i,b_j\leq b_i,c_j\leq c_i$ã€‚ç»Ÿè®¡å®Œæˆåé—®å¯¹æ¯ä¸ª$0&lt;d&lt;n$ï¼Œæœ‰å¤šå°‘ä¸ª$i$ä½¿å¾—$f(i)=d$.</p><p>æ–¹æ³•æ˜¯å…ˆå¯¹ç¬¬ä¸€ç»´åº¦aè¿›è¡Œæ’åº,ä¹‹åç¬¬äºŒç»´æ»¡è¶³$b_j\leq b_i$çš„æ¯ä¸€å¯¹i,jï¼Œæˆ‘ä»¬åˆ†æˆä¸‰ç§æƒ…å†µ:ijéƒ½åœ¨å·¦åŠè¾¹ï¼Œijéƒ½åœ¨å³åŠè¾¹ï¼Œiåœ¨å·¦åŠè¾¹jåœ¨å³åŠè¾¹ã€‚</p><p>å‰ä¸¤ä¸ªé€šè¿‡é€’å½’æ±‚è§£ï¼Œæ±‚è§£å®Œå·¦å³å­åŒºé—´åï¼Œæ ¹æ®ç¬¬äºŒå…³é”®å­—å¯¹ä¸¤ä¸ªå­åŒºé—´åˆ†åˆ«è¿›è¡Œæ’åºï¼Œè¿™æ ·ä¸€æ¥å·¦åŠè¾¹çš„aä¸€å®šå°äºå³åŠè¾¹çš„aï¼Œè€Œä¸”ä¸¤ä¸ªåŒºé—´å†…çš„béƒ½å‘ˆé€’å¢ã€‚æˆ‘ä»¬ç”¨åŒæŒ‡é’ˆçš„æ–¹æ³•ï¼Œå³è¾¹çš„pxiæ¯å¾€å³ç§»åŠ¨ä¸€æ¬¡ï¼Œå·¦è¾¹çš„pxjå¯¹åº”ç§»åŠ¨ï¼Œå¹¶ä¸”æŠŠè¿™äº›jéƒ½æ¨å…¥æ ‘çŠ¶æ•°ç»„ä¸­ï¼Œä¹‹åæ ¹æ®pxiæŒ‡å‘çš„èŠ‚ç‚¹çš„cå±æ€§ï¼ŒæŸ¥è¯¢çº¿æ®µæ ‘ä¸­cæ¯”c[pxi]å°çš„æ•°é‡å³å¯ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;algorithm&gt;using namespace std;#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)const int MAXN = 214514;struct node{    int a,b,c,cnt,ans;}s1[MAXN],s2[MAXN];int ans[MAXN];//å­˜å¯¹æ¯ä¸ªd,f[i]==dçš„iæ•°é‡int n,k,m;//æ ‘çŠ¶æ•°ç»„int mx;int treec[MAXN];inline int lowbit(int x){return x&amp;-x;}inline void add(int x,int t){    while(x&lt;=mx) treec[x]+=t,x+=lowbit(x);}inline int query(int x){    int ret = 0;    while(x) ret+=treec[x],x-=lowbit(x);    return ret;}//cdqåˆ†æ²»bool cmp1(node x,node y){//ä»¥aä¸ºå…³é”®å­—ä»å°æ‰“åˆ°æ’åº    if(x.a==y.a){        if(x.b==y.b) return x.c&lt;y.c;        return x.b&lt;y.b;    }    return x.a&lt;y.a;}bool cmp2(node x,node y){//æ ¹æ®bæ’åº,ä¾¿åªå‰©ä¸‹cçš„é¡ºåºæ²¡æœ‰æ»¡è¶³    if(x.b==y.b) return x.c&lt;y.c;    return x.b&lt;y.b;}void cdq(int l,int r){    if(l==r) return;    int mid = (l+r)&gt;&gt;1;    //å¤„ç†å‰ä¸¤ç§æƒ…å†µ:ijåŒåœ¨å·¦/å³    cdq(l,mid);cdq(mid+1,r);    //å¤„ç†ç¬¬ä¸‰ç§æƒ…å†µ:iåœ¨å·¦jåœ¨å³    sort(s2+l,s2+mid+1,cmp2);    sort(s2+mid+1,s2+r+1,cmp2);    int pxj=l,pxi=mid+1;//åŒæŒ‡é’ˆ,å¯¹åº”pxiçš„ç§»åŠ¨æŠŠpxjæ’å…¥æ ‘çŠ¶æ•°ç»„ä¸­    for(pxi=mid+1;pxi&lt;=r;pxi++){        while(s2[pxj].b&lt;=s2[pxi].b&amp;&amp;pxj&lt;=mid){            add(s2[pxj].c,s2[pxj].cnt);//å¸¦æ¬¡æ•°æ’å…¥æ ‘çŠ¶æ•°ç»„ä¸­            pxj++;        }        s2[pxi].ans+=query(s2[pxi].c);        //æŸ¥è¯¢æ ‘çŠ¶æ•°ç»„ä¸­cæ¯”ä»–å°çš„    }    rep(j,l,pxj-1) add(s2[j].c,-s2[j].cnt);//ä¹‹å‰é”™åœ¨è¿™é‡Œ,æ³¨æ„åªæœ‰pxjå‰é¢çš„æ‰è¢«åŠ è¿‡,pxjæ²¡æœ‰    //éå†pxjèµ°è¿‡çš„åŒºé—´,æ¸…ç©ºæ ‘çŠ¶æ•°ç»„}int main(){    cin&gt;&gt;n&gt;&gt;k;    m=0,mx=k;//æ ‘çŠ¶æ•°ç»„çš„æœ€å¤§æ•°å­—(ç±»ä¼¼æƒå€¼çº¿æ®µæ ‘)    rep(i,1,n) cin&gt;&gt;s1[i].a&gt;&gt;s1[i].b&gt;&gt;s1[i].c;    sort(s1+1,s1+1+n,cmp1);//ä»¥aä¸ºå…³é”®å­—ä»å°åˆ°å¤§æ’åº    int tmp=0;//å½“å‰è¿™ä¸ªé¡¹å‡ºç°äº†å‡ æ¬¡    rep(i,1,n){//åˆå¹¶ç›¸åŒçš„é¡¹å¹¶ä¸”è®°å½•å‡ºç°æ¬¡æ•°è¿›cnt        tmp++;//å½“å‰é¡¹å‡ºç°äº†å‡ æ¬¡        if(s1[i].a!=s1[i+1].a||s1[i].b!=s1[i+1].b||s1[i].c!=s1[i+1].c){//åˆ¤æ–­ä¸¤ä¸ªnodeæ˜¯å¦ä¸åŒ            s2[++m]=s1[i];//mç»Ÿè®¡å…ƒç´ ä¸ªæ•°            s2[m].cnt = tmp;            tmp = 0;        }    }    cdq(1,m);//é€’å½’è®¡ç®—    //é¢˜ç›®é—®çš„æ˜¯f(x)=æ»¡è¶³æ¡ä»¶ijå¯¹æ•°,å¯¹åº”æ¯ä¸ªxæœ‰å‡ ä¸ª,æŠŠç»“æœå­˜åˆ°ans[x]ä¸­    rep(i,1,m) ans[s2[i].ans+s2[i].cnt-1]+=s2[i].cnt;    //s2[i].cnt-1æ˜¯è¿™äº›æ•°å­—è‡ªå·±ä¹‹é—´æ»¡è¶³çš„å¯¹æ•°    rep(i,0,n-1) cout&lt;&lt;ans[i]&lt;&lt;endl;}//æ´›è°·P3810é™Œä¸ŠèŠ±å¼€//https://www.luogu.com.cn/problem/P3810<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACMæ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿå‚…é‡Œå¶å˜æ¢-FFTå­¦ä¹ ç¬”è®°</title>
      <link href="2020/11/07/fft/"/>
      <url>2020/11/07/fft/</url>
      
        <content type="html"><![CDATA[<h1 id="ç†è®ºéƒ¨åˆ†"><a href="#ç†è®ºéƒ¨åˆ†" class="headerlink" title="ç†è®ºéƒ¨åˆ†"></a>ç†è®ºéƒ¨åˆ†</h1><h2 id="æ˜¯è¿™ç¯‡åšå®¢çš„å­¦ä¹ ç¬”è®°ï¼ˆè‡ªå·±çœ‹çš„æ•´ç†æ€»ç»“ï¼Œä¾µåˆ ï¼‰"><a href="#æ˜¯è¿™ç¯‡åšå®¢çš„å­¦ä¹ ç¬”è®°ï¼ˆè‡ªå·±çœ‹çš„æ•´ç†æ€»ç»“ï¼Œä¾µåˆ ï¼‰" class="headerlink" title="æ˜¯è¿™ç¯‡åšå®¢çš„å­¦ä¹ ç¬”è®°ï¼ˆè‡ªå·±çœ‹çš„æ•´ç†æ€»ç»“ï¼Œä¾µåˆ ï¼‰"></a>æ˜¯è¿™ç¯‡åšå®¢çš„å­¦ä¹ ç¬”è®°ï¼ˆè‡ªå·±çœ‹çš„æ•´ç†æ€»ç»“ï¼Œä¾µåˆ ï¼‰</h2><p><a href="https://www.cnblogs.com/zwfymqz/p/8244902.html">https://www.cnblogs.com/zwfymqz/p/8244902.html</a></p><p><a href="https://www.luogu.com.cn/blog/attack/solution-p3803">https://www.luogu.com.cn/blog/attack/solution-p3803</a></p><p>ç¥çŠ‡åšå®¢</p><p>çœ‹å®Œäº†æ‰å‘ç°Bç«™ä¸Šæœ‰ä¸ªç‰¹åˆ«å¥½çš„è§†é¢‘BV1Y7411W73U</p><p><u>éå¸¸å¥½éå¸¸å¥½éå¸¸å¥½éå¸¸ç‰›é€¼éå¸¸ç‰›é€¼éå¸¸ç‰›é€¼è¿™ä¸ªè§†é¢‘</u></p><h2 id="å¤šé¡¹å¼çŸ¥è¯†"><a href="#å¤šé¡¹å¼çŸ¥è¯†" class="headerlink" title="å¤šé¡¹å¼çŸ¥è¯†"></a>å¤šé¡¹å¼çŸ¥è¯†</h2><h3 id="è´Ÿæ•°è¿ç®—æ³•åˆ™"><a href="#è´Ÿæ•°è¿ç®—æ³•åˆ™" class="headerlink" title="è´Ÿæ•°è¿ç®—æ³•åˆ™"></a>è´Ÿæ•°è¿ç®—æ³•åˆ™</h3><p>$(a+bi)*(c+di)=ac+adi+bci-bd=(ac-bd)+(bc+ad)i$</p><h3 id="å•ä½æ ¹"><a href="#å•ä½æ ¹" class="headerlink" title="å•ä½æ ¹"></a>å•ä½æ ¹</h3><p>å¤å¹³é¢ä¸ŠæŠŠè¿™ä¸ªåœ†åˆ†æˆnç­‰åˆ†çš„ç»ˆç‚¹ï¼Œè§’åº¦æœ€å°çš„å“ªä¸€ä¸ªå°±æ˜¯næ¬¡å•ä½æ ¹ï¼Œè®°ä½œ$w_{n}$</p><p>å•ä½æ ¹$w_{n}^{k}$çš„æ•°å€¼å³$\cos(k\cdot\frac{2\pi}{n})+\sin(k\cdot\frac{2\pi}{n})i$</p><p>æœ‰æ€§è´¨$w^{k}<em>{n}=w^{2k}</em>{2n}$ï¼Œæ˜“è¯ã€‚</p><h2 id="FFT"><a href="#FFT" class="headerlink" title="FFT"></a>FFT</h2><h3 id="æ‹†ä¸¤åŠ"><a href="#æ‹†ä¸¤åŠ" class="headerlink" title="æ‹†ä¸¤åŠ"></a>æ‹†ä¸¤åŠ</h3><p>ç»™å¤šé¡¹å¼<br>$A(x)=a_{0}+a_{1}x+a_{2}x^{2}+\dots+a_{n-2}x^{n-2}+a_{n-1}x^{n-1}$</p><p>æŒ‰ç…§<strong>å¥‡æ¬¡å¶æ¬¡é¡¹åˆ†</strong>ï¼Œå¾—åˆ°</p><p>$A(x)=(a_{0}+a_{2}x^{2}\dots a_{n-2}x^{n-2}) + (a_{1}x\dots a_{n-1}x^{n-1})$</p><p>åˆ™æœ‰$A(x) = A_1(x^{2}) + x A_2(x^{2})$</p><p>æŠŠ$w_n ^k (k&lt; \frac{n}{2})$å¸¦å…¥æœ‰</p><p>$A( w_{n} ^{k} ) = A_{1}( w_{n} ^{2k}) +  w_{n} ^{k} A_2( w_{n} ^{2k})$</p><p>$= A_1(w_{ \frac{n}{2}}^{k}) + w_n ^k A_2(w_{ \frac{n}{2}}^{k})$<strong>å¼å­1</strong></p><p>æŠŠ$w_{n} ^{k + \frac{n}{2}}$å¸¦å…¥å¾—åˆ°</p><p>$A( w_n ^{k + \frac{n}{2} } ) = A_1( (w_n ^{k + \frac{n}{2} })^2 ) +  w_n ^{k + \frac{n}{2} } A_2( (w_n ^{k + \frac{n}{2} })^2 )$</p><p>$= A_1(w_{n}^{2k+n}) - w_n ^k A_2(w_{n}^{2k+n})$//+å·å› ä¸ºæ­£å¥½å»æ‰ä¸€ä¸ª$\pi$æ‰€ä»¥å˜æˆ-äº†,é‡Œé¢æŠŠå¹³æ–¹å»äº†</p><p>$= A_1(w_{n}^{2k}) - w_n ^k A_2(w_{n}^{2k})$//nå¯ä»¥å»æ‰</p><p>$= A_1(w_{ \frac{n}{2}}^{k}) - w_n ^k A_2(w_{ \frac{n}{2}}^{k})$<strong>å¼å­2</strong></p><h3 id="å¤„ç†ä¸€ä¸ªçš„åŒæ—¶å¾—åˆ°å¦å¤–ä¸€ä¸ª"><a href="#å¤„ç†ä¸€ä¸ªçš„åŒæ—¶å¾—åˆ°å¦å¤–ä¸€ä¸ª" class="headerlink" title="å¤„ç†ä¸€ä¸ªçš„åŒæ—¶å¾—åˆ°å¦å¤–ä¸€ä¸ª"></a>å¤„ç†ä¸€ä¸ªçš„åŒæ—¶å¾—åˆ°å¦å¤–ä¸€ä¸ª</h3><p>è¿™æ—¶å€™å¯ä»¥æ‰¾åˆ°è§„å¾‹ï¼Œä¸¤ä¸ªå¼å­åªæœ‰ä¸€ä¸ªå¸¸æ•°é¡¹ä¸åŒ(ä¹Ÿåªæ˜¯æ­£è´Ÿå·çš„åŒºåˆ«)</p><p>æ‰€ä»¥ç®—å®Œå¼å­1ï¼Œåªéœ€è¦$O(1)$ å°±æœ‰å¼å­2çš„ç»“æœäº†</p><p>ç¬¬ä¸€ä¸ªå¼å­$k$åœ¨å–é$ [0,\frac{n}{2}âˆ’1]$ æ—¶,ç¬¬äºŒä¸ªå¼å­ä¹Ÿ<strong>è·Ÿç€å–äº†</strong>$k+ \frac{n}{2}$å³$[\frac{n}{2},n-1]$</p><p>é—®é¢˜çš„å¤æ‚åº¦ç›´æ¥ç¼©å°ä¸€åŠã€‚</p><p>è¿™ä¹‹åç›´æ¥é€’å½’å¤„ç†ï¼Œå½“å¤šé¡¹å¼åªå‰©ä¸‹ä¸€ä¸ªé¡¹çš„æ—¶å€™è¿”å›å°±è¡Œäº†</p><h3 id="å¤æ‚åº¦"><a href="#å¤æ‚åº¦" class="headerlink" title="å¤æ‚åº¦"></a>å¤æ‚åº¦</h3><p>$O(nlogn)$</p><h2 id="å¿«é€Ÿå‚…é‡Œå¶é€†å˜æ¢"><a href="#å¿«é€Ÿå‚…é‡Œå¶é€†å˜æ¢" class="headerlink" title="å¿«é€Ÿå‚…é‡Œå¶é€†å˜æ¢"></a>å¿«é€Ÿå‚…é‡Œå¶é€†å˜æ¢</h2><p> ä¸Šé¢å·²ç»å˜æˆç‚¹å€¼è¡¨ç¤ºæ³•äº†ï¼Œä¹‹åè¿˜è¦å­¦æ€ä¹ˆä»ç‚¹å€¼å˜å›ç³»æ•°è¡¨ç¤ºæ³•</p><h3 id="æŠŠç‚¹å€¼ä½œä¸ºç³»æ•°å¾—åˆ°B-x"><a href="#æŠŠç‚¹å€¼ä½œä¸ºç³»æ•°å¾—åˆ°B-x" class="headerlink" title="æŠŠç‚¹å€¼ä½œä¸ºç³»æ•°å¾—åˆ°B(x)"></a>æŠŠç‚¹å€¼ä½œä¸ºç³»æ•°å¾—åˆ°B(x)</h3><p>$(y_0,y_1,y_2,\dots,y_{nâˆ’1})$ä¸º$(a_0,a_1,a_2,\dots,a_{n-1})$çš„å‚…é‡Œå¶å˜æ¢</p><p>è®¾$c_k=\sum_{i=0}^{n-1}y_i(\omega_n^{-k})^i$å³$c_k$æ˜¯kå•ä½æ ¹çš„</p><p>$B(x)=y_0,y_1x,y_2x^2,\dots,y_{n-1}x^{n-1}$</p><p>$k = 1,2,\dots,n-1$</p><p>åœ¨$x= \omega_n^{0},\omega_n^{-1},\omega_n^{-2},\dots,\omega_{n-1}^{-(n-1)}$è¿™$B(x)$è¿™nä¸ªç‚¹ä¸Šçš„ç‚¹å€¼</p><h3 id="Ckå˜ä¸€ä¸‹å½¢"><a href="#Ckå˜ä¸€ä¸‹å½¢" class="headerlink" title="Ckå˜ä¸€ä¸‹å½¢"></a>Ckå˜ä¸€ä¸‹å½¢</h3><p>$c_k=\sum_{i=0}^{n-1}y_i(\omega_n^{-k})^i$<br>$=\sum_{i=0}^{n-1}(\sum_{j=0}^{n-1}a_j(\omega_n^i)^j)(\omega_n^{-k})^i$<br>$=\sum_{i=0}^{n-1}(\sum_{j=0}^{n-1}a_j(\omega_n^j)^i)(\omega_n^{-k})^i$//ä¸ºäº†å’Œåé¢çš„iæ¬¡ä¸€æ ·ï¼Œè¿™é‡ŒæŠŠiå’Œjäº¤æ¢ä¸€ä¸‹<br>$=\sum_{i=0}^{n-1}(\sum_{j=0}^{n-1}a_j(\omega_n^j)^i(\omega_n^{-k})^i)$<br>$=\sum_{i=0}^{n-1}\sum_{j=0}^{n-1}a_j(\omega_n^j)^i(\omega_n^{-k})^i$<br>$=\sum_{i=0}^{n-1}\sum_{j=0}^{n-1}a_j(\omega_n^{j-k})^i$//æŠŠåŒæ ·æ˜¯iæ¬¡çš„ä¸¤ä¸ªåˆå¹¶äº†<br>$=\sum_{j=0}^{n-1}a_j(\sum_{i=0}^{n-1}(\omega_n^{j-k})^i)$</p><h3 id="å…ˆç®€åŒ–æˆS-x-è®¨è®º"><a href="#å…ˆç®€åŒ–æˆS-x-è®¨è®º" class="headerlink" title="å…ˆç®€åŒ–æˆS(x)è®¨è®º"></a>å…ˆç®€åŒ–æˆS(x)è®¨è®º</h3><p>æ¥ä¸‹æ¥è®¾$S(x) = \sum_{i=0}^{n-1} x^i$å³ä»0åˆ°n-1æ¬¡çš„xç›¸åŠ </p><p>å³ $S(x) = \sum_{i=0}^{n-1} (\omega_{n}^{k})^i$</p><p>å¸¦å…¥$\omega_n^k$æ—¶ï¼Œå¦‚æœ$k = 0$æ—¶æ˜¾ç„¶æœ‰$S(\omega_{n}^{k}) = n$</p><p>$k != 0$æ—¶ï¼Œè¿™æ—¶å€™è¯¥æ€ä¹ˆç®—</p><p>ç”¨ç±»ä¼¼é«˜ä¸­æ•°åˆ—çš„æ–¹æ³•ï¼Œå«å•¥æ¥ç€å¥½åƒå«ï¼Ÿåæ­£ä¹˜ä¸Šå»åšå·®å°±å®Œäº†</p><p>$\omega_{n}^{k}*S(x) - S(x)$</p><p>$=(\omega_n^k)^n-1$</p><p>å˜å½¢å¾—åˆ°</p><p>$S(x) = \frac{1-1}{\omega_n^k -1}$//è¿™é‡Œä¸­é—´çœæ‰äº†å¥½å¤šçš„æ­¥éª¤ï¼Œåæ­£æ¨ä¸€ä¸‹ä¹Ÿç®€å•çš„</p><p>æ‰€ä»¥å¯ä»¥çœ‹å‡ºæ¥$k!=0$æ—¶ï¼Œ$S(x) = 0$</p><h3 id="è®¨è®ºå®ŒS-x-å›å»çœ‹ä¹‹å‰çš„Ck"><a href="#è®¨è®ºå®ŒS-x-å›å»çœ‹ä¹‹å‰çš„Ck" class="headerlink" title="è®¨è®ºå®ŒS(x),å›å»çœ‹ä¹‹å‰çš„Ck"></a>è®¨è®ºå®ŒS(x),å›å»çœ‹ä¹‹å‰çš„Ck</h3><p>ç»“åˆä¹‹å‰$ S(x) $çš„ç»“è®ºï¼Œå¯ä»¥çŸ¥é“ï¼Œ$j-k != 0$æ—¶ï¼Œ$c_k = 0$ </p><p>å³åªæœ‰$j=k$çš„æ—¶å€™æ‰ä¸æ˜¯0ï¼Œè€Œæ˜¯nã€‚</p><p>$\sum_{j=0}^{n-1}a_j(\sum_{i=0}^{n-1}(\omega_n^{j-k})^i)$ä¸­åé¢é‚£ä¸€é¡¹<strong>å…¶å®å°±æ˜¯n</strong>ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„</p><p>æ‰€ä»¥æœ‰$c_k = n*a_k$</p><p>$a_k = \frac{c_k}{n}$</p><p>è¿™æ ·å°±å¾—åˆ°äº†ç‚¹å€¼å’Œç³»æ•°ä¹‹é—´çš„å…³ç³»</p><p>å…¶å®ä»ç‚¹å€¼åˆ°ç³»æ•°çš„è¿™ä¸€æ­¥ä¹Ÿæ˜¯é€šè¿‡ä¹‹å‰çš„FFTå»å®ç°çš„ï¼Œéå¸¸ç‰›é€¼</p><h1 id="å®ç°éƒ¨åˆ†"><a href="#å®ç°éƒ¨åˆ†" class="headerlink" title="å®ç°éƒ¨åˆ†"></a>å®ç°éƒ¨åˆ†</h1><h2 id="ACä»£ç "><a href="#ACä»£ç " class="headerlink" title="ACä»£ç "></a>ACä»£ç </h2><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cmath&gt;#include&lt;cstdio&gt;using namespace std;inline int read(){    char c=getchar();int x=0,f=1;    while(c&lt;'0'||c&gt;'9'){if(c=='-')f=-1;c=getchar();}    while(c&gt;='0'&amp;&amp;c&lt;='9'){x=x*10+c-'0';c=getchar();}    return x*f;}#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)const int MAXN = 3e6+5;const double Pi = acos(-1.0);struct cplx{//æ‰‹å†™è´Ÿæ•°complexç”¨èµ·æ¥ä¼šæ›´å¿«    double x,y;    cplx(double x=0,double y=0):x(x),y(y){}    friend cplx operator + (cplx a,cplx b){return cplx(a.x+b.x,a.y+b.y);}    friend cplx operator - (cplx a,cplx b){return cplx(a.x-b.x,a.y-b.y);}    friend cplx operator * (cplx a,cplx b){return cplx(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);}}a[MAXN],b[MAXN];void FFT(int limit,cplx *a,int type){//limitè®°å½•é¡¹æ•°    if(limit==1) return;//åªæœ‰ä¸€ä¸ªå¸¸æ•°é¡¹ç»“æŸé€’å½’(å³åªå‰©ä¸‹0æ¬¡çš„)    cplx a1[limit&gt;&gt;1],a2[limit&gt;&gt;1];//æŒ‰ç…§å¥‡å¶åˆ†ç»„    for(int i=0;i&lt;limit;i+=2)        a1[i&gt;&gt;1] = a[i],a2[i&gt;&gt;1] = a[i+1];    FFT(limit&gt;&gt;1,a1,type);    FFT(limit&gt;&gt;1,a2,type);    cplx Wn(cos(2*Pi/limit),type*sin(2*Pi/limit));//å•ä½æ ¹    //è¿™é‡ŒtypeæŒºé‡è¦çš„,åå˜æ¢çš„æ—¶å€™ç”¨-1,å› ä¸ºæ˜¯-k    cplx w(1,0);//ä¸€ä¼šå„¿ç®—å•ä½æ ¹å¹‚çš„æ—¶å€™ç”¨wå­˜    for(int i=0;i&lt;(limit&gt;&gt;1);i++,w=w*Wn){//wç›¸å½“äºå…¬å¼ä¸­çš„w_n^k        a[i]=a1[i]+w*a2[i];//å¶        a[i+(limit&gt;&gt;1)]=a1[i]-w*a2[i];//O(1)ç®—å¦å¤–ä¸€éƒ¨åˆ†    }}int main(){    int n=read(),m=read();    rep(i,0,n) a[i].x=read();    rep(i,0,m) b[i].x=read();    int limit = 1;    while(limit&lt;=n+m) limit&lt;&lt;=1;//è¿™é‡Œéå¸¸ç²¾é«“    //æŠŠé•¿åº¦è¡¥åˆ°2çš„å¹‚ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘%2ä½™æ•°çš„æƒ…å†µ    //è€Œä¸”ä¸å¿…æ‹…å¿ƒé«˜æ¬¡é¡¹çš„ç³»æ•°ï¼Œå› ä¸ºé»˜è®¤ä¸º0    FFT(limit,a,1);    FFT(limit,b,1);    //1è¡¨ç¤ºFFTï¼Œ-1åˆ™æ˜¯åå˜æ¢       rep(i,0,limit) a[i] = a[i]*b[i];//è½¬æ¢ä¸ºç‚¹å€¼åç›´æ¥ç›¸ä¹˜    FFT(limit,a,-1);//ç°åœ¨å˜å›å»    rep(i,0,n+m) printf("%d ",(int)(a[i].x/limit+0.5));//è¿˜è¦é™¤ä»¥nçš„    printf("\n");}//P3803 ã€æ¨¡æ¿ã€‘å¤šé¡¹å¼ä¹˜æ³•ï¼ˆFFTï¼‰//https://www.luogu.com.cn/problem/P3803<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤§ä½¬ç¬”è¯¯"><a href="#å¤§ä½¬ç¬”è¯¯" class="headerlink" title="å¤§ä½¬ç¬”è¯¯"></a>å¤§ä½¬ç¬”è¯¯</h3><p>å‘ç°å¤§ä½¬çš„ç¬”è¯¯åœ¨æ‹†åˆ†å¥‡å¶çš„åœ°æ–¹ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">complex a1[limit&gt;&gt;1],a2[limit&gt;&gt;1];    for(int i=0;i&lt;=limit;i+=2)//æ ¹æ®ä¸‹æ ‡çš„å¥‡å¶æ€§åˆ†ç±»        a1[i&gt;&gt;1]=a[i],a2[i&gt;&gt;1]=a[i+1];<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæ˜¾ç„¶ä¼šå‡ºç°æ•°ç»„è¶Šç•Œçš„æƒ…å†µï¼Œè¦ä¹ˆæ•°ç»„å†å¼€å¤§ç‚¹ï¼Œè¦ä¹ˆ&lt;=limitæ”¹æˆ&lt;limitã€‚éªŒè¯è¿‡ä¸¤ç§éƒ½è¡Œï¼Œä¸è¿‡æ˜¾ç„¶ç¬¬äºŒç§ä¼šæ¯”è¾ƒå¥½ä¸€ç‚¹ã€‚</p><h1 id="ç®—æ³•ä¼˜åŒ–"><a href="#ç®—æ³•ä¼˜åŒ–" class="headerlink" title="ç®—æ³•ä¼˜åŒ–"></a>ç®—æ³•ä¼˜åŒ–</h1><h2 id="è´è¶æ“ä½œ"><a href="#è´è¶æ“ä½œ" class="headerlink" title="è´è¶æ“ä½œ"></a>è´è¶æ“ä½œ</h2><h3 id="ä¼˜åŒ–è®¡ç®—äº†ä¸¤æ¬¡çš„éƒ¨åˆ†"><a href="#ä¼˜åŒ–è®¡ç®—äº†ä¸¤æ¬¡çš„éƒ¨åˆ†" class="headerlink" title="ä¼˜åŒ–è®¡ç®—äº†ä¸¤æ¬¡çš„éƒ¨åˆ†"></a>ä¼˜åŒ–è®¡ç®—äº†ä¸¤æ¬¡çš„éƒ¨åˆ†</h3><p>ä¸Šé¢åœ¨è®¡ç®—$A_1$å’Œ$A_2$æ—¶ï¼š</p><p>$A( w_{n} ^{k} ) =A_1(w_{ \frac{n}{2}}^{k}) + w_n ^k A_2(w_{ \frac{n}{2}}^{k})$<strong>å¼å­1</strong></p><p>$A( w_n ^{k + \frac{n}{2} } )= A_1(w_{ \frac{n}{2}}^{k}) - w_n ^k A_2(w_{ \frac{n}{2}}^{k})$<strong>å¼å­2</strong></p><p>å‰ä¸€é¡¹å®Œå…¨ç›¸åŒï¼Œåä¸€é¡¹ä¹Ÿä»…ä»…æ˜¯ç›¸å·®ä¸€ä¸ªæ­£è´Ÿå·ã€‚ä½†æ˜¯åœ¨ä¹‹å‰çš„ä»£ç é‡Œæˆ‘ä»¬è¿™ä¸€æ­¥è®¡ç®—äº†ä¸¤æ¬¡ã€‚</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">for(int i=0;i&lt;(limit&gt;&gt;1);i++,w=w*Wn){//wç›¸å½“äºå…¬å¼ä¸­çš„w_n^ka[i]=a1[i]+w*a2[i];//å¶a[i+(limit&gt;&gt;1)]=a1[i]-w*a2[i];//O(1)ç®—å¦å¤–ä¸€éƒ¨åˆ†}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¯å§ï¼Œè¿™é‡Œæ˜¾ç„¶æ˜¯å¯ä»¥ä¼˜åŒ–çš„</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">cplx tmp;for(int i=0;i&lt;(limit&gt;&gt;1);i++,w=w*Wn){//wç›¸å½“äºå…¬å¼ä¸­çš„w_n^ktmp = w*a2[i];//è´è¶æ“ä½œa[i]=a1[i]+tmp;//å¶a[i+(limit&gt;&gt;1)]=a1[i]-tmp;//O(1)ç®—å¦å¤–ä¸€éƒ¨åˆ†}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿­ä»£å®ç°FFT"><a href="#è¿­ä»£å®ç°FFT" class="headerlink" title="è¿­ä»£å®ç°FFT"></a>è¿­ä»£å®ç°FFT</h2><h3 id="è§‚å¯Ÿå¤šæ¬¡å¥‡å¶æ‹†åˆ†åä¸‹æ ‡çš„å˜åŒ–"><a href="#è§‚å¯Ÿå¤šæ¬¡å¥‡å¶æ‹†åˆ†åä¸‹æ ‡çš„å˜åŒ–" class="headerlink" title="è§‚å¯Ÿå¤šæ¬¡å¥‡å¶æ‹†åˆ†åä¸‹æ ‡çš„å˜åŒ–"></a>è§‚å¯Ÿå¤šæ¬¡å¥‡å¶æ‹†åˆ†åä¸‹æ ‡çš„å˜åŒ–</h3><p><img src="/img/fft/xiabiao.png" alt="xiabiao"></p><p><img src="/img/fft/xiabiao2.png" alt="xiabiao2"></p><p>æ˜¯æŒ‰ç…§ä½é€†åºç½®æ¢æ’åˆ—çš„ï¼Œ$O(n)$æ¥é¢„å¤„ç†</p><h3 id="å¦‚ä½•O-n-é¢„å¤„ç†ä½é€†åºç½®æ¢"><a href="#å¦‚ä½•O-n-é¢„å¤„ç†ä½é€†åºç½®æ¢" class="headerlink" title="å¦‚ä½•O(n)é¢„å¤„ç†ä½é€†åºç½®æ¢"></a>å¦‚ä½•O(n)é¢„å¤„ç†ä½é€†åºç½®æ¢</h3><p><img src="/img/fft/wnx.jpg" alt="wnx"></p><p>æœ‰é€’æ¨å¼<code>rev[i] = (rev[i&gt;&gt;1]&gt;&gt;1) | ((i&amp;1)&lt;&lt;(len-1))</code></p><p>è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ï¼š</p><ul><li>å¦‚å›¾ä¸­æ‰€è¯´çš„ï¼Œæ¯ç»„æ•°å­—çš„ä½é€†åºç½®æ¢çš„<strong>åé¢å‡ ä½éƒ½æ˜¯ä¸Šä¸€çº§é—®é¢˜çš„å­é—®é¢˜çš„è§£</strong></li></ul><p>1ä¸º100ï¼Œ2ä¸º010 è€Œ 4ä¸º001ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸€å±‚ä¸€å±‚ç½‘ä¸Šæ¨çš„æ—¶å€™å°±æ˜¯æŠŠä¸Šä¸€å±‚çš„<strong>å¾€åç§»åŠ¨ä¸€ä½</strong></p><p>æœ€å‰é¢çš„<code>(rev[i&gt;&gt;1]&gt;&gt;1)</code>ä¸­<code>rev[i&gt;&gt;1]</code>æ˜¯ä¸Šä¸€çº§å­é—®é¢˜çš„è§£ï¼Œæœ€åå†<code>&gt;&gt;1</code>æ˜¯å¾€åç§»åŠ¨ä¸€ä½</p><ul><li>ç¬¬ä¸€ä½å³<strong>æœ€åº•å±‚çš„å­é—®é¢˜</strong>â€”â€”æ¨¡2ä½™1è¿˜æ˜¯ä½™0ï¼Œç¡®å®šé¦–ä½æ˜¯1è¿˜æ˜¯0</li></ul><p><code>(i&amp;1)</code>å–æ¥ä¸‹æ ‡çš„æœ€åä¸€ä½ï¼Œ<code>&lt;&lt;(len-1)</code>æŠŠè¿™ä¸ªæ•°å­—<strong>ç§»åŠ¨åˆ°é¦–ä½</strong></p><h3 id="æŒ‰ç…§ä½é€†åºä»åº•å±‚å¾€ä¸Šè¿›è¡Œè´è¶æ“ä½œ"><a href="#æŒ‰ç…§ä½é€†åºä»åº•å±‚å¾€ä¸Šè¿›è¡Œè´è¶æ“ä½œ" class="headerlink" title="æŒ‰ç…§ä½é€†åºä»åº•å±‚å¾€ä¸Šè¿›è¡Œè´è¶æ“ä½œ"></a>æŒ‰ç…§ä½é€†åºä»åº•å±‚å¾€ä¸Šè¿›è¡Œè´è¶æ“ä½œ</h3><p><img src="/img/fft/wnx2.png" alt="wnx2"></p><p>ç¬¬äºŒå±‚æ˜¯2ä¸ªä¸€ç»„ï¼Œç¬¬ä¸‰å±‚æ˜¯4ä¸ªä¸€ç»„æ¯ç»„é‡Œé¢ï¼Œå³æ¯å±‚æ¯ç»„çš„ä¸ªæ•°mä¸º1&lt;&lt;dep</p><ul><li><p>æšä¸¾mçš„æ•°å€¼ä¹‹åå°±æ˜¯æ¯å±‚åˆ†æˆlimit/mä¸ª<strong>mä¸ªå…ƒç´ çš„ç»„</strong></p></li><li><p>å¤–é¢ä¸€ä¸ªå¾ªç¯ï¼škè¡¨ç¤º<strong>æ¯ä¸ªmå…ƒç»„çš„èµ·å§‹ä½ç½®</strong>ï¼Œæ¯æ¬¡kè¦+=mï¼›</p></li><li><p>å†æ¥ä¸€ä¸ªå¾ªç¯ï¼Œjä»0åˆ°m/2 -1å¾ªç¯ï¼š</p></li></ul><p>è¿™æ ·ä¸€æ¥ï¼Œå°±æ˜¯k+jå’Œk+j+m/2ä¸¤ä¸¤è¿›è¡Œè´è¶æ“ä½œ</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>ï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯æŠ„BV1Y7411W73Uçš„ï¼Œè¿™ä¸ªè§†é¢‘éå¸¸niceï¼‰</p><p>ä¹‹å‰ä¸€ç›´é”™ï¼Œç»“æœå‘ç°æ˜¯é”™åœ¨è¿™ä¸ªåœ°æ–¹</p><p><img src="/img/fft/jgxh.png" alt="jgxh"></p><p>a[k+j]çš„æ•°å€¼å·²ç»æ›´æ”¹å,ç®—a[k+j+m/2]å°±æœ‰é—®é¢˜</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cmath&gt;#include&lt;cstdio&gt;using namespace std;inline int read(){    char c=getchar();int x=0,f=1;    while(c&lt;'0'||c&gt;'9'){if(c=='-')f=-1;c=getchar();}    while(c&gt;='0'&amp;&amp;c&lt;='9'){x=x*10+c-'0';c=getchar();}    return x*f;}#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)const int MAXN = 3e6+5;const double Pi = acos(-1.0);struct cplx{//æ‰‹å†™è´Ÿæ•°complexç”¨èµ·æ¥ä¼šæ›´å¿«    double x,y;    cplx(double x=0,double y=0):x(x),y(y){}    friend cplx operator + (cplx a,cplx b){return cplx(a.x+b.x,a.y+b.y);}    friend cplx operator - (cplx a,cplx b){return cplx(a.x-b.x,a.y-b.y);}    friend cplx operator * (cplx a,cplx b){return cplx(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x);}}a[MAXN],b[MAXN];void FFT(int limit,cplx *a,int type){//limitè®°å½•é¡¹æ•°    if(limit==1) return;//åªæœ‰ä¸€ä¸ªå¸¸æ•°é¡¹ç»“æŸé€’å½’(å³åªå‰©ä¸‹0æ¬¡çš„)    cplx a1[limit&gt;&gt;1],a2[limit&gt;&gt;1];//æŒ‰ç…§å¥‡å¶åˆ†ç»„    for(int i=0;i&lt;limit;i+=2)        a1[i&gt;&gt;1] = a[i],a2[i&gt;&gt;1] = a[i+1];    FFT(limit&gt;&gt;1,a1,type);    FFT(limit&gt;&gt;1,a2,type);    cplx Wn(cos(2*Pi/limit),type*sin(2*Pi/limit));//å•ä½æ ¹    //è¿™é‡ŒtypeæŒºé‡è¦çš„,åå˜æ¢çš„æ—¶å€™ç”¨-1,å› ä¸ºæ˜¯-k    cplx w(1,0);//ä¸€ä¼šå„¿ç®—å•ä½æ ¹å¹‚çš„æ—¶å€™ç”¨wå­˜    cplx tmp;    for(int i=0;i&lt;(limit&gt;&gt;1);i++,w=w*Wn){//wç›¸å½“äºå…¬å¼ä¸­çš„w_n^k        tmp = w*a2[i];//è´è¶æ“ä½œ        a[i]=a1[i]+tmp;//å¶        a[i+(limit&gt;&gt;1)]=a1[i]-tmp;//O(1)ç®—å¦å¤–ä¸€éƒ¨åˆ†    }}int main(){    int n=read(),m=read();    rep(i,0,n) a[i].x=read();    rep(i,0,m) b[i].x=read();    int limit = 1;    while(limit&lt;=n+m) limit&lt;&lt;=1;//è¿™é‡Œéå¸¸ç²¾é«“    //æŠŠé•¿åº¦è¡¥åˆ°2çš„å¹‚ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘%2ä½™æ•°çš„æƒ…å†µ    //è€Œä¸”ä¸å¿…æ‹…å¿ƒé«˜æ¬¡é¡¹çš„ç³»æ•°ï¼Œå› ä¸ºé»˜è®¤ä¸º0    FFT(limit,a,1);    FFT(limit,b,1);    //1è¡¨ç¤ºFFTï¼Œ-1åˆ™æ˜¯åå˜æ¢       rep(i,0,limit) a[i] = a[i]*b[i];//è½¬æ¢ä¸ºç‚¹å€¼åç›´æ¥ç›¸ä¹˜    FFT(limit,a,-1);//ç°åœ¨å˜å›å»    rep(i,0,n+m) printf("%d ",(int)(a[i].x/limit+0.5));//è¿˜è¦é™¤ä»¥nçš„    printf("\n");}//P3803 ã€æ¨¡æ¿ã€‘å¤šé¡¹å¼ä¹˜æ³•ï¼ˆFFTï¼‰//https://www.luogu.com.cn/problem/P3803<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•å­¦ä¹ ç¬”è®° </tag>
            
            <tag> æ•°å­¦ </tag>
            
            <tag> å¤šé¡¹å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#679 (Div. 2) C.Perform Easily(äºŒåˆ†/é›†åˆ)</title>
      <link href="2020/10/28/cf-679-c/"/>
      <url>2020/10/28/cf-679-c/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®åœ°å€"><a href="#é¢˜ç›®åœ°å€" class="headerlink" title="é¢˜ç›®åœ°å€"></a>é¢˜ç›®åœ°å€</h1><p><a href="http://codeforces.com/contest/1435/problem/C">http://codeforces.com/contest/1435/problem/C</a></p><h1 id="å¤§è‡´é¢˜æ„"><a href="#å¤§è‡´é¢˜æ„" class="headerlink" title="å¤§è‡´é¢˜æ„"></a>å¤§è‡´é¢˜æ„</h1><p>æœ‰ä¸€ä¸ªé•¿åº¦ä¸º6çš„æ•°ç»„aï¼Œä»£è¡¨æ¯æ ¹å¼¦çš„åˆå§‹å€¼ã€‚</p><p>æœ‰å¦å¤–ä¸€ä¸ªæ•°ç»„bï¼Œä»£è¡¨éœ€è¦å¼¹å¥çš„æ¯ä¸ªéŸ³ç¬¦ã€‚</p><p>æ¯æ ¹ç´å¼¦çš„ç´æ ¼ä»1å¼€å§‹ã€‚ï¼ˆåœ¨å¼¹å‰ä»–é‡Œåº”è¯¥å«xå“å§ï¼‰</p><p>å¦‚æœæˆ‘è¦å¼¹éŸ³ç¬¦$b_i$,æ‰¾åˆ°$x$æ»¡è¶³$b_i=x+a_j $åˆ™å¯ä»¥æŒ‰ç´å¼¦jçš„ç´æ ¼$x$æ¥å¼¹å‡ºè¿™ä¸ªéŸ³ã€‚ï¼ˆ$j$å¼¦$x$å“ï¼‰</p><p>é—®æ€ä¹ˆå¼¹æ‰€æœ‰éŸ³ç¬¦å¯ä»¥è®©æœ€å¤§çš„$x$å’Œæœ€å°çš„$x$ä¹‹é—´çš„å·®å€¼æœ€å°‘ï¼Ÿ</p><h1 id="é¢˜ç›®æ€è·¯"><a href="#é¢˜ç›®æ€è·¯" class="headerlink" title="é¢˜ç›®æ€è·¯"></a>é¢˜ç›®æ€è·¯</h1><h2 id="æ–¹æ³•1ï¼šäºŒåˆ†"><a href="#æ–¹æ³•1ï¼šäºŒåˆ†" class="headerlink" title="æ–¹æ³•1ï¼šäºŒåˆ†"></a>æ–¹æ³•1ï¼šäºŒåˆ†</h2><p>æ–¹æ³•æ¥è‡ªå¤§ä½¬çš„åšå®¢ï¼š<a href="https://www.cnblogs.com/acceptedzhs/p/13876630.html">https://www.cnblogs.com/acceptedzhs/p/13876630.html</a></p><p>å…ˆå¯¹abä¸¤ä¸ªæ•°ç»„è¿›è¡Œæ’åºå¹¶ä¸”å»é‡ï¼ˆè¿™é‡Œaçš„å»é‡æ˜¯å¿…è¦çš„ï¼Œå¹¶ä¸ä»…ä»…æ˜¯ä¸ºäº†é€Ÿåº¦ï¼‰</p><p>è®¾açš„é•¿åº¦ä¸ºmï¼Œbçš„é•¿åº¦ä¸ºnï¼Œæˆ‘ä»¬æšä¸¾nå’Œmï¼Œå¤æ‚åº¦$O(n) $</p><p>å³å¯¹éŸ³ç¬¦å’Œç´å¼¦è¿›è¡Œæšä¸¾ï¼Œ$minx = b_j - a_i $,è®¾$minx$å°±æ˜¯ä¹‹åæœ€å°çš„ç´æ ¼ï¼Œæ¯”$minx $è¿˜å°çš„å°±æ˜¯ä¸å¯è¡Œçš„äº†ã€‚</p><p>æˆ‘ä»¬å®šä¹‰â€æœ€æ‚²æƒ¨çš„éŸ³ç¬¦â€æ˜¯é‚£äº›â€œåˆšå¥½å¯ä»¥ä½¿ç”¨ç´å¼¦a[k]å´æ— æ³•ä½¿ç”¨ç´å¼¦$a_{k-1} $ä¸­çš„éŸ³ç¬¦â€é‡Œæœ€å¤§çš„ã€‚</p><p><img src="%5Cimg%5Ccf-679-c%5Ctj.png" alt="tj"></p><p>æ˜¾ç„¶è¿™æ ·çš„éŸ³ç¬¦æœ€å¤šåªæœ‰$m-1 $ä¸ªã€‚ï¼ˆä¹‹å‰å»é‡å°±æ˜¯å› ä¸ºè¿™é‡Œï¼Œä¸ç„¶$a_k = a_{k-1} $å°±å‡ºé”™äº†ã€‚</p><p>å¦‚æœ$b_1 &lt; minx + a_1 $,åˆ™ä¸å¯èƒ½å­˜åœ¨â€èƒ½ä½¿ç”¨$a_1 $ä½†æ— æ³•ä½¿ç”¨$a_2 $çš„éŸ³ç¬¦â€ï¼Œå¯¹äºè¿™ç§æƒ…å†µæˆ‘ä»¬ç›´æ¥åˆ¤å®šè¿™ä¸ª$minx$ä¸åˆæ³•ï¼Œè·³è¿‡ã€‚</p><p>ç´æ ¼çš„æœ€å¤§ä½ç½®ä¸€å®šåœ¨è¿™äº›â€œæœ€æ‚²æƒ¨çš„éŸ³ç¬¦â€å’Œæœ€å¤§çš„é‚£ä¸ªéŸ³ç¬¦ä¸­äº§ç”Ÿã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;#include&lt;map&gt;#include&lt;queue&gt;#include&lt;cmath&gt;using namespace std;template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define ull unsigned long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=b;i--)#define mkp make_pair#define ft first#define sd second#define log(x) (31-__builtin_clz(x))#define INF 0x3f3f3f3ftypedef pair&lt;int,int&gt; pii;typedef pair&lt;ll,ll&gt; pll;ll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a; }//#define INF 0x7fffffffconst int MAXN = 1e5+5;ll a[8];ll b[MAXN];int n;void solve(){int m = 6;rep(i,1,m) cin&gt;&gt;a[i];sort(a+1,a+1+m);m = unique(a+1,a+1+m)-a-1;cin&gt;&gt;n;rep(i,1,n) cin&gt;&gt;b[i];sort(b+1,b+1+n);n = unique(b+1,b+1+n)-b-1;//è¯»å…¥ä¸¤ä¸ªæ•°ç»„ï¼Œæ’åºå»é‡ll minx,maxx,minn = 1ll&lt;&lt;62;rep(i,1,n){rep(j,1,m){maxx = 0;minx = b[i]-a[j];if(b[1]-a[1]&lt;minx) continue;rep(k,1,m){//æ³¨æ„ç´æ ¼ä»1å¼€å§‹//b[?]-a[k]&gt;=minx å˜å½¢ b[?]&gt;=minx+a[k]int px = lower_bound(b+1,b+1+n,minx+a[k])-b-1;//æ‰¾åˆ°æœ€åä¸€ä¸ªå¯ä»¥ç”¨a[k-1]ä½†ä¸€å®šç”¨ä¸äº†a[k]çš„maxx = max(b[px]-a[k-1],maxx);}repb(k,m,1){if(b[n]-a[k]&gt;=minx){//å’ŒéŸ³ç¬¦ä¸­çš„æœ€å¤§å€¼è¿›è¡Œæ¯”è¾ƒ,å¹¶ä¸”æ‰¾ä¸€æ ¹å°½å¯èƒ½å¤§çš„ç´å¼¦maxx = max(maxx,b[n]-a[k]);break;}}minn = min(maxx-minx,minn);}}cout&lt;&lt;minn&lt;&lt;endl;}int main(){solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ–¹æ³•2ï¼šé›†åˆ"><a href="#æ–¹æ³•2ï¼šé›†åˆ" class="headerlink" title="æ–¹æ³•2ï¼šé›†åˆ"></a>æ–¹æ³•2ï¼šé›†åˆ</h2><p>æ¥è‡ªå¦ä¸€ä¸ªå¤§ä½¬çš„åšå®¢ï¼š<a href="https://blog.csdn.net/I_have_a_world/article/details/109287448">https://blog.csdn.net/I_have_a_world/article/details/109287448</a></p><p>æˆ‘æ›´å–œæ¬¢è¿™ç¬¬äºŒç§æ–¹æ³•ï¼Œå¤æ‚åº¦ä¸Šåº”è¯¥éƒ½æ˜¯$O(nlogn)$çš„ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•çœŸçš„æŒºç®€æ´æ˜“æ‡‚çš„ã€‚</p><p>ä¸¤ä¸ªæ•°ç»„å¯ä»¥ä¸å»é‡,ä½†æ˜¯å»é‡çš„è¯æ•ˆç‡åº”è¯¥ä¼šæ›´é«˜ã€‚</p><p>æä¸€ä¸ªin[MAXN]æ•°ç»„ï¼Œè®°å½•å½“å‰è¿™ä¸ªéŸ³ç¬¦æ‰€åœ¨çš„å¼¦ã€‚</p><p>è®¾æ’åºå»é‡åæœ‰nä¸ªéŸ³ç¬¦ï¼Œmä¸ªç´å¼¦ã€‚</p><p>ä¸€å¼€å§‹æ¯ä¸ªéŸ³ç¬¦éƒ½åœ¨å¼¦mä¸Šï¼Œç”¨pair&lt;ll,ll&gt;æ¥è®°å½•ï¼Œåˆ†åˆ«è®°å½•$b_i - a_{in[i]} $å’Œç¼–å·$i$ã€‚</p><p>æŠŠè¿™äº›äºŒå…ƒç»„éƒ½å­˜åœ¨é›†åˆseté‡Œï¼Œç„¶åæ¯æ¬¡å–å‡ºfirstæœ€å°çš„(å³$b_i - a_{in[i]} $)æœ€å¤§çš„å…ƒç´ iï¼Œå’Œé›†åˆä¸­firstæœ€å¤§çš„åšå·®ã€‚åœ¨è¿™äº›æ•°å€¼ä¸­æ‰¾æœ€å°å€¼ã€‚</p><p>è¿™æ ·ä»¥åï¼ŒæŠŠæœ€å°çš„iå¯¹åº”çš„in[i]â€“ï¼Œå³è®©ä»–å˜å¾—æ›´å¤§å†åŠ å…¥é›†åˆã€‚</p><p>é‡å¤è¿™äº›æ­¥éª¤ç›´åˆ°æœ€å°çš„å…ƒç´ ä¹Ÿæ˜¯ç”¨çš„1å¼¦ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™æ—¶å€™å…¶ä»–å¼¦å¦‚æœå†å¾€ä¸‹æ¢å¼¦ï¼Œä¹Ÿåªèƒ½ä½¿$b_i - a_{in[i]} $å˜å¾—æ›´å¤§ï¼Œä½¿æœ€å¤§-æœ€å°çš„å€¼å˜å¤§æˆ–è€…ä¸å˜ï¼Œæ‰€ä»¥åˆ°è¿™é‡Œå°±æ²¡å¿…è¦ç»§ç»­å¾€ä¸‹äº†ã€‚</p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;set&gt;#include&lt;cmath&gt;using namespace std;int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=b;i--)#define mkp make_pair#define ft first#define sd secondtypedef pair&lt;ll,ll&gt; pll;const int MAXN = 1e5+5;ll a[8];ll b[MAXN];int in[MAXN];int n;set&lt;pll&gt;st;void solve(){int m = 6;rep(i,1,m) cin&gt;&gt;a[i];sort(a+1,a+1+m);m = unique(a+1,a+1+m)-a-1;cin&gt;&gt;n;rep(i,1,n) cin&gt;&gt;b[i];    sort(b+1,b+1+n);n = unique(b+1,b+1+n)-b-1;//è¿™é‡Œå…¶å®æ²¡å¤ªå¤§å¿…è¦å»é‡ï¼Œä½†æ˜¯æˆ‘æƒ³äº†ä¸€ä¸‹è¿˜æ˜¯å»é‡äº†    rep(i,1,n){        in[i] = m;        st.insert(mkp(b[i]-a[m],(ll)i));//ä¸€å¼€å§‹éƒ½æ˜¯ç”¨må¼¦å¼¹çš„    }    ll minn = st.rbegin()-&gt;ft-st.begin()-&gt;ft;    while(1){        pll now = *st.begin();        st.erase(st.begin());//è¿™è¾¹çš„å‚æ•°æ˜¯è¿­ä»£å™¨,è¿™æ ·åˆ å¤æ‚åº¦æ›´å°        if(in[now.sd]==1) break;        //å¦‚æœæœ€å°çš„éƒ½æ˜¯1,é‚£ä¹ˆå…¶ä»–çš„éŸ³ç¬¦æ¢å¼¦ä¹Ÿä¸å¯èƒ½è®©ç»“æœæ›´å°äº†,å› ä¸ºå¾€ä¸‹æ¢åªä¼šè®©bi-ajæ›´å¤§        in[now.sd]--;//æ¯æ¬¡æ¢æˆæ›´å°çš„å¼¦        st.insert(mkp(b[now.sd]-a[in[now.sd]],now.sd));        minn = min(minn,st.rbegin()-&gt;ft-st.begin()-&gt;ft);    }    cout&lt;&lt;minn&lt;&lt;endl;}int main(){    solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> é›†åˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å‘¨è®°ã€‘2020å¹´10æœˆ25æ—¥</title>
      <link href="2020/10/25/zhouji1/"/>
      <url>2020/10/25/zhouji1/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¯æ—¥å°è®°"><a href="#æ¯æ—¥å°è®°" class="headerlink" title="æ¯æ—¥å°è®°"></a>æ¯æ—¥å°è®°</h1><h2 id="10-21"><a href="#10-21" class="headerlink" title="10-21"></a>10-21</h2><p>ä»Šå¤©ä¸Šåˆç¡è§‰å’Œä¸Šæ¦‚ç‡è®ºï¼Œæ¦‚ç‡è®ºè¯¾ä¸Šæœ‰ç‚¹å¼€å°å·®äº†ï¼Œä¸è¿‡è¿˜å¥½ä»Šå¤©çš„è¯¾æ¯”è¾ƒç®€å•ã€‚</p><p>ä¸‹åˆå¤§èŒè¯¾Div3æ°´äº†å››é¢˜ï¼Œä¸‹è¯¾ä¹‹ååˆ°æ”€å³°è‡ªä¹ ï¼Œè¡¥äº†raif roundçš„Eé¢˜ã€‚</p><p>æ™šä¸Šå¼€å§‹çœ‹Fï¼Œå‘ç°æ˜¯æ‰«æçº¿ç®—æ³•ï¼Œå¼€å§‹å­¦æ‰«æçº¿ã€‚</p><p>å›å¯å®¤ä¹‹åæ‘¸é±¼ç©å¼‚æ˜Ÿå·¥åœºäº†ã€‚</p><h2 id="10-22"><a href="#10-22" class="headerlink" title="10-22"></a>10-22</h2><p>è¿åŠ¨ä¼šå››å¤©ä¼‘å‡çš„ç¬¬ä¸€å¤©ã€‚</p><p>ä¸­åˆåˆ°æ”€å³°å­¦ä¹ ã€‚</p><p>çœ‹æ¿å­çš„æ—¶å€™å‘ç°uniqueå‡½æ•°å¯ä»¥å–å‡ºç›¸é‚»é‡å¤å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯åºåˆ—æœ«å°¾çš„è¿­ä»£å™¨ã€‚</p><p>14:44 æ‘¸å®Œäº†æ‰«æçº¿æ¿å­ï¼ŒWAäº†å¥½ä¹…å°±å› ä¸ºçº¿æ®µæ ‘æ²¡å¼€è¶³å¤Ÿå¤§ï¼Œå› ä¸ºä¸€æ¡çº¿æœ‰ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ‰€ä»¥çº¿æ®µæ ‘éœ€è¦å¼€åˆ°æ‰«æçº¿æ•°é‡çš„8å€ï¼Œä¹Ÿå°±æ˜¯å››è¾¹å½¢æ•°é‡çš„16å€ï¼Œæˆ‘å°‘å¼€äº†2å€ã€‚æ‰«æçº¿çœŸçš„æ˜¯å¾ˆå¥‡å¦™çš„ç®—æ³•ï¼Œæ€è·¯éå¸¸ç®€æ´ï¼Œç„¶åå…·ä½“å®ç°çš„æ—¶å€™ä¸€äº›ç»†èŠ‚(è¾¹ä½ç½®ä¸Šçš„å¤„ç†)æ¯”è¾ƒç»†èŠ‚ã€‚<br>$$<br>çº¿æ®µæ ‘ä¸Šç‚¹kä»£è¡¨çš„åŒºé—´å…¶å®æ˜¯ [x_{k},x_{k+1}),x_{k}æ˜¯kç¦»æ•£åŒ–å‰çš„æ•°å€¼ã€‚<br>$$<br>15:15 å¼€äº†ä¸€åœºvp-cf#672)æœ€è¿‘æ‰“ç®—å¤švpç»ƒè‹±è¯­å’Œä»£ç èƒ½åŠ›ã€‚</p><p>16:12 å‰é¢ä¸‰é¢˜åšçš„æ¯”è¾ƒé¡ºåˆ©ï¼ŒC2æ²¡ä»€ä¹ˆæƒ³æ³•ï¼Œæ•…æ‘¸äº†</p><h2 id="10-23"><a href="#10-23" class="headerlink" title="10-23"></a>10-23</h2><p>è¿åŠ¨ä¼šå››å¤©ä¼‘å‡çš„ç¬¬äºŒå¤©ã€‚</p><p>ä¸Šå®Œå®éªŒè¯¾ï¼Œ15:42æ¥åˆ°æ”€å³°ã€‚</p><p>16:00å¼€å§‹vp-cf#660ï¼Œè¿™åœºå¾ˆæ‹‰å®ï¼ŒABè¿˜ç®—æ­£å¸¸ï¼ŒCä¸€å¼€å§‹å°±æƒ³é”™äº†ï¼Œå‘ç°è‡ªå·±æ ‘å½¢DPæ˜¯çœŸçš„ä¸è¡Œ,è¿™å‡ å¤©å¯ä»¥åŠ å¼ºä¸€ä¸‹ã€‚</p><p>æ™šä¸Šåƒå®Œé¥­å›æ¥18:40åˆå¼€äº†ä¸€åœºvp cf#655 ABé¢˜å¾ˆé¡ºåˆ©ï¼ŒCæ¯”è¾ƒæ°´ï¼Œåˆ°Dé¢˜æ²¡å•¥æƒ³æ³•äº†çœ‹äº†çœ‹é¢˜è§£çŸ¥é“æ˜¯åˆ†å¥‡å¶åšå‰ç¼€å’Œç„¶åå°±è¿‡äº†ã€‚</p><p>20:30å¼€äº†vp-cf-gr9 ABå¾ˆé¡ºåˆ©ï¼ŒCä¸€å¼€å§‹æƒ³çš„å¤ªå¤æ‚äº†ï¼Œä¸€å°æ—¶çš„æ—¶å€™åˆ äº†ä¸€å¤§æ®µä»£ç ç»“æœè¿‡äº†ï¼Œè¿™æ—¶å€™æ˜¯21:38ï¼Œæ‰“ç®—å›å¯å®¤ä¼‘æ¯äº†ã€‚</p><p>ä»Šå¤©æ‰“äº†ä¸‰åœºvpï¼Œæ„Ÿè§‰èº«ä½“è¢«æç©ºï¼Œæœ€åæ•´ç†ä¸€ä¸‹å°±å›å¯å®¤äº†ã€‚</p><h2 id="10-24"><a href="#10-24" class="headerlink" title="10-24"></a>10-24</h2><p>è¿åŠ¨ä¼šå››å¤©ä¼‘å‡çš„ç¬¬ä¸‰å¤©ã€‚</p><p>ä»Šå¤©ç¨å¾®æœ‰ç‚¹æ€ æƒ°ï¼Œå»ç”µä¿¡è¥ä¸šå…æŠŠwifiå¯†ç å›ºå®šäº†ï¼Œä¹‹åå°±ä¸ç”¨å†æ¯æ¬¡å‘çŸ­ä¿¡é—®å¯†ç äº†ã€‚</p><p>ä¸‹åˆ15:30æ‰“äº†vp-cf#581ï¼Œè¿˜æ˜¯ç…§ä¾‹è¿‡äº†ABCä¸‰é¢˜ã€‚è¿™å‡ å¤©ç»ƒä¸‹æ¥å‘ç°è‡ªå·±åˆ‡ç®€å•é¢˜çš„é€Ÿåº¦å¿«äº†ä¸å°‘ï¼ŒåŸºæœ¬æœ€å·®ä¸€ä¸ªå°æ—¶å†…éƒ½èƒ½æå®šã€‚</p><p>æ™šä¸Š22:05æœ‰ä¸€åœºcf 678 ã€‚ABCéƒ½æ¯”è¾ƒé¡ºåˆ©ï¼ŒDé¢˜éå¸¸æƒ¨ï¼Œä¸€ç›´äº¤ä¸€ç›´é”™ï¼Œä¹Ÿæ˜¯æ ‘å½¢DPé¢˜ï¼ŒçœŸçš„è¯¥ç»ƒç»ƒï¼Œé‚£å°±æ˜å¤©ç»ƒå§ã€‚</p><h2 id="10-25"><a href="#10-25" class="headerlink" title="10-25"></a>10-25</h2><p>ç°åœ¨æ˜¯1:18ï¼Œè®¡åˆ’ä»Šå¤©æŠŠå‰å‡ å¤©çš„é¢˜è¡¥äº†ï¼Œå¹¶ä¸”å†™ä¸€ä¸‹æ ‘å½¢DPï¼Œå…ˆå®šä¸ªå°ç›®æ ‡ï¼Œ5é¢˜æ ‘å½¢DPï¼Œæœ‰ç©ºä½™æ—¶é—´çš„è¯æŠŠFFTç»“æŸä¸€ä¸‹ã€‚</p><h1 id="ä¸€å‘¨æ€»ç»“"><a href="#ä¸€å‘¨æ€»ç»“" class="headerlink" title="ä¸€å‘¨æ€»ç»“"></a>ä¸€å‘¨æ€»ç»“</h1><h1 id="å¤§ç‹çœŸå¯çˆ±"><a href="#å¤§ç‹çœŸå¯çˆ±" class="headerlink" title="å¤§ç‹çœŸå¯çˆ±"></a>å¤§ç‹çœŸå¯çˆ±</h1><p><img src="/img/zhouji1/altera.jpg" alt="altera"></p>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘¨è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round /#676 (Div. 2) D. Hexagons é¢˜è§£</title>
      <link href="2020/10/20/cf-676/"/>
      <url>2020/10/20/cf-676/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜æ„"><a href="#é¢˜æ„" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h1><p><img src="/img/cf-676/cft.png" alt="cft"> </p><p>â€‹        æœ‰è¿™æ ·ä¸€ä¸ªå…­è¾¹å½¢åæ ‡ç³»ï¼Œå¹¶ç»™äº†å…­ä¸ªç§»åŠ¨æ–¹å‘C1-6ã€‚</p><p><img src="/img/cf-676/cf2.png" alt="cf2"> </p><p>â€‹        è¾“å…¥ç»™å®šç›®æ ‡åæ ‡xyï¼Œå¹¶ä¸”ç»™å®šC1-6æ¯ä¸ªæ–¹å‘çš„è´¹ç”¨ï¼Œæ±‚ä»(0,0)åˆ°(x,y)çš„æœ€å°è´¹ç”¨ã€‚</p><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>â€‹        æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¦è¿›è¡Œä¸€æ¬¡C2çš„ç§»åŠ¨ï¼Œå¯ä»¥é€šè¿‡ä¸€æ¬¡C1å’Œä¸€æ¬¡C3åˆæˆï¼ŒåŒç†å¦‚æœå‘è¿›è¡Œä¸€æ¬¡C1ç§»åŠ¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡C6å’ŒC2è¿›è¡Œåˆæˆã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆè¿›è¡Œä¸€æ¬¡ç±»ä¼¼æœ€çŸ­è·¯çš„æ“ä½œï¼Œå¦‚æœä¸€ä¸ªæ–¹å‘xçš„è´¹ç”¨æ¯”å®ƒå·¦å³x+1,x-1ç›¸åŠ çš„è¿˜è¦å¤šï¼Œåˆ™éœ€è¦æŠŠè¿™ä¸ªè´¹ç”¨æ›¿æ¢ã€‚</p><p>â€‹        è¿™æ ·æ“ä½œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚æœè¦ä»(0,0)åˆ°(x,y)ï¼Œæœ€å¤šåªéœ€è¦èµ°ç”¨åˆ°ä¸¤ä¸ªæ–¹å‘ã€‚ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œçš„æ–¹å‘ç»è¿‡äº†ä¹‹å‰çš„æ“ä½œï¼Œå…¶å®å’Œä¸€å¼€å§‹çš„ç§»åŠ¨æ˜¯ä¸ä¸€æ ·çš„ï¼‰</p><p>â€‹        ä¹‹åæˆ‘ä»¬æšä¸¾é€‰å“ªä¸¤ç§æ–¹å‘å°±è¡Œäº†ã€‚æˆ‘æ¯”èµ›çš„æ—¶å€™é€‰æ‹©çš„æ–¹æ³•æ¯”è¾ƒå‚»é€¼ï¼Œæ˜¯ç»™å®šä¸€ä¸ªåæ ‡(x,y)ï¼Œæˆ‘å…ˆæšä¸¾ï¼šè¦å…ˆæå®šxè¿˜æ˜¯å…ˆæå®šyï¼Œç„¶ååˆ¤æ–­x(æˆ–y)å˜æˆ0ä¹‹åï¼Œéœ€è¦ç”¨å“ªä¸€ä¸ªæ–¹å‘ï¼Œå¥—äº†ä¸¤é‡å¾ªç¯ï¼Œæ¯”è¾ƒä¸ç§‘å­¦ã€‚åæ¥çœ‹äº†å¤§ä½¬ä»¬çš„ä»£ç å‘ç°æœ‰æ•ˆç‡æ›´é«˜æ›´å¥½å†™çš„æ–¹æ³•ã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p>æ¯”èµ›æ—¶çš„ä»£ç </p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;cstring&gt;#include&lt;cstdio&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;#include&lt;map&gt;#include&lt;queue&gt;#include&lt;cmath&gt;using namespace std;template&lt;class T&gt;inline void read(T &amp;x){x=0;char o,f=1;while(o=getchar(),o&lt;48)if(o==45)f=-f;do x=(x&lt;&lt;3)+(x&lt;&lt;1)+(o^48);while(o=getchar(),o&gt;47);x*=f;}int cansel_sync=(ios::sync_with_stdio(0),cin.tie(0),0);#define ll long long#define ull unsigned long long#define rep(i,a,b) for(int i=(a);i&lt;=(b);i++)#define repb(i,a,b) for(int i=(a);i&gt;=b;i--)#define log(x) (31-__builtin_clz(x))#define INF 0x3f3f3f3f#define int llll gcd(ll a,ll b){ while(b^=a^=b^=a%=b); return a; }//#define INF 0x7fffffffint dir[6][2] = {1,1,0,1, -1,0,-1,-1, 0,-1,1,0};ll c[6];ll tx,ty;ll res;inline ll cd(int x){ return c[ (x+6)%6 ]; }inline bool th(ll a,ll b){//åˆ¤æ–­åŒå·if(a==b&amp;&amp;a==0) return 1;else if(a&gt;0&amp;&amp;b&gt;0) return 1;else if(a&lt;0&amp;&amp;b&lt;0) return 1;return 0;}void solve(){res = 0;cin&gt;&gt;tx&gt;&gt;ty;rep(i,0,5) cin&gt;&gt;c[i];//è´¹ç”¨;rep(i,0,5){//æœ€çŸ­è·¯æ€æƒ³if(cd(i-1)+cd(i+1)&lt;cd(i)) c[i] = cd(i-1)+cd(i+1);}ll minn = 1LL&lt;&lt;62;//æˆ‘æ‡‚äº†ï¼Œæœ€å¤šåªéœ€è¦ä¸¤ç§æ–¹å‘ã€‚//å…ˆæŠŠtxå¼„åˆ°ç›¸åŒçš„æ–¹æ¡ˆ//å…ˆæxå†æyçš„æƒ…å†µrep(i,0,5){res = 0;ll tty = ty;ll ttx = tx;if(dir[i][0]==0) continue;if(th(dir[i][0],ttx)||ttx==0){ll tim = abs(ttx);tty -= tim*dir[i][1];ttx = 0;res += c[i]*tim;rep(j,0,5){if(dir[j][0]!=0) continue;if(dir[j][1]==0) continue;if(th(dir[j][1],tty)||tty==0){ll tim = abs(tty);ll res2 = res + c[j]*tim;minn = min(minn,res2);//cout&lt;&lt;i&lt;&lt;' '&lt;&lt;j&lt;&lt;':'&lt;&lt;res&lt;&lt;' '&lt;&lt;res2&lt;&lt;endl;}}}}//å…ˆæyå†æxrep(i,0,5){res = 0;ll tty = ty;ll ttx = tx;if(dir[i][1]==0) continue;if(th(dir[i][1],tty)||tty==0){ll tim = abs(tty);ttx -= tim*dir[i][0];tty = 0;res += c[i]*tim;rep(j,0,5){if(dir[j][1]!=0) continue;if(dir[j][0]==0) continue;if(th(dir[j][0],ttx)||ttx==0){ll tim = abs(ttx);ll res2 = res + c[j]*tim;minn = min(minn,res2);//cout&lt;&lt;i&lt;&lt;' '&lt;&lt;j&lt;&lt;':'&lt;&lt;res&lt;&lt;' '&lt;&lt;res2&lt;&lt;endl;}}}}cout&lt;&lt;minn&lt;&lt;endl;}signed main(){int z;cin&gt;&gt;z;while(z--) solve();}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
            <tag> Codeforces </tag>
            
            <tag> æ€ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>To Begin With</title>
      <link href="2020/10/20/first-blog/"/>
      <url>2020/10/20/first-blog/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦å†™åšå®¢"><a href="#ä¸ºä»€ä¹ˆè¦å†™åšå®¢" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å†™åšå®¢"></a>ä¸ºä»€ä¹ˆè¦å†™åšå®¢</h2><p>â€‹        å…¶å®æ²¡æœ‰ä»€ä¹ˆéå†™ä¸å¯çš„ç†ç”±ï¼Œåªæ˜¯çœ‹lhdä»–ä»¬å•¥éƒ½ä¼šï¼Œå°±æƒ³ç€è‡ªå·±ä¹Ÿå­¦ç€æç‚¹ä¸œè¥¿ã€‚</p><p>â€‹        ä¹‹å‰éƒ½æ˜¯åœ¨CSDNä¸Šç”¨çš„åšå®¢ï¼Œæ–¹ä¾¿æ˜¯æ–¹ä¾¿ï¼Œä½†æ˜¯çœ‹è½¬çˆ·ä»–ä»¬çš„åšå®¢é‚£ä¹ˆå¥½çœ‹å…¶å®è¿˜æŒºç¾¡æ…•çš„ï¼Œæ‰€ä»¥ä»Šå¤©é—²ç€å°±æƒ³ç€æ­ä¸€ä¸ªåšå®¢çœ‹çœ‹ã€‚</p><h2 id="å‚è€ƒçš„å¸–å­"><a href="#å‚è€ƒçš„å¸–å­" class="headerlink" title="å‚è€ƒçš„å¸–å­"></a>å‚è€ƒçš„å¸–å­</h2><p>Hexoçš„åŸºæœ¬ä½¿ç”¨å‚è€ƒäº†</p><p><a href="https://www.cnblogs.com/liuxianan/p/build-blog-website-by-hexo-github.html">https://www.cnblogs.com/liuxianan/p/build-blog-website-by-hexo-github.html</a></p><p>Hexoç¯å¢ƒå˜é‡é…ç½®</p><p><a href="https://blog.csdn.net/weixin_30673611/article/details/94825385">https://blog.csdn.net/weixin_30673611/article/details/94825385</a></p><p><em>ä¸€å¼€å§‹æ²¡æœ‰åŠ åˆ°pathé‡Œé¢è€Œæ˜¯æ–°å»ºäº†ä¸€ä¸ªå˜é‡ï¼Œåæ¥å‘ç°è¦åŠ åˆ°pathé‡Œé¢æ‰è¡Œ</em></p><p>ç”¨Giteeæ›´å¿«cloneä»“åº“</p><p><a href="https://blog.csdn.net/huitailang2020/article/details/104813219">https://blog.csdn.net/huitailang2020/article/details/104813219</a></p><p>æœ¬åšå®¢ç”¨çš„ä¸»é¢˜</p><p><a href="https://zhuanlan.zhihu.com/p/137679728">https://zhuanlan.zhihu.com/p/137679728</a></p><p>fluidä¸»é¢˜çš„é…ç½®æŒ‡å—</p><p><a href="https://fluid-dev.github.io/hexo-fluid-docs/guide/">https://fluid-dev.github.io/hexo-fluid-docs/guide/</a></p><p>npmå®‰è£…</p><p><a href="https://www.cnblogs.com/lgx5/p/10732016.html">https://www.cnblogs.com/lgx5/p/10732016.html</a></p><p>æ¸²æŸ“MathJaxæ•°å­¦å…¬å¼-è§£å†³äº†æˆ‘å†…è”å…¬å¼æ¸²æŸ“å¤±è´¥çš„é—®é¢˜</p><p><a href="https://www.jianshu.com/p/7ab21c7f0674">https://www.jianshu.com/p/7ab21c7f0674</a></p><p>ç»™æ–‡ç« åŠ å¯†</p><p><a href="https://www.jianshu.com/p/44e211829447?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation">https://www.jianshu.com/p/44e211829447?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation</a></p><p><a href="https://blog.csdn.net/weixin_45750972/article/details/111396124">https://blog.csdn.net/weixin_45750972/article/details/111396124</a></p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ç»´æŠ¤ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
